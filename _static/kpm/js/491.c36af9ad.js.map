{"version":3,"file":"js/491.c36af9ad.js","mappings":"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","sources":["webpack://pipeline-manager/./node_modules/@baklavajs/events/dist/esm/subscribable.js","webpack://pipeline-manager/./node_modules/@baklavajs/events/dist/esm/event.js","webpack://pipeline-manager/./node_modules/@baklavajs/events/dist/esm/hook.js","webpack://pipeline-manager/./node_modules/@baklavajs/events/dist/esm/proxy.js","webpack://pipeline-manager/./node_modules/@baklavajs/renderer-vue/dist/renderer-vue.es.js"],"sourcesContent":["export class Subscribable {\n    constructor() {\n        this.listenerMap = new Map();\n        this._listeners = [];\n        this.proxyMap = new Map();\n        this.proxies = [];\n    }\n    get listeners() {\n        return this._listeners.concat(this.proxies.flatMap((getListeners) => getListeners()));\n    }\n    /**\n     * Subscribe to the event / hook\n     * @param token A token that can be used to unsubscribe from the event / hook later on\n     * @param callback A callback that will be invoked when the event / hook occurs\n     */\n    subscribe(token, callback) {\n        if (this.listenerMap.has(token)) {\n            console.warn(\"Already subscribed. Unsubscribing for you.\\n\" +\n                \"Please check that you don't accidentally use the same token twice \" +\n                \"to register two different handlers for the same event/hook.\");\n            this.unsubscribe(token);\n        }\n        this.listenerMap.set(token, callback);\n        this._listeners.push(callback);\n    }\n    /**\n     * Remove a listener\n     * @param token The token that was specified when subscribing to the listener.\n     * An invalid token does not result in an error.\n     */\n    unsubscribe(token) {\n        if (this.listenerMap.has(token)) {\n            const callback = this.listenerMap.get(token);\n            this.listenerMap.delete(token);\n            const i = this._listeners.indexOf(callback);\n            if (i >= 0) {\n                this._listeners.splice(i, 1);\n            }\n        }\n    }\n    /** This function is only used internally for proxies */\n    registerProxy(token, getListeners) {\n        if (this.proxyMap.has(token)) {\n            console.warn(\"Already subscribed. Unsubscribing for you.\\n\" +\n                \"Please check that you don't accidentally use the same token twice \" +\n                \"to register two different proxies for the same event/hook.\");\n            this.unregisterProxy(token);\n        }\n        this.proxyMap.set(token, getListeners);\n        this.proxies.push(getListeners);\n    }\n    /** This function is only used internally for proxies */\n    unregisterProxy(token) {\n        if (!this.proxyMap.has(token)) {\n            return;\n        }\n        const getListeners = this.proxyMap.get(token);\n        this.proxyMap.delete(token);\n        const i = this.proxies.indexOf(getListeners);\n        if (i >= 0) {\n            this.proxies.splice(i, 1);\n        }\n    }\n}\n","import { Subscribable } from \"./subscribable\";\n/** Main event class for Baklava */\nexport class BaklavaEvent extends Subscribable {\n    constructor(entity) {\n        super();\n        this.entity = entity;\n    }\n    /**\n     * Invoke all listeners\n     * @param data The data to invoke the listeners with.\n     */\n    emit(data) {\n        this.listeners.forEach((l) => l(data, this.entity));\n    }\n}\n/**\n * Extension for the {@link BaklavaEvent} class. A listener can return `false` to prevent\n * this event from happening.\n */\nexport class PreventableBaklavaEvent extends Subscribable {\n    constructor(entity) {\n        super();\n        this.entity = entity;\n    }\n    /**\n     * Invoke all listeners.\n     * @param data The data to invoke all listeners with\n     * @returns An object, where the `prevented` field is `true` when one of the listeners requested to prevent the event, otherwise `false`\n     */\n    emit(data) {\n        let prevented = false;\n        const prevent = () => [(prevented = true)];\n        for (const l of Array.from(this.listeners.values())) {\n            l(data, prevent, this.entity);\n            if (prevented) {\n                return { prevented: true };\n            }\n        }\n        return { prevented: false };\n    }\n}\n","import { Subscribable } from \"./subscribable\";\n/** Similar to the SequentialHook, but allows to pass a different entity for each execute call */\nexport class DynamicSequentialHook extends Subscribable {\n    execute(data, entity) {\n        let currentValue = data;\n        for (const callback of this.listeners) {\n            currentValue = callback(currentValue, entity);\n        }\n        return currentValue;\n    }\n}\n/** This class will run the taps one after each other and pass the data from every subscriber to another. */\nexport class SequentialHook extends DynamicSequentialHook {\n    constructor(entity) {\n        super();\n        this.entity = entity;\n    }\n    execute(data) {\n        return super.execute(data, this.entity);\n    }\n}\nexport class ParallelHook extends Subscribable {\n    constructor(entity) {\n        super();\n        this.entity = entity;\n    }\n    execute(data) {\n        const results = [];\n        for (const callback of this.listeners) {\n            results.push(callback(data, this.entity));\n        }\n        return results;\n    }\n}\n","import { Subscribable } from \"./subscribable\";\nexport function createProxy() {\n    const token = Symbol();\n    const listeners = new Map();\n    const targets = new Set();\n    const register = (key, subscribable) => {\n        if (subscribable instanceof Subscribable) {\n            subscribable.registerProxy(token, () => { var _a, _b; return (_b = (_a = listeners.get(key)) === null || _a === void 0 ? void 0 : _a.listeners) !== null && _b !== void 0 ? _b : []; });\n        }\n    };\n    const addSubscribable = (key) => {\n        const subscribable = new Subscribable();\n        listeners.set(key, subscribable);\n        targets.forEach((t) => register(key, t[key]));\n    };\n    const addTarget = (target) => {\n        targets.add(target);\n        for (const key of listeners.keys()) {\n            register(key, target[key]);\n        }\n    };\n    const removeTarget = (target) => {\n        for (const key of listeners.keys()) {\n            if (target[key] instanceof Subscribable) {\n                target[key].unregisterProxy(token);\n            }\n        }\n        targets.delete(target);\n    };\n    const destroy = () => {\n        targets.forEach((t) => removeTarget(t));\n        listeners.clear();\n    };\n    return new Proxy({}, {\n        get(target, key) {\n            if (key === \"addTarget\") {\n                return addTarget;\n            }\n            else if (key === \"removeTarget\") {\n                return removeTarget;\n            }\n            else if (key === \"destroy\") {\n                return destroy;\n            }\n            if (typeof key !== \"string\" || key.startsWith(\"_\")) {\n                // vue internally uses properties starting with _ -> we just ignore them\n                // also ignore all other properties that arent valid indexes for the events/hooks objects\n                return target[key];\n            }\n            if (!listeners.has(key)) {\n                addSubscribable(key);\n            }\n            return listeners.get(key);\n        },\n    });\n}\n","import { toRef, ref, computed, provide, defineComponent, openBlock, createElementBlock, normalizeStyle, isRef, toRefs as toRefs$1, customRef, getCurrentScope, onScopeDispose, unref, watch, resolveComponent, createBlock, Transition, withCtx, withDirectives, createElementVNode, normalizeClass, Fragment, renderList, withModifiers, toDisplayString, createCommentVNode, vShow, inject, onMounted, onUpdated, resolveDynamicComponent, createVNode, withKeys, vModelText, nextTick, onBeforeUnmount, markRaw, reactive, createStaticVNode, createTextVNode, renderSlot, TransitionGroup, shallowReadonly } from \"vue\";\nimport { GRAPH_NODE_TYPE_PREFIX, NodeInterface as NodeInterface$1, defineNode, getGraphNodeTypeString, GraphTemplate, Graph, Editor as Editor$1 } from \"@baklavajs/core\";\nimport { SequentialHook } from \"@baklavajs/events\";\nlet viewModelRef = null;\nfunction providePlugin(viewModel) {\n  viewModelRef = viewModel;\n}\nfunction useViewModel() {\n  if (!viewModelRef) {\n    throw new Error(\"providePlugin() must be called before usePlugin()\");\n  }\n  return {\n    viewModel: viewModelRef\n  };\n}\nfunction useGraph() {\n  const { viewModel } = useViewModel();\n  return {\n    graph: toRef(viewModel.value, \"displayedGraph\"),\n    switchGraph: viewModel.value.switchGraph\n  };\n}\nfunction useDragMove(positionRef) {\n  const { graph } = useGraph();\n  const draggingStartPoint = ref(null);\n  const draggingStartPosition = ref(null);\n  const dragging = computed(() => !!draggingStartPoint.value);\n  const onPointerDown = (ev) => {\n    draggingStartPoint.value = {\n      x: ev.pageX,\n      y: ev.pageY\n    };\n    draggingStartPosition.value = {\n      x: positionRef.value.x,\n      y: positionRef.value.y\n    };\n  };\n  const onPointerMove = (ev) => {\n    if (draggingStartPoint.value) {\n      const dx = ev.pageX - draggingStartPoint.value.x;\n      const dy = ev.pageY - draggingStartPoint.value.y;\n      positionRef.value.x = draggingStartPosition.value.x + dx / graph.value.scaling;\n      positionRef.value.y = draggingStartPosition.value.y + dy / graph.value.scaling;\n    }\n  };\n  const onPointerUp = () => {\n    draggingStartPoint.value = null;\n    draggingStartPosition.value = null;\n  };\n  return { dragging, onPointerDown, onPointerMove, onPointerUp };\n}\nfunction useTransform() {\n  const { graph } = useGraph();\n  const transform = (x, y) => {\n    const tx = x / graph.value.scaling - graph.value.panning.x;\n    const ty = y / graph.value.scaling - graph.value.panning.y;\n    return [tx, ty];\n  };\n  return { transform };\n}\nfunction usePanZoom() {\n  const { graph } = useGraph();\n  let pointerCache = [];\n  let prevDiff = -1;\n  let midpoint = { x: 0, y: 0 };\n  const panningRef = computed(() => graph.value.panning);\n  const dragMove = useDragMove(panningRef);\n  const styles = computed(() => ({\n    \"transform-origin\": \"0 0\",\n    \"transform\": `scale(${graph.value.scaling}) translate(${graph.value.panning.x}px, ${graph.value.panning.y}px)`\n  }));\n  const applyZoom = (centerX, centerY, newScale) => {\n    const currentPoint = [\n      centerX / graph.value.scaling - graph.value.panning.x,\n      centerY / graph.value.scaling - graph.value.panning.y\n    ];\n    const newPoint = [centerX / newScale - graph.value.panning.x, centerY / newScale - graph.value.panning.y];\n    const diff = [newPoint[0] - currentPoint[0], newPoint[1] - currentPoint[1]];\n    graph.value.panning.x += diff[0];\n    graph.value.panning.y += diff[1];\n    graph.value.scaling = newScale;\n  };\n  const onMouseWheel = (ev) => {\n    ev.preventDefault();\n    let scrollAmount = ev.deltaY;\n    if (ev.deltaMode === 1) {\n      scrollAmount *= 32;\n    }\n    const newScale = graph.value.scaling * (1 - scrollAmount / 3e3);\n    applyZoom(ev.offsetX, ev.offsetY, newScale);\n  };\n  const getCoordsFromCache = () => ({\n    ax: pointerCache[0].clientX,\n    ay: pointerCache[0].clientY,\n    bx: pointerCache[1].clientX,\n    by: pointerCache[1].clientY\n  });\n  const onPointerDown = (ev) => {\n    pointerCache.push(ev);\n    dragMove.onPointerDown(ev);\n    if (pointerCache.length === 2) {\n      const { ax, ay, bx, by } = getCoordsFromCache();\n      midpoint = {\n        x: ax + (bx - ax) / 2,\n        y: ay + (by - ay) / 2\n      };\n    }\n  };\n  const onPointerMove = (ev) => {\n    for (let i = 0; i < pointerCache.length; i++) {\n      if (ev.pointerId == pointerCache[i].pointerId) {\n        pointerCache[i] = ev;\n        break;\n      }\n    }\n    if (pointerCache.length == 2) {\n      const { ax, ay, bx, by } = getCoordsFromCache();\n      const dx = ax - bx;\n      const dy = ay - by;\n      const curDiff = Math.sqrt(dx * dx + dy * dy);\n      if (prevDiff > 0) {\n        const newScale = graph.value.scaling * (1 + (curDiff - prevDiff) / 500);\n        applyZoom(midpoint.x, midpoint.y, newScale);\n      }\n      prevDiff = curDiff;\n    } else {\n      dragMove.onPointerMove(ev);\n    }\n  };\n  const onPointerUp = (ev) => {\n    pointerCache = pointerCache.filter((p) => p.pointerId !== ev.pointerId);\n    prevDiff = -1;\n    dragMove.onPointerUp();\n  };\n  return { styles, ...dragMove, onPointerDown, onPointerMove, onPointerUp, onMouseWheel };\n}\nvar TemporaryConnectionState = /* @__PURE__ */ ((TemporaryConnectionState2) => {\n  TemporaryConnectionState2[TemporaryConnectionState2[\"NONE\"] = 0] = \"NONE\";\n  TemporaryConnectionState2[TemporaryConnectionState2[\"ALLOWED\"] = 1] = \"ALLOWED\";\n  TemporaryConnectionState2[TemporaryConnectionState2[\"FORBIDDEN\"] = 2] = \"FORBIDDEN\";\n  return TemporaryConnectionState2;\n})(TemporaryConnectionState || {});\nfunction useTemporaryConnection() {\n  const { graph } = useGraph();\n  const temporaryConnection = ref(null);\n  const hoveringOver = ref(null);\n  const onMouseMove = (ev) => {\n    if (temporaryConnection.value) {\n      temporaryConnection.value.mx = ev.offsetX / graph.value.scaling - graph.value.panning.x;\n      temporaryConnection.value.my = ev.offsetY / graph.value.scaling - graph.value.panning.y;\n    }\n  };\n  const onMouseDown = () => {\n    if (hoveringOver.value) {\n      const connection = graph.value.connections.find((c) => c.to === hoveringOver.value);\n      if (hoveringOver.value.isInput && connection) {\n        temporaryConnection.value = {\n          status: TemporaryConnectionState.NONE,\n          from: connection.from\n        };\n        graph.value.removeConnection(connection);\n      } else {\n        temporaryConnection.value = {\n          status: TemporaryConnectionState.NONE,\n          from: hoveringOver.value\n        };\n      }\n      temporaryConnection.value.mx = void 0;\n      temporaryConnection.value.my = void 0;\n    }\n  };\n  const onMouseUp = () => {\n    if (temporaryConnection.value && hoveringOver.value) {\n      graph.value.addConnection(temporaryConnection.value.from, temporaryConnection.value.to);\n    }\n    temporaryConnection.value = null;\n  };\n  const hoveredOver = (ni) => {\n    hoveringOver.value = ni ?? null;\n    if (ni && temporaryConnection.value) {\n      temporaryConnection.value.to = ni;\n      const checkConnectionResult = graph.value.checkConnection(\n        temporaryConnection.value.from,\n        temporaryConnection.value.to\n      );\n      temporaryConnection.value.status = checkConnectionResult.connectionAllowed ? TemporaryConnectionState.ALLOWED : TemporaryConnectionState.FORBIDDEN;\n      if (checkConnectionResult.connectionAllowed) {\n        const ids = checkConnectionResult.connectionsInDanger.map((c) => c.id);\n        graph.value.connections.forEach((c) => {\n          if (ids.includes(c.id)) {\n            c.isInDanger = true;\n          }\n        });\n      }\n    } else if (!ni && temporaryConnection.value) {\n      temporaryConnection.value.to = void 0;\n      temporaryConnection.value.status = TemporaryConnectionState.NONE;\n      graph.value.connections.forEach((c) => {\n        c.isInDanger = false;\n      });\n    }\n  };\n  provide(\"hoveredOver\", hoveredOver);\n  return { temporaryConnection, onMouseMove, onMouseDown, onMouseUp };\n}\nconst _sfc_main$u = defineComponent({\n  setup() {\n    const { viewModel } = useViewModel();\n    const { graph } = useGraph();\n    const styles = computed(() => {\n      const config = viewModel.value.settings.background;\n      const positionLeft = graph.value.panning.x * graph.value.scaling;\n      const positionTop = graph.value.panning.y * graph.value.scaling;\n      const size = graph.value.scaling * config.gridSize;\n      const subSize = size / config.gridDivision;\n      const backgroundSize = `${size}px ${size}px, ${size}px ${size}px`;\n      const subGridBackgroundSize = graph.value.scaling > config.subGridVisibleThreshold ? `, ${subSize}px ${subSize}px, ${subSize}px ${subSize}px` : \"\";\n      return {\n        backgroundPosition: `left ${positionLeft}px top ${positionTop}px`,\n        backgroundSize: `${backgroundSize} ${subGridBackgroundSize}`\n      };\n    });\n    return { styles };\n  }\n});\nconst _export_sfc = (sfc, props) => {\n  const target = sfc.__vccOpts || sfc;\n  for (const [key, val] of props) {\n    target[key] = val;\n  }\n  return target;\n};\nfunction _sfc_render$t(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", {\n    class: \"background\",\n    style: normalizeStyle(_ctx.styles)\n  }, null, 4);\n}\nconst Background = /* @__PURE__ */ _export_sfc(_sfc_main$u, [[\"render\", _sfc_render$t]]);\nvar _a;\nconst isClient = typeof window !== \"undefined\";\nconst isString = (val) => typeof val === \"string\";\nconst noop = () => {\n};\nisClient && ((_a = window == null ? void 0 : window.navigator) == null ? void 0 : _a.userAgent) && /iP(ad|hone|od)/.test(window.navigator.userAgent);\nfunction resolveUnref(r) {\n  return typeof r === \"function\" ? r() : unref(r);\n}\nfunction identity(arg) {\n  return arg;\n}\nfunction objectPick(obj, keys2, omitUndefined = false) {\n  return keys2.reduce((n, k) => {\n    if (k in obj) {\n      if (!omitUndefined || obj[k] !== void 0)\n        n[k] = obj[k];\n    }\n    return n;\n  }, {});\n}\nfunction tryOnScopeDispose(fn) {\n  if (getCurrentScope()) {\n    onScopeDispose(fn);\n    return true;\n  }\n  return false;\n}\nvar __defProp$7 = Object.defineProperty;\nvar __defProps$5 = Object.defineProperties;\nvar __getOwnPropDescs$5 = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols$9 = Object.getOwnPropertySymbols;\nvar __hasOwnProp$9 = Object.prototype.hasOwnProperty;\nvar __propIsEnum$9 = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp$7 = (obj, key, value) => key in obj ? __defProp$7(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues$7 = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp$9.call(b, prop))\n      __defNormalProp$7(a, prop, b[prop]);\n  if (__getOwnPropSymbols$9)\n    for (var prop of __getOwnPropSymbols$9(b)) {\n      if (__propIsEnum$9.call(b, prop))\n        __defNormalProp$7(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps$5 = (a, b) => __defProps$5(a, __getOwnPropDescs$5(b));\nfunction toRefs(objectRef) {\n  if (!isRef(objectRef))\n    return toRefs$1(objectRef);\n  const result = Array.isArray(objectRef.value) ? new Array(objectRef.value.length) : {};\n  for (const key in objectRef.value) {\n    result[key] = customRef(() => ({\n      get() {\n        return objectRef.value[key];\n      },\n      set(v) {\n        if (Array.isArray(objectRef.value)) {\n          const copy = [...objectRef.value];\n          copy[key] = v;\n          objectRef.value = copy;\n        } else {\n          const newObject = __spreadProps$5(__spreadValues$7({}, objectRef.value), { [key]: v });\n          Object.setPrototypeOf(newObject, objectRef.value);\n          objectRef.value = newObject;\n        }\n      }\n    }));\n  }\n  return result;\n}\nfunction unrefElement(elRef) {\n  var _a2;\n  const plain = resolveUnref(elRef);\n  return (_a2 = plain == null ? void 0 : plain.$el) != null ? _a2 : plain;\n}\nconst defaultWindow = isClient ? window : void 0;\nisClient ? window.document : void 0;\nisClient ? window.navigator : void 0;\nisClient ? window.location : void 0;\nfunction useEventListener(...args) {\n  let target;\n  let events;\n  let listeners;\n  let options;\n  if (isString(args[0]) || Array.isArray(args[0])) {\n    [events, listeners, options] = args;\n    target = defaultWindow;\n  } else {\n    [target, events, listeners, options] = args;\n  }\n  if (!target)\n    return noop;\n  if (!Array.isArray(events))\n    events = [events];\n  if (!Array.isArray(listeners))\n    listeners = [listeners];\n  const cleanups = [];\n  const cleanup = () => {\n    cleanups.forEach((fn) => fn());\n    cleanups.length = 0;\n  };\n  const register = (el, event, listener) => {\n    el.addEventListener(event, listener, options);\n    return () => el.removeEventListener(event, listener, options);\n  };\n  const stopWatch = watch(() => unrefElement(target), (el) => {\n    cleanup();\n    if (!el)\n      return;\n    cleanups.push(...events.flatMap((event) => {\n      return listeners.map((listener) => register(el, event, listener));\n    }));\n  }, { immediate: true, flush: \"post\" });\n  const stop = () => {\n    stopWatch();\n    cleanup();\n  };\n  tryOnScopeDispose(stop);\n  return stop;\n}\nfunction onClickOutside(target, handler, options = {}) {\n  const { window: window2 = defaultWindow, ignore = [], capture = true, detectIframe = false } = options;\n  if (!window2)\n    return;\n  let shouldListen = true;\n  let fallback;\n  const shouldIgnore = (event) => {\n    return ignore.some((target2) => {\n      if (typeof target2 === \"string\") {\n        return Array.from(window2.document.querySelectorAll(target2)).some((el) => el === event.target || event.composedPath().includes(el));\n      } else {\n        const el = unrefElement(target2);\n        return el && (event.target === el || event.composedPath().includes(el));\n      }\n    });\n  };\n  const listener = (event) => {\n    window2.clearTimeout(fallback);\n    const el = unrefElement(target);\n    if (!el || el === event.target || event.composedPath().includes(el))\n      return;\n    if (event.detail === 0)\n      shouldListen = !shouldIgnore(event);\n    if (!shouldListen) {\n      shouldListen = true;\n      return;\n    }\n    handler(event);\n  };\n  const cleanup = [\n    useEventListener(window2, \"click\", listener, { passive: true, capture }),\n    useEventListener(window2, \"pointerdown\", (e) => {\n      const el = unrefElement(target);\n      if (el)\n        shouldListen = !e.composedPath().includes(el) && !shouldIgnore(e);\n    }, { passive: true }),\n    useEventListener(window2, \"pointerup\", (e) => {\n      if (e.button === 0) {\n        const path = e.composedPath();\n        e.composedPath = () => path;\n        fallback = window2.setTimeout(() => listener(e), 50);\n      }\n    }, { passive: true }),\n    detectIframe && useEventListener(window2, \"blur\", (event) => {\n      var _a2;\n      const el = unrefElement(target);\n      if (((_a2 = window2.document.activeElement) == null ? void 0 : _a2.tagName) === \"IFRAME\" && !(el == null ? void 0 : el.contains(window2.document.activeElement)))\n        handler(event);\n    })\n  ].filter(Boolean);\n  const stop = () => cleanup.forEach((fn) => fn());\n  return stop;\n}\nconst _global = typeof globalThis !== \"undefined\" ? globalThis : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : {};\nconst globalKey = \"__vueuse_ssr_handlers__\";\n_global[globalKey] = _global[globalKey] || {};\n_global[globalKey];\nvar __defProp$5 = Object.defineProperty;\nvar __defProps$1 = Object.defineProperties;\nvar __getOwnPropDescs$1 = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols$5 = Object.getOwnPropertySymbols;\nvar __hasOwnProp$5 = Object.prototype.hasOwnProperty;\nvar __propIsEnum$5 = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp$5 = (obj, key, value) => key in obj ? __defProp$5(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues$5 = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp$5.call(b, prop))\n      __defNormalProp$5(a, prop, b[prop]);\n  if (__getOwnPropSymbols$5)\n    for (var prop of __getOwnPropSymbols$5(b)) {\n      if (__propIsEnum$5.call(b, prop))\n        __defNormalProp$5(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps$1 = (a, b) => __defProps$1(a, __getOwnPropDescs$1(b));\nconst defaultState = {\n  x: 0,\n  y: 0,\n  pointerId: 0,\n  pressure: 0,\n  tiltX: 0,\n  tiltY: 0,\n  width: 0,\n  height: 0,\n  twist: 0,\n  pointerType: null\n};\nconst keys = /* @__PURE__ */ Object.keys(defaultState);\nfunction usePointer(options = {}) {\n  const {\n    target = defaultWindow\n  } = options;\n  const isInside = ref(false);\n  const state = ref(options.initialValue || {});\n  Object.assign(state.value, defaultState, state.value);\n  const handler = (event) => {\n    isInside.value = true;\n    if (options.pointerTypes && !options.pointerTypes.includes(event.pointerType))\n      return;\n    state.value = objectPick(event, keys, false);\n  };\n  if (target) {\n    useEventListener(target, \"pointerdown\", handler, { passive: true });\n    useEventListener(target, \"pointermove\", handler, { passive: true });\n    useEventListener(target, \"pointerleave\", () => isInside.value = false, { passive: true });\n  }\n  return __spreadProps$1(__spreadValues$5({}, toRefs(state)), {\n    isInside\n  });\n}\nvar SwipeDirection;\n(function(SwipeDirection2) {\n  SwipeDirection2[\"UP\"] = \"UP\";\n  SwipeDirection2[\"RIGHT\"] = \"RIGHT\";\n  SwipeDirection2[\"DOWN\"] = \"DOWN\";\n  SwipeDirection2[\"LEFT\"] = \"LEFT\";\n  SwipeDirection2[\"NONE\"] = \"NONE\";\n})(SwipeDirection || (SwipeDirection = {}));\nvar __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nconst _TransitionPresets = {\n  easeInSine: [0.12, 0, 0.39, 0],\n  easeOutSine: [0.61, 1, 0.88, 1],\n  easeInOutSine: [0.37, 0, 0.63, 1],\n  easeInQuad: [0.11, 0, 0.5, 0],\n  easeOutQuad: [0.5, 1, 0.89, 1],\n  easeInOutQuad: [0.45, 0, 0.55, 1],\n  easeInCubic: [0.32, 0, 0.67, 0],\n  easeOutCubic: [0.33, 1, 0.68, 1],\n  easeInOutCubic: [0.65, 0, 0.35, 1],\n  easeInQuart: [0.5, 0, 0.75, 0],\n  easeOutQuart: [0.25, 1, 0.5, 1],\n  easeInOutQuart: [0.76, 0, 0.24, 1],\n  easeInQuint: [0.64, 0, 0.78, 0],\n  easeOutQuint: [0.22, 1, 0.36, 1],\n  easeInOutQuint: [0.83, 0, 0.17, 1],\n  easeInExpo: [0.7, 0, 0.84, 0],\n  easeOutExpo: [0.16, 1, 0.3, 1],\n  easeInOutExpo: [0.87, 0, 0.13, 1],\n  easeInCirc: [0.55, 0, 1, 0.45],\n  easeOutCirc: [0, 0.55, 0.45, 1],\n  easeInOutCirc: [0.85, 0, 0.15, 1],\n  easeInBack: [0.36, 0, 0.66, -0.56],\n  easeOutBack: [0.34, 1.56, 0.64, 1],\n  easeInOutBack: [0.68, -0.6, 0.32, 1.6]\n};\n__spreadValues({\n  linear: identity\n}, _TransitionPresets);\nconst _sfc_main$t = defineComponent({\n  props: {\n    modelValue: {\n      type: Boolean,\n      default: false\n    },\n    items: {\n      type: Array,\n      required: true\n    },\n    x: {\n      type: Number,\n      default: 0\n    },\n    y: {\n      type: Number,\n      default: 0\n    },\n    isNested: {\n      type: Boolean,\n      default: false\n    },\n    isFlipped: {\n      type: Object,\n      default: () => ({ x: false, y: false })\n    },\n    flippable: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: [\"click\", \"update:modelValue\"],\n  setup(props, { emit }) {\n    let activeMenuResetTimeout = null;\n    const el = ref(null);\n    const activeMenu = ref(-1);\n    const height = ref(0);\n    const rootIsFlipped = ref({ x: false, y: false });\n    const flippedX = computed(() => props.flippable && (rootIsFlipped.value.x || props.isFlipped.x));\n    const flippedY = computed(() => props.flippable && (rootIsFlipped.value.y || props.isFlipped.y));\n    const styles = computed(() => {\n      const s = {};\n      if (!props.isNested) {\n        s.top = (flippedY.value ? props.y - height.value : props.y) + \"px\";\n        s.left = props.x + \"px\";\n      }\n      return s;\n    });\n    const classes = computed(() => {\n      return {\n        \"--flipped-x\": flippedX.value,\n        \"--flipped-y\": flippedY.value,\n        \"--nested\": props.isNested\n      };\n    });\n    const itemsWithHoverProperty = computed(() => props.items.map((i) => ({ ...i, hover: false })));\n    watch([() => props.y, () => props.items], () => {\n      var _a2, _b, _c, _d;\n      height.value = props.items.length * 30;\n      const parentWidth = ((_b = (_a2 = el.value) == null ? void 0 : _a2.parentElement) == null ? void 0 : _b.offsetWidth) ?? 0;\n      const parentHeight = ((_d = (_c = el.value) == null ? void 0 : _c.parentElement) == null ? void 0 : _d.offsetHeight) ?? 0;\n      rootIsFlipped.value.x = !props.isNested && props.x > parentWidth * 0.75;\n      rootIsFlipped.value.y = !props.isNested && props.y + height.value > parentHeight - 20;\n    });\n    onClickOutside(el, () => {\n      if (props.modelValue) {\n        emit(\"update:modelValue\", false);\n      }\n    });\n    const onClick = (item) => {\n      if (!item.submenu && item.value) {\n        emit(\"click\", item.value);\n        emit(\"update:modelValue\", false);\n      }\n    };\n    const onChildClick = (value) => {\n      emit(\"click\", value);\n      activeMenu.value = -1;\n      if (!props.isNested) {\n        emit(\"update:modelValue\", false);\n      }\n    };\n    const onMouseEnter = (event, index) => {\n      if (props.items[index].submenu) {\n        activeMenu.value = index;\n        if (activeMenuResetTimeout !== null) {\n          clearTimeout(activeMenuResetTimeout);\n          activeMenuResetTimeout = null;\n        }\n      }\n    };\n    const onMouseLeave = (event, index) => {\n      if (props.items[index].submenu) {\n        activeMenuResetTimeout = window.setTimeout(() => {\n          activeMenu.value = -1;\n          activeMenuResetTimeout = null;\n        }, 200);\n      }\n    };\n    return {\n      el,\n      activeMenu,\n      flippedX,\n      flippedY,\n      styles,\n      classes,\n      itemsWithHoverProperty,\n      onClick,\n      onChildClick,\n      onClickOutside,\n      onMouseEnter,\n      onMouseLeave\n    };\n  }\n});\nconst _hoisted_1$p = [\"onMouseenter\", \"onMouseleave\", \"onClick\"];\nconst _hoisted_2$j = { class: \"flex-fill\" };\nconst _hoisted_3$f = {\n  key: 0,\n  class: \"__submenu-icon\",\n  style: { \"line-height\": \"1em\" }\n};\nconst _hoisted_4$d = /* @__PURE__ */ createElementVNode(\"svg\", {\n  width: \"13\",\n  height: \"13\",\n  viewBox: \"-60 120 250 250\"\n}, [\n  /* @__PURE__ */ createElementVNode(\"path\", {\n    d: \"M160.875 279.5625 L70.875 369.5625 L70.875 189.5625 L160.875 279.5625 Z\",\n    stroke: \"none\",\n    fill: \"white\"\n  })\n], -1);\nconst _hoisted_5$7 = [\n  _hoisted_4$d\n];\nfunction _sfc_render$s(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_context_menu = resolveComponent(\"context-menu\", true);\n  return openBlock(), createBlock(Transition, { name: \"slide-fade\" }, {\n    default: withCtx(() => [\n      withDirectives(createElementVNode(\"div\", {\n        ref: \"el\",\n        class: normalizeClass([\"baklava-context-menu\", _ctx.classes]),\n        style: normalizeStyle(_ctx.styles)\n      }, [\n        (openBlock(true), createElementBlock(Fragment, null, renderList(_ctx.itemsWithHoverProperty, (item, index) => {\n          return openBlock(), createElementBlock(Fragment, null, [\n            item.isDivider ? (openBlock(), createElementBlock(\"div\", {\n              key: `d-${index}`,\n              class: \"divider\"\n            })) : (openBlock(), createElementBlock(\"div\", {\n              key: `i-${index}`,\n              class: normalizeClass([\"item\", { \"submenu\": !!item.submenu, \"--disabled\": !!item.disabled }]),\n              onMouseenter: ($event) => _ctx.onMouseEnter($event, index),\n              onMouseleave: ($event) => _ctx.onMouseLeave($event, index),\n              onClick: withModifiers(($event) => _ctx.onClick(item), [\"stop\", \"prevent\"])\n            }, [\n              createElementVNode(\"div\", _hoisted_2$j, toDisplayString(item.label), 1),\n              item.submenu ? (openBlock(), createElementBlock(\"div\", _hoisted_3$f, _hoisted_5$7)) : createCommentVNode(\"\", true),\n              item.submenu ? (openBlock(), createBlock(_component_context_menu, {\n                key: 1,\n                value: _ctx.activeMenu === index,\n                items: item.submenu,\n                \"is-nested\": true,\n                \"is-flipped\": { x: _ctx.flippedX, y: _ctx.flippedY },\n                flippable: _ctx.flippable,\n                onClick: _ctx.onChildClick\n              }, null, 8, [\"value\", \"items\", \"is-flipped\", \"flippable\", \"onClick\"])) : createCommentVNode(\"\", true)\n            ], 42, _hoisted_1$p))\n          ], 64);\n        }), 256))\n      ], 6), [\n        [vShow, _ctx.modelValue]\n      ])\n    ]),\n    _: 1\n  });\n}\nconst ContextMenu = /* @__PURE__ */ _export_sfc(_sfc_main$t, [[\"render\", _sfc_render$s]]);\nconst _sfc_main$s = {};\nconst _hoisted_1$o = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  class: \"baklava-icon\",\n  width: \"16\",\n  height: \"16\",\n  viewBox: \"0 0 24 24\",\n  \"stroke-width\": \"2\",\n  stroke: \"currentColor\",\n  fill: \"none\",\n  \"stroke-linecap\": \"round\",\n  \"stroke-linejoin\": \"round\"\n};\nconst _hoisted_2$i = /* @__PURE__ */ createElementVNode(\"path\", {\n  stroke: \"none\",\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n}, null, -1);\nconst _hoisted_3$e = /* @__PURE__ */ createElementVNode(\"circle\", {\n  cx: \"12\",\n  cy: \"12\",\n  r: \"1\"\n}, null, -1);\nconst _hoisted_4$c = /* @__PURE__ */ createElementVNode(\"circle\", {\n  cx: \"12\",\n  cy: \"19\",\n  r: \"1\"\n}, null, -1);\nconst _hoisted_5$6 = /* @__PURE__ */ createElementVNode(\"circle\", {\n  cx: \"12\",\n  cy: \"5\",\n  r: \"1\"\n}, null, -1);\nconst _hoisted_6$4 = [\n  _hoisted_2$i,\n  _hoisted_3$e,\n  _hoisted_4$c,\n  _hoisted_5$6\n];\nfunction _sfc_render$r(_ctx, _cache) {\n  return openBlock(), createElementBlock(\"svg\", _hoisted_1$o, _hoisted_6$4);\n}\nconst VerticalDots = /* @__PURE__ */ _export_sfc(_sfc_main$s, [[\"render\", _sfc_render$r]]);\nconst _sfc_main$r = defineComponent({\n  props: {\n    node: {\n      type: Object,\n      required: true\n    },\n    intf: {\n      type: Object,\n      required: true\n    }\n  },\n  setup(props) {\n    const { viewModel } = useViewModel();\n    const hoveredOver = inject(\"hoveredOver\");\n    const el = ref(null);\n    const isConnected = computed(() => props.intf.connectionCount > 0);\n    const classes = computed(() => ({\n      \"--input\": props.intf.isInput,\n      \"--output\": !props.intf.isInput,\n      \"--connected\": isConnected.value\n    }));\n    const showComponent = computed(\n      () => props.intf.component && props.intf.connectionCount === 0 && (props.intf.isInput || !props.intf.port)\n    );\n    const startHover = () => {\n      hoveredOver(props.intf);\n    };\n    const endHover = () => {\n      hoveredOver(void 0);\n    };\n    const onRender = () => {\n      if (el.value) {\n        viewModel.value.hooks.renderInterface.execute({ intf: props.intf, el: el.value });\n      }\n    };\n    const openSidebar = () => {\n      const sidebar = viewModel.value.displayedGraph.sidebar;\n      sidebar.nodeId = props.node.id;\n      sidebar.optionName = props.intf.name;\n      sidebar.visible = true;\n    };\n    onMounted(onRender);\n    onUpdated(onRender);\n    return { el, isConnected, classes, showComponent, startHover, endHover, openSidebar };\n  }\n});\nconst _hoisted_1$n = [\"id\"];\nconst _hoisted_2$h = {\n  key: 2,\n  class: \"align-middle\"\n};\nfunction _sfc_render$q(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", {\n    id: _ctx.intf.id,\n    ref: \"el\",\n    class: normalizeClass([\"baklava-node-interface\", _ctx.classes])\n  }, [\n    _ctx.intf.port ? (openBlock(), createElementBlock(\"div\", {\n      key: 0,\n      class: \"__port\",\n      onPointerover: _cache[0] || (_cache[0] = (...args) => _ctx.startHover && _ctx.startHover(...args)),\n      onPointerout: _cache[1] || (_cache[1] = (...args) => _ctx.endHover && _ctx.endHover(...args))\n    }, null, 32)) : createCommentVNode(\"\", true),\n    _ctx.showComponent ? (openBlock(), createBlock(resolveDynamicComponent(_ctx.intf.component), {\n      key: 1,\n      modelValue: _ctx.intf.value,\n      \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => _ctx.intf.value = $event),\n      node: _ctx.node,\n      intf: _ctx.intf,\n      onOpenSidebar: _ctx.openSidebar\n    }, null, 40, [\"modelValue\", \"node\", \"intf\", \"onOpenSidebar\"])) : (openBlock(), createElementBlock(\"span\", _hoisted_2$h, toDisplayString(_ctx.intf.name), 1))\n  ], 10, _hoisted_1$n);\n}\nconst NodeInterface = /* @__PURE__ */ _export_sfc(_sfc_main$r, [[\"render\", _sfc_render$q]]);\nconst _hoisted_1$m = [\"id\", \"data-node-type\"];\nconst _hoisted_2$g = [\"onPointerdown\"];\nconst _hoisted_3$d = { class: \"__title-label\" };\nconst _hoisted_4$b = { class: \"__menu\" };\nconst _hoisted_5$5 = [\"onKeydown\"];\nconst _hoisted_6$3 = { class: \"__content\" };\nconst _hoisted_7$1 = { class: \"__outputs\" };\nconst _hoisted_8$1 = { class: \"__inputs\" };\nconst _sfc_main$q = /* @__PURE__ */ defineComponent({\n  __name: \"Node\",\n  props: {\n    node: null,\n    selected: { type: Boolean, default: false }\n  },\n  emits: [\"select\"],\n  setup(__props, { emit }) {\n    const props = __props;\n    const { viewModel } = useViewModel();\n    const { graph, switchGraph } = useGraph();\n    const dragMove = useDragMove(toRef(props.node, \"position\"));\n    const el = ref(null);\n    const renaming = ref(false);\n    const tempName = ref(\"\");\n    const renameInputEl = ref(null);\n    const showContextMenu = ref(false);\n    const contextMenuItems = computed(() => {\n      const items = [\n        { value: \"rename\", label: \"Rename\" },\n        { value: \"delete\", label: \"Delete\" }\n      ];\n      if (props.node.type.startsWith(GRAPH_NODE_TYPE_PREFIX)) {\n        items.push({ value: \"editSubgraph\", label: \"Edit Subgraph\" });\n      }\n      return items;\n    });\n    const classes = computed(() => ({\n      \"--selected\": props.selected,\n      \"--dragging\": dragMove.dragging.value,\n      \"--two-column\": !!props.node.twoColumn\n    }));\n    const styles = computed(() => {\n      var _a2, _b;\n      return {\n        top: `${((_a2 = props.node.position) == null ? void 0 : _a2.y) ?? 0}px`,\n        left: `${((_b = props.node.position) == null ? void 0 : _b.x) ?? 0}px`,\n        width: `${props.node.width ?? 200}px`\n      };\n    });\n    const displayedInputs = computed(() => Object.values(props.node.inputs).filter((ni) => !ni.hidden));\n    const displayedOutputs = computed(() => Object.values(props.node.outputs).filter((ni) => !ni.hidden));\n    const select = () => {\n      emit(\"select\");\n    };\n    const startDrag = (ev) => {\n      dragMove.onPointerDown(ev);\n      document.addEventListener(\"pointermove\", dragMove.onPointerMove);\n      document.addEventListener(\"pointerup\", stopDrag);\n      select();\n    };\n    const stopDrag = () => {\n      dragMove.onPointerUp();\n      document.removeEventListener(\"pointermove\", dragMove.onPointerMove);\n      document.removeEventListener(\"pointerup\", stopDrag);\n    };\n    const openContextMenu = () => {\n      showContextMenu.value = true;\n    };\n    const onContextMenuClick = async (action) => {\n      var _a2;\n      switch (action) {\n        case \"delete\":\n          graph.value.removeNode(props.node);\n          break;\n        case \"rename\":\n          tempName.value = props.node.title;\n          renaming.value = true;\n          await nextTick();\n          (_a2 = renameInputEl.value) == null ? void 0 : _a2.focus();\n          break;\n        case \"editSubgraph\":\n          switchGraph(props.node.template);\n          break;\n      }\n    };\n    const doneRenaming = () => {\n      props.node.title = tempName.value;\n      renaming.value = false;\n    };\n    const onRender = () => {\n      if (el.value) {\n        viewModel.value.hooks.renderNode.execute({ node: props.node, el: el.value });\n      }\n    };\n    onMounted(onRender);\n    onUpdated(onRender);\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", {\n        id: __props.node.id,\n        ref_key: \"el\",\n        ref: el,\n        class: normalizeClass([\"baklava-node\", unref(classes)]),\n        style: normalizeStyle(unref(styles)),\n        \"data-node-type\": __props.node.type,\n        onPointerdown: select\n      }, [\n        createElementVNode(\"div\", {\n          class: \"__title\",\n          onPointerdown: withModifiers(startDrag, [\"self\", \"stop\"])\n        }, [\n          !renaming.value ? (openBlock(), createElementBlock(Fragment, { key: 0 }, [\n            createElementVNode(\"div\", _hoisted_3$d, toDisplayString(__props.node.title), 1),\n            createElementVNode(\"div\", _hoisted_4$b, [\n              createVNode(VerticalDots, {\n                class: \"--clickable\",\n                onClick: openContextMenu\n              }),\n              createVNode(ContextMenu, {\n                modelValue: showContextMenu.value,\n                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => showContextMenu.value = $event),\n                x: 0,\n                y: 0,\n                items: unref(contextMenuItems),\n                onClick: onContextMenuClick\n              }, null, 8, [\"modelValue\", \"items\"])\n            ])\n          ], 64)) : withDirectives((openBlock(), createElementBlock(\"input\", {\n            key: 1,\n            ref_key: \"renameInputEl\",\n            ref: renameInputEl,\n            \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => tempName.value = $event),\n            type: \"text\",\n            class: \"baklava-input\",\n            placeholder: \"Node Name\",\n            onBlur: doneRenaming,\n            onKeydown: withKeys(doneRenaming, [\"enter\"])\n          }, null, 40, _hoisted_5$5)), [\n            [vModelText, tempName.value]\n          ])\n        ], 40, _hoisted_2$g),\n        createElementVNode(\"div\", _hoisted_6$3, [\n          createElementVNode(\"div\", _hoisted_7$1, [\n            (openBlock(true), createElementBlock(Fragment, null, renderList(unref(displayedOutputs), (output) => {\n              return openBlock(), createBlock(NodeInterface, {\n                key: output.id,\n                node: __props.node,\n                intf: output\n              }, null, 8, [\"node\", \"intf\"]);\n            }), 128))\n          ]),\n          createElementVNode(\"div\", _hoisted_8$1, [\n            (openBlock(true), createElementBlock(Fragment, null, renderList(unref(displayedInputs), (input) => {\n              return openBlock(), createBlock(NodeInterface, {\n                key: input.id,\n                node: __props.node,\n                intf: input\n              }, null, 8, [\"node\", \"intf\"]);\n            }), 128))\n          ])\n        ])\n      ], 46, _hoisted_1$m);\n    };\n  }\n});\nconst _sfc_main$p = defineComponent({\n  props: {\n    x1: {\n      type: Number,\n      required: true\n    },\n    y1: {\n      type: Number,\n      required: true\n    },\n    x2: {\n      type: Number,\n      required: true\n    },\n    y2: {\n      type: Number,\n      required: true\n    },\n    state: {\n      type: Number,\n      default: TemporaryConnectionState.NONE\n    },\n    isTemporary: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup(props) {\n    const { viewModel } = useViewModel();\n    const { graph } = useGraph();\n    const transform = (x, y) => {\n      const tx = (x + graph.value.panning.x) * graph.value.scaling;\n      const ty = (y + graph.value.panning.y) * graph.value.scaling;\n      return [tx, ty];\n    };\n    const d = computed(() => {\n      const [tx1, ty1] = transform(props.x1, props.y1);\n      const [tx2, ty2] = transform(props.x2, props.y2);\n      if (viewModel.value.settings.useStraightConnections) {\n        return `M ${tx1} ${ty1} L ${tx2} ${ty2}`;\n      } else {\n        const dx = 0.3 * Math.abs(tx1 - tx2);\n        return `M ${tx1} ${ty1} C ${tx1 + dx} ${ty1}, ${tx2 - dx} ${ty2}, ${tx2} ${ty2}`;\n      }\n    });\n    const classes = computed(() => ({\n      \"--temporary\": props.isTemporary,\n      \"--allowed\": props.state === TemporaryConnectionState.ALLOWED,\n      \"--forbidden\": props.state === TemporaryConnectionState.FORBIDDEN\n    }));\n    return { d, classes };\n  }\n});\nconst _hoisted_1$l = [\"d\"];\nfunction _sfc_render$p(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"path\", {\n    class: normalizeClass([\"baklava-connection\", _ctx.classes]),\n    d: _ctx.d\n  }, null, 10, _hoisted_1$l);\n}\nconst ConnectionView = /* @__PURE__ */ _export_sfc(_sfc_main$p, [[\"render\", _sfc_render$p]]);\nfunction getDomElementOfNode(node) {\n  return document.getElementById(node.id);\n}\nfunction getDomElements(ni) {\n  const interfaceDOM = document.getElementById(ni.id);\n  const portDOM = interfaceDOM == null ? void 0 : interfaceDOM.getElementsByClassName(\"__port\");\n  return {\n    node: (interfaceDOM == null ? void 0 : interfaceDOM.closest(\".baklava-node\")) ?? null,\n    interface: interfaceDOM,\n    port: portDOM && portDOM.length > 0 ? portDOM[0] : null\n  };\n}\nconst _sfc_main$o = defineComponent({\n  components: {\n    \"connection-view\": ConnectionView\n  },\n  props: {\n    connection: {\n      type: Object,\n      required: true\n    }\n  },\n  setup(props) {\n    const { graph } = useGraph();\n    let resizeObserver;\n    const d = ref({ x1: 0, y1: 0, x2: 0, y2: 0 });\n    const state = computed(\n      () => props.connection.isInDanger ? TemporaryConnectionState.FORBIDDEN : TemporaryConnectionState.NONE\n    );\n    const fromNodePosition = computed(() => {\n      var _a2;\n      return (_a2 = graph.value.findNodeById(props.connection.from.nodeId)) == null ? void 0 : _a2.position;\n    });\n    const toNodePosition = computed(() => {\n      var _a2;\n      return (_a2 = graph.value.findNodeById(props.connection.to.nodeId)) == null ? void 0 : _a2.position;\n    });\n    const getPortCoordinates2 = (resolved) => {\n      if (resolved.node && resolved.interface && resolved.port) {\n        return [\n          resolved.node.offsetLeft + resolved.interface.offsetLeft + resolved.port.offsetLeft + resolved.port.clientWidth / 2,\n          resolved.node.offsetTop + resolved.interface.offsetTop + resolved.port.offsetTop + resolved.port.clientHeight / 2\n        ];\n      } else {\n        return [0, 0];\n      }\n    };\n    const updateCoords = () => {\n      const from = getDomElements(props.connection.from);\n      const to = getDomElements(props.connection.to);\n      if (from.node && to.node) {\n        if (!resizeObserver) {\n          resizeObserver = new ResizeObserver(() => {\n            updateCoords();\n          });\n          resizeObserver.observe(from.node);\n          resizeObserver.observe(to.node);\n        }\n      }\n      const [x1, y1] = getPortCoordinates2(from);\n      const [x2, y2] = getPortCoordinates2(to);\n      d.value = { x1, y1, x2, y2 };\n    };\n    onMounted(async () => {\n      await nextTick();\n      updateCoords();\n    });\n    onBeforeUnmount(() => {\n      if (resizeObserver) {\n        resizeObserver.disconnect();\n      }\n    });\n    watch([fromNodePosition, toNodePosition], () => updateCoords(), { deep: true });\n    return { d, state };\n  }\n});\nfunction _sfc_render$o(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_connection_view = resolveComponent(\"connection-view\");\n  return openBlock(), createBlock(_component_connection_view, {\n    x1: _ctx.d.x1,\n    y1: _ctx.d.y1,\n    x2: _ctx.d.x2,\n    y2: _ctx.d.y2,\n    state: _ctx.state\n  }, null, 8, [\"x1\", \"y1\", \"x2\", \"y2\", \"state\"]);\n}\nconst ConnectionWrapper = /* @__PURE__ */ _export_sfc(_sfc_main$o, [[\"render\", _sfc_render$o]]);\nfunction getPortCoordinates(resolved) {\n  if (resolved.node && resolved.interface && resolved.port) {\n    return [\n      resolved.node.offsetLeft + resolved.interface.offsetLeft + resolved.port.offsetLeft + resolved.port.clientWidth / 2,\n      resolved.node.offsetTop + resolved.interface.offsetTop + resolved.port.offsetTop + resolved.port.clientHeight / 2\n    ];\n  } else {\n    return [0, 0];\n  }\n}\nconst _sfc_main$n = defineComponent({\n  components: {\n    \"connection-view\": ConnectionView\n  },\n  props: {\n    connection: {\n      type: Object,\n      required: true\n    }\n  },\n  setup(props) {\n    const status = computed(() => props.connection ? props.connection.status : TemporaryConnectionState.NONE);\n    const d = computed(() => {\n      if (!props.connection) {\n        return {\n          input: [0, 0],\n          output: [0, 0]\n        };\n      }\n      const start = getPortCoordinates(getDomElements(props.connection.from));\n      const end = props.connection.to ? getPortCoordinates(getDomElements(props.connection.to)) : [props.connection.mx || start[0], props.connection.my || start[1]];\n      if (props.connection.from.isInput) {\n        return {\n          input: end,\n          output: start\n        };\n      } else {\n        return {\n          input: start,\n          output: end\n        };\n      }\n    });\n    return { d, status };\n  }\n});\nfunction _sfc_render$n(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_connection_view = resolveComponent(\"connection-view\");\n  return openBlock(), createBlock(_component_connection_view, {\n    x1: _ctx.d.input[0],\n    y1: _ctx.d.input[1],\n    x2: _ctx.d.output[0],\n    y2: _ctx.d.output[1],\n    state: _ctx.status,\n    \"is-temporary\": \"\"\n  }, null, 8, [\"x1\", \"y1\", \"x2\", \"y2\", \"state\"]);\n}\nconst TemporaryConnection = /* @__PURE__ */ _export_sfc(_sfc_main$n, [[\"render\", _sfc_render$n]]);\nconst _sfc_main$m = defineComponent({\n  setup() {\n    const { graph } = useGraph();\n    const el = ref(null);\n    const width = ref(300);\n    const node = computed(() => {\n      const id = graph.value.sidebar.nodeId;\n      return graph.value.nodes.find((x) => x.id === id);\n    });\n    const styles = computed(() => ({\n      width: `${width.value}px`\n    }));\n    const displayedInterfaces = computed(() => {\n      if (!node.value) {\n        return [];\n      }\n      const allIntfs = [...Object.values(node.value.inputs), ...Object.values(node.value.outputs)];\n      return allIntfs.filter((intf) => intf.displayInSidebar && intf.component);\n    });\n    const close = () => {\n      graph.value.sidebar.visible = false;\n    };\n    const startResize = () => {\n      window.addEventListener(\"mousemove\", onMouseMove);\n      window.addEventListener(\n        \"mouseup\",\n        () => {\n          window.removeEventListener(\"mousemove\", onMouseMove);\n        },\n        { once: true }\n      );\n    };\n    const onMouseMove = (event) => {\n      var _a2, _b;\n      const maxwidth = ((_b = (_a2 = el.value) == null ? void 0 : _a2.parentElement) == null ? void 0 : _b.getBoundingClientRect().width) ?? 500;\n      width.value -= event.movementX;\n      if (width.value < 300) {\n        width.value = 300;\n      } else if (width.value > 0.9 * maxwidth) {\n        width.value = 0.9 * maxwidth;\n      }\n    };\n    return { el, graph, node, styles, displayedInterfaces, startResize, close };\n  }\n});\nconst _hoisted_1$k = { class: \"__header\" };\nconst _hoisted_2$f = { class: \"__node-name\" };\nfunction _sfc_render$m(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", {\n    ref: \"el\",\n    class: normalizeClass([\"baklava-sidebar\", { \"--open\": _ctx.graph.sidebar.visible }]),\n    style: normalizeStyle(_ctx.styles)\n  }, [\n    createElementVNode(\"div\", {\n      class: \"__resizer\",\n      onMousedown: _cache[0] || (_cache[0] = (...args) => _ctx.startResize && _ctx.startResize(...args))\n    }, null, 32),\n    createElementVNode(\"div\", _hoisted_1$k, [\n      createElementVNode(\"button\", {\n        tabindex: \"-1\",\n        class: \"__close\",\n        onClick: _cache[1] || (_cache[1] = (...args) => _ctx.close && _ctx.close(...args))\n      }, \" × \"),\n      createElementVNode(\"div\", _hoisted_2$f, [\n        createElementVNode(\"b\", null, toDisplayString(_ctx.node ? _ctx.node.title : \"\"), 1)\n      ])\n    ]),\n    (openBlock(true), createElementBlock(Fragment, null, renderList(_ctx.displayedInterfaces, (intf) => {\n      return openBlock(), createElementBlock(\"div\", {\n        key: intf.id,\n        class: \"__interface\"\n      }, [\n        (openBlock(), createBlock(resolveDynamicComponent(intf.component), {\n          modelValue: intf.value,\n          \"onUpdate:modelValue\": ($event) => intf.value = $event,\n          node: _ctx.node,\n          intf\n        }, null, 8, [\"modelValue\", \"onUpdate:modelValue\", \"node\", \"intf\"]))\n      ]);\n    }), 128))\n  ], 6);\n}\nconst Sidebar = /* @__PURE__ */ _export_sfc(_sfc_main$m, [[\"render\", _sfc_render$m]]);\nconst _sfc_main$l = defineComponent({\n  setup() {\n    const { viewModel } = useViewModel();\n    const { graph } = useGraph();\n    const canvas = ref(null);\n    const showViewBounds = ref(false);\n    let ctx;\n    let dragging = false;\n    let bounds = { x1: 0, y1: 0, x2: 0, y2: 0 };\n    const updateCanvas = () => {\n      var _a2, _b;\n      if (!ctx) {\n        return;\n      }\n      const nodeCoords = /* @__PURE__ */ new Map();\n      const nodeDomElements = /* @__PURE__ */ new Map();\n      for (const n of graph.value.nodes) {\n        const domElement = getDomElementOfNode(n);\n        const width = (domElement == null ? void 0 : domElement.clientWidth) ?? 0;\n        const height = (domElement == null ? void 0 : domElement.clientHeight) ?? 0;\n        const posX = ((_a2 = n.position) == null ? void 0 : _a2.x) ?? 0;\n        const posY = ((_b = n.position) == null ? void 0 : _b.y) ?? 0;\n        nodeCoords.set(n, {\n          x1: posX,\n          y1: posY,\n          x2: posX + width,\n          y2: posY + height\n        });\n        nodeDomElements.set(n, domElement);\n      }\n      const newBounds = {\n        x1: Number.MAX_SAFE_INTEGER,\n        y1: Number.MAX_SAFE_INTEGER,\n        x2: Number.MIN_SAFE_INTEGER,\n        y2: Number.MIN_SAFE_INTEGER\n      };\n      for (const nc of nodeCoords.values()) {\n        if (nc.x1 < newBounds.x1) {\n          newBounds.x1 = nc.x1;\n        }\n        if (nc.y1 < newBounds.y1) {\n          newBounds.y1 = nc.y1;\n        }\n        if (nc.x2 > newBounds.x2) {\n          newBounds.x2 = nc.x2;\n        }\n        if (nc.y2 > newBounds.y2) {\n          newBounds.y2 = nc.y2;\n        }\n      }\n      const padding = 50;\n      newBounds.x1 -= padding;\n      newBounds.y1 -= padding;\n      newBounds.x2 += padding;\n      newBounds.y2 += padding;\n      bounds = newBounds;\n      ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n      ctx.strokeStyle = \"white\";\n      for (const c of graph.value.connections) {\n        const [origX1, origY1] = getPortCoordinates(getDomElements(c.from));\n        const [origX2, origY2] = getPortCoordinates(getDomElements(c.to));\n        const [x1, y1] = transformCoordinates(origX1, origY1);\n        const [x2, y2] = transformCoordinates(origX2, origY2);\n        ctx.beginPath();\n        ctx.moveTo(x1, y1);\n        if (viewModel.value.settings.useStraightConnections) {\n          ctx.lineTo(x2, y2);\n        } else {\n          const dx = 0.3 * Math.abs(x1 - x2);\n          ctx.bezierCurveTo(x1 + dx, y1, x2 - dx, y2, x2, y2);\n        }\n        ctx.stroke();\n      }\n      ctx.strokeStyle = \"lightgray\";\n      for (const [n, nc] of nodeCoords.entries()) {\n        const [x1, y1] = transformCoordinates(nc.x1, nc.y1);\n        const [x2, y2] = transformCoordinates(nc.x2, nc.y2);\n        ctx.fillStyle = getNodeColor(nodeDomElements.get(n));\n        ctx.beginPath();\n        ctx.rect(x1, y1, x2 - x1, y2 - y1);\n        ctx.fill();\n        ctx.stroke();\n      }\n      if (showViewBounds.value) {\n        const viewBounds = getViewBounds();\n        const [x1, y1] = transformCoordinates(viewBounds.x1, viewBounds.y1);\n        const [x2, y2] = transformCoordinates(viewBounds.x2, viewBounds.y2);\n        ctx.fillStyle = \"rgba(255, 255, 255, 0.2)\";\n        ctx.fillRect(x1, y1, x2 - x1, y2 - y1);\n      }\n    };\n    const transformCoordinates = (origX, origY) => {\n      return [\n        (origX - bounds.x1) / (bounds.x2 - bounds.x1) * ctx.canvas.clientWidth,\n        (origY - bounds.y1) / (bounds.y2 - bounds.y1) * ctx.canvas.clientHeight\n      ];\n    };\n    const reverseTransform = (thisX, thisY) => {\n      return [\n        thisX * (bounds.x2 - bounds.x1) / ctx.canvas.clientWidth + bounds.x1,\n        thisY * (bounds.y2 - bounds.y1) / ctx.canvas.clientHeight + bounds.y1\n      ];\n    };\n    const getNodeColor = (domElement) => {\n      if (domElement) {\n        const content = domElement.querySelector(\".__content\");\n        if (content) {\n          const contentColor = getComputedColor(content);\n          if (contentColor) {\n            return contentColor;\n          }\n        }\n        const nodeColor = getComputedColor(domElement);\n        if (nodeColor) {\n          return nodeColor;\n        }\n      }\n      return \"gray\";\n    };\n    const getComputedColor = (domElement) => {\n      const c = getComputedStyle(domElement).backgroundColor;\n      if (c && c !== \"rgba(0, 0, 0, 0)\") {\n        return c;\n      }\n    };\n    const getViewBounds = () => {\n      const parentWidth = canvas.value.parentElement.offsetWidth;\n      const parentHeight = canvas.value.parentElement.offsetHeight;\n      const x2 = parentWidth / graph.value.scaling - graph.value.panning.x;\n      const y2 = parentHeight / graph.value.scaling - graph.value.panning.y;\n      return { x1: -graph.value.panning.x, y1: -graph.value.panning.y, x2, y2 };\n    };\n    const mousedown = (ev) => {\n      if (ev.button === 0) {\n        dragging = true;\n        mousemove(ev);\n      }\n    };\n    const mousemove = (ev) => {\n      if (dragging) {\n        const [cx, cy] = reverseTransform(ev.offsetX, ev.offsetY);\n        const viewBounds = getViewBounds();\n        const dx = (viewBounds.x1 - viewBounds.x2) / 2;\n        const dy = (viewBounds.y1 - viewBounds.y2) / 2;\n        graph.value.panning.x = -(cx + dx);\n        graph.value.panning.y = -(cy + dy);\n      }\n    };\n    const mouseup = () => {\n      dragging = false;\n    };\n    const mouseenter = () => {\n      showViewBounds.value = true;\n    };\n    const mouseleave = () => {\n      showViewBounds.value = false;\n      mouseup();\n    };\n    onMounted(() => {\n      ctx = canvas.value.getContext(\"2d\");\n      ctx.imageSmoothingQuality = \"high\";\n      updateCanvas();\n    });\n    return { canvas, showViewBounds, mousedown, mousemove, mouseup, mouseenter, mouseleave };\n  }\n});\nfunction _sfc_render$l(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"canvas\", {\n    ref: \"canvas\",\n    class: \"baklava-minimap\",\n    onMouseenter: _cache[0] || (_cache[0] = (...args) => _ctx.mouseenter && _ctx.mouseenter(...args)),\n    onMouseleave: _cache[1] || (_cache[1] = (...args) => _ctx.mouseleave && _ctx.mouseleave(...args)),\n    onMousedown: _cache[2] || (_cache[2] = withModifiers((...args) => _ctx.mousedown && _ctx.mousedown(...args), [\"self\"])),\n    onMousemove: _cache[3] || (_cache[3] = withModifiers((...args) => _ctx.mousemove && _ctx.mousemove(...args), [\"self\"])),\n    onMouseup: _cache[4] || (_cache[4] = (...args) => _ctx.mouseup && _ctx.mouseup(...args))\n  }, null, 544);\n}\nconst Minimap = /* @__PURE__ */ _export_sfc(_sfc_main$l, [[\"render\", _sfc_render$l]]);\nconst _sfc_main$k = defineComponent({\n  components: { ContextMenu, VerticalDots },\n  props: {\n    type: {\n      type: String,\n      required: true\n    },\n    title: {\n      type: String,\n      required: true\n    }\n  },\n  setup(props) {\n    const { viewModel } = useViewModel();\n    const { switchGraph } = useGraph();\n    const showContextMenu = ref(false);\n    const hasContextMenu = computed(() => props.type.startsWith(GRAPH_NODE_TYPE_PREFIX));\n    const contextMenuItems = [\n      { label: \"Edit Subgraph\", value: \"editSubgraph\" },\n      { label: \"Delete Subgraph\", value: \"deleteSubgraph\" }\n    ];\n    const openContextMenu = () => {\n      showContextMenu.value = true;\n    };\n    const onContextMenuClick = (action) => {\n      const graphTemplateId = props.type.substring(GRAPH_NODE_TYPE_PREFIX.length);\n      const graphTemplate = viewModel.value.editor.graphTemplates.find((gt) => gt.id === graphTemplateId);\n      if (!graphTemplate) {\n        return;\n      }\n      switch (action) {\n        case \"editSubgraph\":\n          switchGraph(graphTemplate);\n          break;\n        case \"deleteSubgraph\":\n          viewModel.value.editor.removeGraphTemplate(graphTemplate);\n          break;\n      }\n    };\n    return { showContextMenu, hasContextMenu, contextMenuItems, openContextMenu, onContextMenuClick };\n  }\n});\nconst _hoisted_1$j = [\"data-node-type\"];\nconst _hoisted_2$e = { class: \"__title\" };\nconst _hoisted_3$c = { class: \"__title-label\" };\nconst _hoisted_4$a = {\n  key: 0,\n  class: \"__menu\"\n};\nfunction _sfc_render$k(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_vertical_dots = resolveComponent(\"vertical-dots\");\n  const _component_context_menu = resolveComponent(\"context-menu\");\n  return openBlock(), createElementBlock(\"div\", {\n    class: \"baklava-node --palette\",\n    \"data-node-type\": _ctx.type\n  }, [\n    createElementVNode(\"div\", _hoisted_2$e, [\n      createElementVNode(\"div\", _hoisted_3$c, toDisplayString(_ctx.title), 1),\n      _ctx.hasContextMenu ? (openBlock(), createElementBlock(\"div\", _hoisted_4$a, [\n        createVNode(_component_vertical_dots, {\n          class: \"--clickable\",\n          onPointerdown: _cache[0] || (_cache[0] = withModifiers(() => {\n          }, [\"stop\", \"prevent\"])),\n          onClick: withModifiers(_ctx.openContextMenu, [\"stop\", \"prevent\"])\n        }, null, 8, [\"onClick\"]),\n        createVNode(_component_context_menu, {\n          modelValue: _ctx.showContextMenu,\n          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => _ctx.showContextMenu = $event),\n          x: -100,\n          y: 0,\n          items: _ctx.contextMenuItems,\n          onClick: _ctx.onContextMenuClick,\n          onPointerdown: _cache[2] || (_cache[2] = withModifiers(() => {\n          }, [\"stop\", \"prevent\"]))\n        }, null, 8, [\"modelValue\", \"items\", \"onClick\"])\n      ])) : createCommentVNode(\"\", true)\n    ])\n  ], 8, _hoisted_1$j);\n}\nconst PaletteEntry = /* @__PURE__ */ _export_sfc(_sfc_main$k, [[\"render\", _sfc_render$k]]);\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nfunction rng() {\n  if (!getRandomValues) {\n    getRandomValues = typeof crypto !== \"undefined\" && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n    if (!getRandomValues) {\n      throw new Error(\"crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported\");\n    }\n  }\n  return getRandomValues(rnds8);\n}\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 256).toString(16).slice(1));\n}\nfunction unsafeStringify(arr, offset = 0) {\n  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + \"-\" + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + \"-\" + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + \"-\" + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + \"-\" + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();\n}\nconst randomUUID = typeof crypto !== \"undefined\" && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nconst native = {\n  randomUUID\n};\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)();\n  rnds[6] = rnds[6] & 15 | 64;\n  rnds[8] = rnds[8] & 63 | 128;\n  if (buf) {\n    offset = offset || 0;\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n    return buf;\n  }\n  return unsafeStringify(rnds);\n}\nconst _sfc_main$j = defineComponent({\n  props: {\n    intf: {\n      type: Object,\n      required: true\n    }\n  },\n  setup(props) {\n    const onClick = () => {\n      if (props.intf.callback) {\n        props.intf.callback();\n      }\n    };\n    return { onClick };\n  }\n});\nconst _hoisted_1$i = [\"title\"];\nfunction _sfc_render$j(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"button\", {\n    class: \"baklava-button --block\",\n    title: _ctx.intf.name,\n    onClick: _cache[0] || (_cache[0] = (...args) => _ctx.onClick && _ctx.onClick(...args))\n  }, toDisplayString(_ctx.intf.name), 9, _hoisted_1$i);\n}\nconst ButtonInterfaceComponent = /* @__PURE__ */ _export_sfc(_sfc_main$j, [[\"render\", _sfc_render$j]]);\nclass ButtonInterface extends NodeInterface$1 {\n  constructor(name, callback) {\n    super(name, void 0);\n    this.component = markRaw(ButtonInterfaceComponent);\n    this.callback = callback;\n    this.setPort(false);\n  }\n}\nconst _sfc_main$i = defineComponent({\n  props: {\n    intf: {\n      type: Object,\n      required: true\n    }\n  }\n});\nconst _hoisted_1$h = [\"title\"];\nconst _hoisted_2$d = /* @__PURE__ */ createElementVNode(\"div\", { class: \"__checkmark-container\" }, [\n  /* @__PURE__ */ createElementVNode(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"18\",\n    height: \"18\",\n    viewBox: \"0 0 18 18\"\n  }, [\n    /* @__PURE__ */ createElementVNode(\"path\", {\n      class: \"__checkmark\",\n      d: \"M 6 5 L 6 10 L 16 10\",\n      transform: \"rotate(-45 10 10)\"\n    })\n  ])\n], -1);\nconst _hoisted_3$b = { class: \"__label\" };\nfunction _sfc_render$i(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", {\n    class: normalizeClass([\"baklava-checkbox\", { \"--checked\": _ctx.intf.value }]),\n    title: _ctx.intf.name,\n    onClick: _cache[0] || (_cache[0] = ($event) => _ctx.intf.value = !_ctx.intf.value)\n  }, [\n    _hoisted_2$d,\n    createElementVNode(\"div\", _hoisted_3$b, toDisplayString(_ctx.intf.name), 1)\n  ], 10, _hoisted_1$h);\n}\nconst CheckboxInterfaceComponent = /* @__PURE__ */ _export_sfc(_sfc_main$i, [[\"render\", _sfc_render$i]]);\nclass CheckboxInterface extends NodeInterface$1 {\n  constructor() {\n    super(...arguments);\n    this.component = markRaw(CheckboxInterfaceComponent);\n  }\n}\nconst MAX_STRING_LENGTH = 9;\nfunction isValidator(intf) {\n  return \"validate\" in intf;\n}\nclass BaseNumericInterface extends NodeInterface$1 {\n  constructor(name, value, min, max) {\n    super(name, value);\n    this.min = min;\n    this.max = max;\n  }\n  validate(v) {\n    return (!this.min || v >= this.min) && (!this.max || v <= this.max);\n  }\n}\nconst useBaseNumericInterface = (intf, precision = 3) => {\n  const inputEl = ref(null);\n  const editMode = ref(false);\n  const invalid = ref(false);\n  const tempValue = ref(\"0\");\n  const stringRepresentation = computed(() => {\n    const s = intf.value.value.toFixed(precision);\n    return s.length > MAX_STRING_LENGTH ? intf.value.value.toExponential(MAX_STRING_LENGTH - 5) : s;\n  });\n  const validate = (v) => {\n    if (Number.isNaN(v)) {\n      return false;\n    } else if (isValidator(intf.value)) {\n      return intf.value.validate(v);\n    } else {\n      return true;\n    }\n  };\n  const setValue = (newValue) => {\n    if (validate(newValue)) {\n      intf.value.value = newValue;\n    }\n  };\n  watch(tempValue, () => {\n    invalid.value = false;\n  });\n  const enterEditMode = async () => {\n    tempValue.value = intf.value.value.toFixed(precision);\n    editMode.value = true;\n    await nextTick();\n    if (inputEl.value) {\n      inputEl.value.focus();\n    }\n  };\n  const leaveEditMode = () => {\n    const v = parseFloat(tempValue.value);\n    if (!validate(v)) {\n      invalid.value = true;\n    } else {\n      setValue(v);\n      editMode.value = false;\n    }\n  };\n  return {\n    editMode,\n    invalid,\n    tempValue,\n    inputEl,\n    stringRepresentation,\n    validate,\n    setValue,\n    enterEditMode,\n    leaveEditMode\n  };\n};\nconst _sfc_main$h = {};\nconst _hoisted_1$g = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  class: \"baklava-icon\",\n  width: \"24\",\n  height: \"24\",\n  viewBox: \"0 0 24 24\",\n  \"stroke-width\": \"2\",\n  stroke: \"currentColor\",\n  fill: \"none\",\n  \"stroke-linecap\": \"round\",\n  \"stroke-linejoin\": \"round\"\n};\nconst _hoisted_2$c = /* @__PURE__ */ createElementVNode(\"polyline\", { points: \"6 9 12 15 18 9\" }, null, -1);\nconst _hoisted_3$a = [\n  _hoisted_2$c\n];\nfunction _sfc_render$h(_ctx, _cache) {\n  return openBlock(), createElementBlock(\"svg\", _hoisted_1$g, _hoisted_3$a);\n}\nconst Arrow = /* @__PURE__ */ _export_sfc(_sfc_main$h, [[\"render\", _sfc_render$h]]);\nconst _sfc_main$g = defineComponent({\n  components: {\n    \"i-arrow\": Arrow\n  },\n  props: {\n    intf: {\n      type: Object,\n      required: true\n    }\n  },\n  setup(props) {\n    const baseNumericInterface = useBaseNumericInterface(toRef(props, \"intf\"), 0);\n    const increment = () => {\n      baseNumericInterface.setValue(props.intf.value + 1);\n    };\n    const decrement = () => {\n      baseNumericInterface.setValue(props.intf.value - 1);\n    };\n    return { ...baseNumericInterface, increment, decrement };\n  }\n});\nconst _hoisted_1$f = { class: \"baklava-num-input\" };\nconst _hoisted_2$b = [\"title\"];\nconst _hoisted_3$9 = { class: \"__value\" };\nconst _hoisted_4$9 = {\n  key: 1,\n  class: \"__content\"\n};\nfunction _sfc_render$g(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_i_arrow = resolveComponent(\"i-arrow\");\n  return openBlock(), createElementBlock(\"div\", _hoisted_1$f, [\n    createElementVNode(\"div\", {\n      class: \"__button --dec\",\n      onClick: _cache[0] || (_cache[0] = (...args) => _ctx.decrement && _ctx.decrement(...args))\n    }, [\n      createVNode(_component_i_arrow)\n    ]),\n    !_ctx.editMode ? (openBlock(), createElementBlock(\"div\", {\n      key: 0,\n      class: \"__content\",\n      onClick: _cache[1] || (_cache[1] = (...args) => _ctx.enterEditMode && _ctx.enterEditMode(...args))\n    }, [\n      createElementVNode(\"div\", {\n        class: \"__label\",\n        title: _ctx.intf.name\n      }, toDisplayString(_ctx.intf.name), 9, _hoisted_2$b),\n      createElementVNode(\"div\", _hoisted_3$9, toDisplayString(_ctx.stringRepresentation), 1)\n    ])) : (openBlock(), createElementBlock(\"div\", _hoisted_4$9, [\n      withDirectives(createElementVNode(\"input\", {\n        ref: \"inputEl\",\n        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => _ctx.tempValue = $event),\n        type: \"number\",\n        class: normalizeClass([\"baklava-input\", { \"--invalid\": _ctx.invalid }]),\n        style: { \"text-align\": \"right\" },\n        onBlur: _cache[3] || (_cache[3] = (...args) => _ctx.leaveEditMode && _ctx.leaveEditMode(...args)),\n        onKeydown: _cache[4] || (_cache[4] = withKeys((...args) => _ctx.leaveEditMode && _ctx.leaveEditMode(...args), [\"enter\"]))\n      }, null, 34), [\n        [vModelText, _ctx.tempValue]\n      ])\n    ])),\n    createElementVNode(\"div\", {\n      class: \"__button --inc\",\n      onClick: _cache[5] || (_cache[5] = (...args) => _ctx.increment && _ctx.increment(...args))\n    }, [\n      createVNode(_component_i_arrow)\n    ])\n  ]);\n}\nconst IntegerInterfaceComponent = /* @__PURE__ */ _export_sfc(_sfc_main$g, [[\"render\", _sfc_render$g]]);\nclass IntegerInterface extends BaseNumericInterface {\n  constructor() {\n    super(...arguments);\n    this.component = markRaw(IntegerInterfaceComponent);\n  }\n  validate(v) {\n    return Number.isInteger(v) && super.validate(v);\n  }\n}\nconst _sfc_main$f = defineComponent({\n  components: {\n    \"i-arrow\": Arrow\n  },\n  props: {\n    intf: {\n      type: Object,\n      required: true\n    }\n  },\n  setup(props) {\n    const baseNumericInterface = useBaseNumericInterface(toRef(props, \"intf\"));\n    const increment = () => {\n      baseNumericInterface.setValue(props.intf.value + 0.1);\n    };\n    const decrement = () => {\n      baseNumericInterface.setValue(props.intf.value - 0.1);\n    };\n    return { ...baseNumericInterface, increment, decrement };\n  }\n});\nconst _hoisted_1$e = { class: \"baklava-num-input\" };\nconst _hoisted_2$a = [\"title\"];\nconst _hoisted_3$8 = { class: \"__value\" };\nconst _hoisted_4$8 = {\n  key: 1,\n  class: \"__content\"\n};\nfunction _sfc_render$f(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_i_arrow = resolveComponent(\"i-arrow\");\n  return openBlock(), createElementBlock(\"div\", _hoisted_1$e, [\n    createElementVNode(\"div\", {\n      class: \"__button --dec\",\n      onClick: _cache[0] || (_cache[0] = (...args) => _ctx.decrement && _ctx.decrement(...args))\n    }, [\n      createVNode(_component_i_arrow)\n    ]),\n    !_ctx.editMode ? (openBlock(), createElementBlock(\"div\", {\n      key: 0,\n      class: \"__content\",\n      onClick: _cache[1] || (_cache[1] = (...args) => _ctx.enterEditMode && _ctx.enterEditMode(...args))\n    }, [\n      createElementVNode(\"div\", {\n        class: \"__label\",\n        title: _ctx.intf.name\n      }, toDisplayString(_ctx.intf.name), 9, _hoisted_2$a),\n      createElementVNode(\"div\", _hoisted_3$8, toDisplayString(_ctx.stringRepresentation), 1)\n    ])) : (openBlock(), createElementBlock(\"div\", _hoisted_4$8, [\n      withDirectives(createElementVNode(\"input\", {\n        ref: \"inputEl\",\n        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => _ctx.tempValue = $event),\n        type: \"number\",\n        class: normalizeClass([\"baklava-input\", { \"--invalid\": _ctx.invalid }]),\n        style: { \"text-align\": \"right\" },\n        onBlur: _cache[3] || (_cache[3] = (...args) => _ctx.leaveEditMode && _ctx.leaveEditMode(...args)),\n        onKeydown: _cache[4] || (_cache[4] = withKeys((...args) => _ctx.leaveEditMode && _ctx.leaveEditMode(...args), [\"enter\"]))\n      }, null, 34), [\n        [vModelText, _ctx.tempValue]\n      ])\n    ])),\n    createElementVNode(\"div\", {\n      class: \"__button --inc\",\n      onClick: _cache[5] || (_cache[5] = (...args) => _ctx.increment && _ctx.increment(...args))\n    }, [\n      createVNode(_component_i_arrow)\n    ])\n  ]);\n}\nconst NumberInterfaceComponent = /* @__PURE__ */ _export_sfc(_sfc_main$f, [[\"render\", _sfc_render$f]]);\nclass NumberInterface extends BaseNumericInterface {\n  constructor() {\n    super(...arguments);\n    this.component = markRaw(NumberInterfaceComponent);\n  }\n}\nconst _sfc_main$e = defineComponent({\n  components: {\n    \"i-arrow\": Arrow\n  },\n  props: {\n    intf: {\n      type: Object,\n      required: true\n    }\n  },\n  setup(props) {\n    const el = ref(null);\n    const open = ref(false);\n    const selectedItem = computed(\n      () => props.intf.items.find(\n        (v) => typeof v === \"string\" ? v === props.intf.value : v.value === props.intf.value\n      )\n    );\n    const selectedText = computed(() => {\n      if (selectedItem.value) {\n        return typeof selectedItem.value === \"string\" ? selectedItem.value : selectedItem.value.text;\n      } else {\n        return \"\";\n      }\n    });\n    const setSelected = (item) => {\n      props.intf.value = typeof item === \"string\" ? item : item.value;\n    };\n    onClickOutside(el, () => {\n      open.value = false;\n    });\n    return { el, open, selectedItem, selectedText, setSelected };\n  }\n});\nconst _hoisted_1$d = [\"title\"];\nconst _hoisted_2$9 = { class: \"__selected\" };\nconst _hoisted_3$7 = { class: \"__text\" };\nconst _hoisted_4$7 = { class: \"__icon\" };\nconst _hoisted_5$4 = { class: \"__dropdown\" };\nconst _hoisted_6$2 = { class: \"item --header\" };\nconst _hoisted_7 = [\"onClick\"];\nfunction _sfc_render$e(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_i_arrow = resolveComponent(\"i-arrow\");\n  return openBlock(), createElementBlock(\"div\", {\n    ref: \"el\",\n    class: normalizeClass([\"baklava-select\", { \"--open\": _ctx.open }]),\n    title: _ctx.intf.name,\n    onClick: _cache[0] || (_cache[0] = ($event) => _ctx.open = !_ctx.open)\n  }, [\n    createElementVNode(\"div\", _hoisted_2$9, [\n      createElementVNode(\"div\", _hoisted_3$7, toDisplayString(_ctx.selectedText), 1),\n      createElementVNode(\"div\", _hoisted_4$7, [\n        createVNode(_component_i_arrow)\n      ])\n    ]),\n    createVNode(Transition, { name: \"slide-fade\" }, {\n      default: withCtx(() => [\n        withDirectives(createElementVNode(\"div\", _hoisted_5$4, [\n          createElementVNode(\"div\", _hoisted_6$2, toDisplayString(_ctx.intf.name), 1),\n          (openBlock(true), createElementBlock(Fragment, null, renderList(_ctx.intf.items, (item, i) => {\n            return openBlock(), createElementBlock(\"div\", {\n              key: i,\n              class: normalizeClass([\"item\", { \"--active\": item === _ctx.selectedItem }]),\n              onClick: ($event) => _ctx.setSelected(item)\n            }, toDisplayString(typeof item === \"string\" ? item : item.text), 11, _hoisted_7);\n          }), 128))\n        ], 512), [\n          [vShow, _ctx.open]\n        ])\n      ]),\n      _: 1\n    })\n  ], 10, _hoisted_1$d);\n}\nconst SelectInterfaceComponent = /* @__PURE__ */ _export_sfc(_sfc_main$e, [[\"render\", _sfc_render$e]]);\nclass SelectInterface extends NodeInterface$1 {\n  constructor(name, value, items) {\n    super(name, value);\n    this.component = markRaw(SelectInterfaceComponent);\n    this.items = items;\n  }\n}\nconst _sfc_main$d = defineComponent({\n  props: {\n    intf: {\n      type: Object,\n      required: true\n    }\n  },\n  setup(props) {\n    const el = ref(null);\n    const baseNumericInterface = useBaseNumericInterface(toRef(props, \"intf\"));\n    const didSlide = ref(false);\n    const isMouseDown = ref(false);\n    const percentage = computed(\n      () => Math.min(100, Math.max(0, props.intf.value * 100 / (props.intf.max - props.intf.min)))\n    );\n    const mousedown = () => {\n      if (baseNumericInterface.editMode.value) {\n        return;\n      }\n      isMouseDown.value = true;\n    };\n    const mouseup = () => {\n      if (baseNumericInterface.editMode.value) {\n        return;\n      }\n      if (!didSlide.value) {\n        void baseNumericInterface.enterEditMode();\n      }\n      isMouseDown.value = false;\n      didSlide.value = false;\n    };\n    const mouseleave = (ev) => {\n      if (baseNumericInterface.editMode.value) {\n        return;\n      }\n      if (isMouseDown.value) {\n        if (ev.offsetX >= el.value.clientWidth) {\n          baseNumericInterface.setValue(props.intf.max);\n        } else if (ev.offsetX <= 0) {\n          baseNumericInterface.setValue(props.intf.min);\n        }\n      }\n      isMouseDown.value = false;\n      didSlide.value = false;\n    };\n    const mousemove = (ev) => {\n      if (baseNumericInterface.editMode.value) {\n        return;\n      }\n      const v = Math.max(\n        props.intf.min,\n        Math.min(\n          props.intf.max,\n          (props.intf.max - props.intf.min) * (ev.offsetX / el.value.clientWidth) + props.intf.min\n        )\n      );\n      if (isMouseDown.value) {\n        baseNumericInterface.setValue(v);\n        didSlide.value = true;\n      }\n    };\n    return { ...baseNumericInterface, el, percentage, mousedown, mouseup, mousemove, mouseleave };\n  }\n});\nconst _hoisted_1$c = {\n  key: 0,\n  class: \"__content\"\n};\nconst _hoisted_2$8 = { class: \"__label\" };\nconst _hoisted_3$6 = { class: \"__value\" };\nconst _hoisted_4$6 = {\n  key: 1,\n  class: \"__content\"\n};\nfunction _sfc_render$d(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", {\n    ref: \"el\",\n    class: normalizeClass([\"baklava-slider\", { \"baklava-ignore-mouse\": !_ctx.editMode }]),\n    onPointerdown: _cache[3] || (_cache[3] = (...args) => _ctx.mousedown && _ctx.mousedown(...args)),\n    onPointerup: _cache[4] || (_cache[4] = (...args) => _ctx.mouseup && _ctx.mouseup(...args)),\n    onPointermove: _cache[5] || (_cache[5] = (...args) => _ctx.mousemove && _ctx.mousemove(...args)),\n    onPointerleave: _cache[6] || (_cache[6] = (...args) => _ctx.mouseleave && _ctx.mouseleave(...args))\n  }, [\n    createElementVNode(\"div\", {\n      class: \"__slider\",\n      style: normalizeStyle({ width: _ctx.percentage + \"%\" })\n    }, null, 4),\n    !_ctx.editMode ? (openBlock(), createElementBlock(\"div\", _hoisted_1$c, [\n      createElementVNode(\"div\", _hoisted_2$8, toDisplayString(_ctx.intf.name), 1),\n      createElementVNode(\"div\", _hoisted_3$6, toDisplayString(_ctx.stringRepresentation), 1)\n    ])) : (openBlock(), createElementBlock(\"div\", _hoisted_4$6, [\n      withDirectives(createElementVNode(\"input\", {\n        ref: \"inputEl\",\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => _ctx.tempValue = $event),\n        type: \"number\",\n        class: normalizeClass([\"baklava-input\", { \"--invalid\": _ctx.invalid }]),\n        style: { \"text-align\": \"right\" },\n        onBlur: _cache[1] || (_cache[1] = (...args) => _ctx.leaveEditMode && _ctx.leaveEditMode(...args)),\n        onKeydown: _cache[2] || (_cache[2] = withKeys((...args) => _ctx.leaveEditMode && _ctx.leaveEditMode(...args), [\"enter\"]))\n      }, null, 34), [\n        [vModelText, _ctx.tempValue]\n      ])\n    ]))\n  ], 34);\n}\nconst SliderInterfaceComponent = /* @__PURE__ */ _export_sfc(_sfc_main$d, [[\"render\", _sfc_render$d]]);\nclass SliderInterface extends BaseNumericInterface {\n  constructor(name, value, min, max) {\n    super(name, value, min, max);\n    this.component = markRaw(SliderInterfaceComponent);\n    this.min = min;\n    this.max = max;\n  }\n}\nconst _sfc_main$c = defineComponent({\n  props: {\n    intf: {\n      type: Object,\n      required: true\n    }\n  }\n});\nfunction _sfc_render$c(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", null, toDisplayString(_ctx.intf.value), 1);\n}\nconst TextInterfaceComponent = /* @__PURE__ */ _export_sfc(_sfc_main$c, [[\"render\", _sfc_render$c]]);\nclass TextInterface extends NodeInterface$1 {\n  constructor(name, value) {\n    super(name, value);\n    this.component = markRaw(TextInterfaceComponent);\n    this.setPort(false);\n  }\n}\nconst _sfc_main$b = defineComponent({\n  props: {\n    intf: {\n      type: Object,\n      required: true\n    },\n    modelValue: {\n      type: String,\n      required: true\n    }\n  },\n  emits: [\"update:modelValue\"],\n  setup(props, { emit }) {\n    const v = computed({\n      get: () => props.modelValue,\n      set: (v2) => {\n        emit(\"update:modelValue\", v2);\n      }\n    });\n    return { v };\n  }\n});\nconst _hoisted_1$b = [\"placeholder\", \"title\"];\nfunction _sfc_render$b(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", null, [\n    withDirectives(createElementVNode(\"input\", {\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => _ctx.v = $event),\n      type: \"text\",\n      class: \"baklava-input\",\n      placeholder: _ctx.intf.name,\n      title: _ctx.intf.name\n    }, null, 8, _hoisted_1$b), [\n      [vModelText, _ctx.v]\n    ])\n  ]);\n}\nconst TextInputInterfaceComponent = /* @__PURE__ */ _export_sfc(_sfc_main$b, [[\"render\", _sfc_render$b]]);\nclass TextInputInterface extends NodeInterface$1 {\n  constructor() {\n    super(...arguments);\n    this.component = markRaw(TextInputInterfaceComponent);\n  }\n}\nconst SUBGRAPH_INPUT_NODE_TYPE = \"__baklava_SubgraphInputNode\";\nconst SUBGRAPH_OUTPUT_NODE_TYPE = \"__baklava_SubgraphOutputNode\";\nconst SubgraphInputNode = defineNode({\n  type: SUBGRAPH_INPUT_NODE_TYPE,\n  title: \"Subgraph Input\",\n  inputs: {\n    name: () => new TextInputInterface(\"Name\", \"Input\").setPort(false)\n  },\n  outputs: {\n    placeholder: () => new NodeInterface$1(\"Connection\", void 0)\n  },\n  onCreate() {\n    this.graphInterfaceId = v4();\n  }\n});\nconst SubgraphOutputNode = defineNode({\n  type: SUBGRAPH_OUTPUT_NODE_TYPE,\n  title: \"Subgraph Output\",\n  inputs: {\n    name: () => new TextInputInterface(\"Name\", \"Output\").setPort(false),\n    placeholder: () => new NodeInterface$1(\"Connection\", void 0)\n  },\n  onCreate() {\n    this.graphInterfaceId = v4();\n  }\n});\nfunction checkRecursion(editor, currentGraph, graphNodeType) {\n  if (!currentGraph.template) {\n    return false;\n  }\n  if (getGraphNodeTypeString(currentGraph.template) === graphNodeType) {\n    return true;\n  }\n  const template = editor.graphTemplates.find((t) => getGraphNodeTypeString(t) === graphNodeType);\n  if (!template) {\n    return false;\n  }\n  const containedGraphNodes = template.nodes.filter((n) => n.type.startsWith(GRAPH_NODE_TYPE_PREFIX));\n  return containedGraphNodes.some((n) => checkRecursion(editor, currentGraph, n.type));\n}\nconst _sfc_main$a = defineComponent({\n  components: { PaletteEntry },\n  setup() {\n    const { viewModel } = useViewModel();\n    const { x: mouseX, y: mouseY } = usePointer();\n    const { transform } = useTransform();\n    const editorEl = inject(\"editorEl\");\n    const draggedNode = ref(null);\n    const categories = computed(() => {\n      const nodeTypeEntries = Array.from(viewModel.value.editor.nodeTypes.entries());\n      const categoryNames = new Set(nodeTypeEntries.map(([, ni]) => ni.category));\n      const categories2 = [];\n      for (const c of categoryNames.values()) {\n        let nodeTypesInCategory = nodeTypeEntries.filter(([, ni]) => ni.category === c);\n        if (viewModel.value.displayedGraph.template) {\n          nodeTypesInCategory = nodeTypesInCategory.filter(\n            ([nt]) => !checkRecursion(viewModel.value.editor, viewModel.value.displayedGraph, nt)\n          );\n        } else {\n          nodeTypesInCategory = nodeTypesInCategory.filter(\n            ([nt]) => ![SUBGRAPH_INPUT_NODE_TYPE, SUBGRAPH_OUTPUT_NODE_TYPE].includes(nt)\n          );\n        }\n        if (nodeTypesInCategory.length > 0) {\n          categories2.push({\n            name: c,\n            nodeTypes: Object.fromEntries(nodeTypesInCategory)\n          });\n        }\n      }\n      categories2.sort((a, b) => {\n        if (a.name === \"default\") {\n          return -1;\n        } else if (b.name === \"default\") {\n          return 1;\n        } else {\n          return a.name > b.name ? 1 : -1;\n        }\n      });\n      return categories2;\n    });\n    const draggedNodeStyles = computed(() => {\n      if (!draggedNode.value || !(editorEl == null ? void 0 : editorEl.value)) {\n        return {};\n      }\n      const { left, top } = editorEl.value.getBoundingClientRect();\n      return {\n        top: `${mouseY.value - top}px`,\n        left: `${mouseX.value - left}px`\n      };\n    });\n    const onDragStart = (type, nodeInformation) => {\n      draggedNode.value = {\n        type,\n        nodeInformation\n      };\n      const onDragEnd = () => {\n        const instance = reactive(new nodeInformation.type());\n        viewModel.value.displayedGraph.addNode(instance);\n        const rect = editorEl.value.getBoundingClientRect();\n        const [x, y] = transform(mouseX.value - rect.left, mouseY.value - rect.top);\n        instance.position.x = x;\n        instance.position.y = y;\n        draggedNode.value = null;\n        document.removeEventListener(\"pointerup\", onDragEnd);\n      };\n      document.addEventListener(\"pointerup\", onDragEnd);\n    };\n    return { draggedNode, categories, draggedNodeStyles, onDragStart, mouseX, mouseY };\n  }\n});\nconst _hoisted_1$a = { class: \"baklava-node-palette\" };\nconst _hoisted_2$7 = { key: 0 };\nfunction _sfc_render$a(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_PaletteEntry = resolveComponent(\"PaletteEntry\");\n  return openBlock(), createElementBlock(Fragment, null, [\n    createElementVNode(\"div\", _hoisted_1$a, [\n      (openBlock(true), createElementBlock(Fragment, null, renderList(_ctx.categories, (c) => {\n        return openBlock(), createElementBlock(\"section\", {\n          key: c.name\n        }, [\n          c.name !== \"default\" ? (openBlock(), createElementBlock(\"h1\", _hoisted_2$7, toDisplayString(c.name), 1)) : createCommentVNode(\"\", true),\n          (openBlock(true), createElementBlock(Fragment, null, renderList(c.nodeTypes, (ni, nt) => {\n            return openBlock(), createBlock(_component_PaletteEntry, {\n              key: nt,\n              type: nt,\n              title: ni.title,\n              onPointerdown: ($event) => _ctx.onDragStart(nt, ni)\n            }, null, 8, [\"type\", \"title\", \"onPointerdown\"]);\n          }), 128))\n        ]);\n      }), 128))\n    ]),\n    createVNode(Transition, { name: \"fade\" }, {\n      default: withCtx(() => [\n        _ctx.draggedNode ? (openBlock(), createElementBlock(\"div\", {\n          key: 0,\n          class: \"baklava-dragged-node\",\n          style: normalizeStyle(_ctx.draggedNodeStyles)\n        }, [\n          createVNode(_component_PaletteEntry, {\n            type: _ctx.draggedNode.type,\n            title: _ctx.draggedNode.nodeInformation.title\n          }, null, 8, [\"type\", \"title\"])\n        ], 4)) : createCommentVNode(\"\", true)\n      ]),\n      _: 1\n    })\n  ], 64);\n}\nconst NodePalette = /* @__PURE__ */ _export_sfc(_sfc_main$a, [[\"render\", _sfc_render$a]]);\nconst SAVE_SUBGRAPH_COMMAND = \"SAVE_SUBGRAPH\";\nfunction registerSaveSubgraphCommand(displayedGraph, handler) {\n  const saveSubgraph = () => {\n    const graph = displayedGraph.value;\n    if (!graph.template) {\n      throw new Error(\"Graph template property not set\");\n    }\n    const interfaceConnections = [];\n    const inputs = [];\n    const inputNodes = graph.nodes.filter((n) => n.type === SUBGRAPH_INPUT_NODE_TYPE);\n    for (const n of inputNodes) {\n      const connections = graph.connections.filter((c) => c.from === n.outputs.placeholder);\n      connections.forEach((c) => {\n        inputs.push({\n          id: n.graphInterfaceId,\n          name: n.inputs.name.value,\n          nodeInterfaceId: c.to.id\n        });\n      });\n      interfaceConnections.push(...connections);\n    }\n    const outputs = [];\n    const outputNodes = graph.nodes.filter((n) => n.type === SUBGRAPH_OUTPUT_NODE_TYPE);\n    for (const n of outputNodes) {\n      const connections = graph.connections.filter((c) => c.to === n.inputs.placeholder);\n      connections.forEach((c) => {\n        outputs.push({\n          id: n.graphInterfaceId,\n          name: n.inputs.name.value,\n          nodeInterfaceId: c.from.id\n        });\n      });\n      interfaceConnections.push(...connections);\n    }\n    const innerConnections = graph.connections.filter((c) => !interfaceConnections.includes(c));\n    const nodes = graph.nodes.filter(\n      (n) => n.type !== SUBGRAPH_INPUT_NODE_TYPE && n.type !== SUBGRAPH_OUTPUT_NODE_TYPE\n    );\n    graph.template.update({\n      inputs,\n      outputs,\n      connections: innerConnections.map((c) => ({ id: c.id, from: c.from.id, to: c.to.id })),\n      nodes: nodes.map((n) => n.save())\n    });\n    graph.template.panning = graph.panning;\n    graph.template.scaling = graph.scaling;\n  };\n  handler.registerCommand(SAVE_SUBGRAPH_COMMAND, {\n    canExecute: () => {\n      var _a2;\n      return displayedGraph.value !== ((_a2 = displayedGraph.value.editor) == null ? void 0 : _a2.graph);\n    },\n    execute: saveSubgraph\n  });\n}\nconst CREATE_SUBGRAPH_COMMAND = \"CREATE_SUBGRAPH\";\nconst IGNORE_NODE_TYPES = [SUBGRAPH_INPUT_NODE_TYPE, SUBGRAPH_OUTPUT_NODE_TYPE];\nfunction registerCreateSubgraphCommand(displayedGraph, handler, switchGraph) {\n  const canCreateSubgraph = () => {\n    return displayedGraph.value.selectedNodes.filter((n) => !IGNORE_NODE_TYPES.includes(n.type)).length > 0;\n  };\n  const createSubgraph = () => {\n    const graph = displayedGraph.value;\n    const editor = displayedGraph.value.editor;\n    if (graph.selectedNodes.length === 0) {\n      return;\n    }\n    const selectedNodes = graph.selectedNodes.filter((n) => !IGNORE_NODE_TYPES.includes(n.type));\n    const selectedNodesInputs = selectedNodes.flatMap((n) => Object.values(n.inputs));\n    const selectedNodesOutputs = selectedNodes.flatMap((n) => Object.values(n.outputs));\n    const inputConnections = graph.connections.filter(\n      (c) => !selectedNodesOutputs.includes(c.from) && selectedNodesInputs.includes(c.to)\n    );\n    const outputConnections = graph.connections.filter(\n      (c) => selectedNodesOutputs.includes(c.from) && !selectedNodesInputs.includes(c.to)\n    );\n    const innerConnections = graph.connections.filter(\n      (c) => selectedNodesOutputs.includes(c.from) && selectedNodesInputs.includes(c.to)\n    );\n    const inputInterfaces = inputConnections.map((c) => c.to);\n    const outputInterfaces = outputConnections.map((c) => c.from);\n    const interfaceIdMap = /* @__PURE__ */ new Map();\n    const graphInputs = [];\n    for (const i of inputInterfaces) {\n      const newId = v4();\n      interfaceIdMap.set(i.id, newId);\n      graphInputs.push({ id: newId, nodeInterfaceId: i.id, name: i.name });\n    }\n    const graphOutputs = [];\n    for (const i of outputInterfaces) {\n      const newId = v4();\n      interfaceIdMap.set(i.id, newId);\n      graphOutputs.push({ id: newId, nodeInterfaceId: i.id, name: i.name });\n    }\n    const subgraphTemplate = reactive(\n      new GraphTemplate(\n        {\n          connections: innerConnections.map((c) => ({ id: c.id, from: c.from.id, to: c.to.id })),\n          inputs: graphInputs,\n          outputs: graphOutputs,\n          nodes: selectedNodes.map((n) => n.save())\n        },\n        editor\n      )\n    );\n    editor.addGraphTemplate(subgraphTemplate);\n    const nt = editor.nodeTypes.get(getGraphNodeTypeString(subgraphTemplate));\n    if (!nt) {\n      throw new Error(\"Unable to create subgraph: Could not find corresponding graph node type\");\n    }\n    const node = reactive(new nt.type());\n    graph.addNode(node);\n    const averageX = Math.round(\n      selectedNodes.map((n) => n.position.x).reduce((p, c) => p + c, 0) / selectedNodes.length\n    );\n    const averageY = Math.round(\n      selectedNodes.map((n) => n.position.y).reduce((p, c) => p + c, 0) / selectedNodes.length\n    );\n    node.position.x = averageX;\n    node.position.y = averageY;\n    inputConnections.forEach((c) => {\n      graph.removeConnection(c);\n      graph.addConnection(c.from, node.inputs[interfaceIdMap.get(c.to.id)]);\n    });\n    outputConnections.forEach((c) => {\n      graph.removeConnection(c);\n      graph.addConnection(node.outputs[interfaceIdMap.get(c.from.id)], c.to);\n    });\n    selectedNodes.forEach((n) => graph.removeNode(n));\n    if (handler.canExecuteCommand(SAVE_SUBGRAPH_COMMAND)) {\n      handler.executeCommand(SAVE_SUBGRAPH_COMMAND);\n    }\n    switchGraph(subgraphTemplate);\n    displayedGraph.value.panning = { ...graph.panning };\n    displayedGraph.value.scaling = graph.scaling;\n  };\n  handler.registerCommand(CREATE_SUBGRAPH_COMMAND, {\n    canExecute: canCreateSubgraph,\n    execute: createSubgraph\n  });\n}\nconst DELETE_NODES_COMMAND = \"DELETE_NODES\";\nfunction registerDeleteNodesCommand(displayedGraph, handler) {\n  handler.registerCommand(DELETE_NODES_COMMAND, {\n    canExecute: () => displayedGraph.value.selectedNodes.length > 0,\n    execute() {\n      displayedGraph.value.selectedNodes.forEach((n) => displayedGraph.value.removeNode(n));\n    }\n  });\n  handler.registerHotkey([\"Delete\"], DELETE_NODES_COMMAND);\n}\nconst SWITCH_TO_MAIN_GRAPH_COMMAND = \"SWITCH_TO_MAIN_GRAPH\";\nfunction registerSwitchToMainGraphCommand(displayedGraph, handler, switchGraph) {\n  handler.registerCommand(SWITCH_TO_MAIN_GRAPH_COMMAND, {\n    canExecute: () => displayedGraph.value !== displayedGraph.value.editor.graph,\n    execute: () => {\n      handler.executeCommand(SAVE_SUBGRAPH_COMMAND);\n      switchGraph(displayedGraph.value.editor.graph);\n    }\n  });\n}\nfunction registerGraphCommands(displayedGraph, handler, switchGraph) {\n  registerDeleteNodesCommand(displayedGraph, handler);\n  registerCreateSubgraphCommand(displayedGraph, handler, switchGraph);\n  registerSaveSubgraphCommand(displayedGraph, handler);\n  registerSwitchToMainGraphCommand(displayedGraph, handler, switchGraph);\n}\nclass NodeStep {\n  constructor(type, data) {\n    this.type = type;\n    if (type === \"addNode\") {\n      this.nodeId = data;\n    } else {\n      this.nodeState = data;\n    }\n  }\n  undo(graph) {\n    if (this.type === \"addNode\") {\n      this.removeNode(graph);\n    } else {\n      this.addNode(graph);\n    }\n  }\n  redo(graph) {\n    if (this.type === \"addNode\" && this.nodeState) {\n      this.addNode(graph);\n    } else if (this.type === \"removeNode\" && this.nodeId) {\n      this.removeNode(graph);\n    }\n  }\n  addNode(graph) {\n    const nodeType = graph.editor.nodeTypes.get(this.nodeState.type);\n    if (!nodeType) {\n      return;\n    }\n    const n = new nodeType.type();\n    graph.addNode(n);\n    n.load(this.nodeState);\n    this.nodeId = n.id;\n  }\n  removeNode(graph) {\n    const node = graph.nodes.find((n) => n.id === this.nodeId);\n    if (!node) {\n      return;\n    }\n    this.nodeState = node.save();\n    graph.removeNode(node);\n  }\n}\nclass ConnectionStep {\n  constructor(type, data) {\n    this.type = type;\n    if (type === \"addConnection\") {\n      this.connectionId = data;\n    } else {\n      const d = data;\n      this.connectionState = {\n        id: d.id,\n        from: d.from.id,\n        to: d.to.id\n      };\n    }\n  }\n  undo(graph) {\n    if (this.type === \"addConnection\") {\n      this.removeConnection(graph);\n    } else {\n      this.addConnection(graph);\n    }\n  }\n  redo(graph) {\n    if (this.type === \"addConnection\" && this.connectionState) {\n      this.addConnection(graph);\n    } else if (this.type === \"removeConnection\" && this.connectionId) {\n      this.removeConnection(graph);\n    }\n  }\n  addConnection(graph) {\n    const fromIntf = graph.findNodeInterface(this.connectionState.from);\n    const toIntf = graph.findNodeInterface(this.connectionState.to);\n    if (!fromIntf || !toIntf) {\n      return;\n    }\n    graph.addConnection(fromIntf, toIntf);\n  }\n  removeConnection(graph) {\n    const connection = graph.connections.find((c) => c.id === this.connectionId);\n    if (!connection) {\n      return;\n    }\n    this.connectionState = {\n      id: connection.id,\n      from: connection.from.id,\n      to: connection.to.id\n    };\n    graph.removeConnection(connection);\n  }\n}\nclass TransactionStep {\n  constructor(steps) {\n    this.type = \"transaction\";\n    if (steps.length === 0) {\n      throw new Error(\"Can't create a transaction with no steps\");\n    }\n    this.steps = steps;\n  }\n  undo(graph) {\n    for (let i = this.steps.length - 1; i >= 0; i--) {\n      this.steps[i].undo(graph);\n    }\n  }\n  redo(graph) {\n    for (let i = 0; i < this.steps.length; i++) {\n      this.steps[i].redo(graph);\n    }\n  }\n}\nconst UNDO_COMMAND = \"UNDO\";\nconst REDO_COMMAND = \"REDO\";\nconst START_TRANSACTION_COMMAND = \"START_TRANSACTION\";\nconst COMMIT_TRANSACTION_COMMAND = \"COMMIT_TRANSACTION\";\nfunction useHistory(graph, commandHandler) {\n  const token = Symbol(\"HistoryToken\");\n  const maxSteps = ref(200);\n  const steps = ref([]);\n  const changeBySelf = ref(false);\n  const currentIndex = ref(-1);\n  const activeTransaction = ref(false);\n  const transactionSteps = ref([]);\n  const addStep = (step) => {\n    if (changeBySelf.value) {\n      return;\n    }\n    if (activeTransaction.value) {\n      transactionSteps.value.push(step);\n    } else {\n      if (currentIndex.value !== steps.value.length - 1) {\n        steps.value = steps.value.slice(0, currentIndex.value + 1);\n      }\n      steps.value.push(step);\n      currentIndex.value++;\n      while (steps.value.length > maxSteps.value) {\n        steps.value.shift();\n      }\n    }\n  };\n  const startTransaction = () => {\n    activeTransaction.value = true;\n  };\n  const commitTransaction = () => {\n    activeTransaction.value = false;\n    if (transactionSteps.value.length > 0) {\n      addStep(new TransactionStep(transactionSteps.value));\n      transactionSteps.value = [];\n    }\n  };\n  const canUndo = () => steps.value.length !== 0 && currentIndex.value !== -1;\n  const undo = () => {\n    if (!canUndo()) {\n      return;\n    }\n    changeBySelf.value = true;\n    steps.value[currentIndex.value--].undo(graph.value);\n    changeBySelf.value = false;\n  };\n  const canRedo = () => steps.value.length !== 0 && currentIndex.value < steps.value.length - 1;\n  const redo = () => {\n    if (!canRedo()) {\n      return;\n    }\n    changeBySelf.value = true;\n    steps.value[++currentIndex.value].redo(graph.value);\n    changeBySelf.value = false;\n  };\n  watch(\n    graph,\n    (newGraph, oldGraph) => {\n      if (oldGraph) {\n        oldGraph.events.addNode.unsubscribe(token);\n        oldGraph.events.removeNode.unsubscribe(token);\n        oldGraph.events.addConnection.unsubscribe(token);\n        oldGraph.events.removeConnection.unsubscribe(token);\n      }\n      if (newGraph) {\n        newGraph.events.addNode.subscribe(token, (node) => {\n          addStep(new NodeStep(\"addNode\", node.id));\n        });\n        newGraph.events.removeNode.subscribe(token, (node) => {\n          addStep(new NodeStep(\"removeNode\", node.save()));\n        });\n        newGraph.events.addConnection.subscribe(token, (conn) => {\n          addStep(new ConnectionStep(\"addConnection\", conn.id));\n        });\n        newGraph.events.removeConnection.subscribe(token, (conn) => {\n          addStep(new ConnectionStep(\"removeConnection\", conn));\n        });\n      }\n    },\n    { immediate: true }\n  );\n  commandHandler.registerCommand(UNDO_COMMAND, {\n    canExecute: canUndo,\n    execute: undo\n  });\n  commandHandler.registerCommand(REDO_COMMAND, {\n    canExecute: canRedo,\n    execute: redo\n  });\n  commandHandler.registerCommand(START_TRANSACTION_COMMAND, {\n    canExecute: () => !activeTransaction.value,\n    execute: startTransaction\n  });\n  commandHandler.registerCommand(COMMIT_TRANSACTION_COMMAND, {\n    canExecute: () => activeTransaction.value,\n    execute: commitTransaction\n  });\n  commandHandler.registerHotkey([\"Control\", \"z\"], UNDO_COMMAND);\n  commandHandler.registerHotkey([\"Control\", \"y\"], REDO_COMMAND);\n  return reactive({\n    maxSteps\n  });\n}\nconst COPY_COMMAND = \"COPY\";\nconst PASTE_COMMAND = \"PASTE\";\nconst CLEAR_CLIPBOARD_COMMAND = \"CLEAR_CLIPBOARD\";\nfunction useClipboard(displayedGraph, editor, commandHandler) {\n  const token = Symbol(\"ClipboardToken\");\n  const nodeBuffer = ref(\"\");\n  const connectionBuffer = ref(\"\");\n  const isEmpty = computed(() => !nodeBuffer.value);\n  const clear = () => {\n    nodeBuffer.value = \"\";\n    connectionBuffer.value = \"\";\n  };\n  const copy = () => {\n    const interfacesOfSelectedNodes = displayedGraph.value.selectedNodes.flatMap((n) => [\n      ...Object.values(n.inputs),\n      ...Object.values(n.outputs)\n    ]);\n    const connections = displayedGraph.value.connections.filter(\n      (conn) => interfacesOfSelectedNodes.includes(conn.from) || interfacesOfSelectedNodes.includes(conn.to)\n    ).map((conn) => ({ from: conn.from.id, to: conn.to.id }));\n    connectionBuffer.value = JSON.stringify(connections);\n    nodeBuffer.value = JSON.stringify(displayedGraph.value.selectedNodes.map((n) => n.save()));\n  };\n  const findInterface = (nodes, id, io) => {\n    for (const n of nodes) {\n      let intf;\n      if (!io || io === \"input\") {\n        intf = Object.values(n.inputs).find((intf2) => intf2.id === id);\n      }\n      if (!intf && (!io || io === \"output\")) {\n        intf = Object.values(n.outputs).find((intf2) => intf2.id === id);\n      }\n      if (intf) {\n        return intf;\n      }\n    }\n    return void 0;\n  };\n  const paste = () => {\n    if (isEmpty.value) {\n      return;\n    }\n    const idmap = /* @__PURE__ */ new Map();\n    const parsedNodeBuffer = JSON.parse(nodeBuffer.value);\n    const parsedConnectionBuffer = JSON.parse(connectionBuffer.value);\n    const newNodes = [];\n    const newConnections = [];\n    const graph = displayedGraph.value;\n    commandHandler.executeCommand(START_TRANSACTION_COMMAND);\n    for (const n of parsedNodeBuffer) {\n      const nodeType = editor.value.nodeTypes.get(n.type);\n      if (!nodeType) {\n        console.warn(`Node type ${n.type} not registered`);\n        return;\n      }\n      const copiedNode = new nodeType.type();\n      const generatedId = copiedNode.id;\n      newNodes.push(copiedNode);\n      const tapInterfaces = (intfs) => {\n        Object.values(intfs).forEach((intf) => {\n          intf.hooks.load.subscribe(token, (intfState) => {\n            const newIntfId = v4();\n            idmap.set(intfState.id, newIntfId);\n            intf.id = newIntfId;\n            intf.hooks.load.unsubscribe(token);\n            return intfState;\n          });\n        });\n      };\n      tapInterfaces(copiedNode.inputs);\n      tapInterfaces(copiedNode.outputs);\n      copiedNode.hooks.beforeLoad.subscribe(token, (nodeState) => {\n        const ns = nodeState;\n        if (ns.position) {\n          ns.position.x += 10;\n          ns.position.y += 10;\n        }\n        copiedNode.hooks.beforeLoad.unsubscribe(token);\n        return ns;\n      });\n      graph.addNode(copiedNode);\n      copiedNode.load(n);\n      copiedNode.id = generatedId;\n      idmap.set(n.id, generatedId);\n    }\n    for (const c of parsedConnectionBuffer) {\n      const fromIntf = findInterface(newNodes, idmap.get(c.from), \"output\");\n      const toIntf = findInterface(newNodes, idmap.get(c.to), \"input\");\n      if (!fromIntf || !toIntf) {\n        continue;\n      }\n      const newConnection = graph.addConnection(fromIntf, toIntf);\n      if (newConnection) {\n        newConnections.push(newConnection);\n      }\n    }\n    commandHandler.executeCommand(COMMIT_TRANSACTION_COMMAND);\n    return {\n      newNodes,\n      newConnections\n    };\n  };\n  commandHandler.registerCommand(COPY_COMMAND, {\n    canExecute: () => true,\n    execute: copy\n  });\n  commandHandler.registerHotkey([\"Control\", \"c\"], COPY_COMMAND);\n  commandHandler.registerCommand(PASTE_COMMAND, {\n    canExecute: () => !isEmpty.value,\n    execute: paste\n  });\n  commandHandler.registerHotkey([\"Control\", \"v\"], PASTE_COMMAND);\n  commandHandler.registerCommand(CLEAR_CLIPBOARD_COMMAND, {\n    canExecute: () => true,\n    execute: clear\n  });\n  return reactive({ isEmpty });\n}\nconst OPEN_SIDEBAR_COMMAND = \"OPEN_SIDEBAR\";\nfunction registerOpenSidebarCommand(displayedGraph, handler) {\n  handler.registerCommand(OPEN_SIDEBAR_COMMAND, {\n    execute: (nodeId) => {\n      displayedGraph.value.sidebar.nodeId = nodeId;\n      displayedGraph.value.sidebar.visible = true;\n    },\n    canExecute: () => true\n  });\n}\nfunction registerSidebarCommands(displayedGraph, handler) {\n  registerOpenSidebarCommand(displayedGraph, handler);\n}\nconst commandList = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  CREATE_SUBGRAPH_COMMAND,\n  DELETE_NODES_COMMAND,\n  SAVE_SUBGRAPH_COMMAND,\n  SWITCH_TO_MAIN_GRAPH_COMMAND,\n  COMMIT_TRANSACTION_COMMAND,\n  START_TRANSACTION_COMMAND,\n  UNDO_COMMAND,\n  REDO_COMMAND,\n  CLEAR_CLIPBOARD_COMMAND,\n  COPY_COMMAND,\n  PASTE_COMMAND,\n  OPEN_SIDEBAR_COMMAND\n}, Symbol.toStringTag, { value: \"Module\" }));\nconst _sfc_main$9 = {};\nconst _hoisted_1$9 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  class: \"baklava-icon\",\n  width: \"24\",\n  height: \"24\",\n  viewBox: \"0 0 24 24\",\n  \"stroke-width\": \"2\",\n  stroke: \"currentColor\",\n  fill: \"none\",\n  \"stroke-linecap\": \"round\",\n  \"stroke-linejoin\": \"round\"\n};\nconst _hoisted_2$6 = /* @__PURE__ */ createElementVNode(\"path\", {\n  stroke: \"none\",\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n}, null, -1);\nconst _hoisted_3$5 = /* @__PURE__ */ createElementVNode(\"path\", { d: \"M9 13l-4 -4l4 -4m-4 4h11a4 4 0 0 1 0 8h-1\" }, null, -1);\nconst _hoisted_4$5 = [\n  _hoisted_2$6,\n  _hoisted_3$5\n];\nfunction _sfc_render$9(_ctx, _cache) {\n  return openBlock(), createElementBlock(\"svg\", _hoisted_1$9, _hoisted_4$5);\n}\nconst ArrowBackUp = /* @__PURE__ */ _export_sfc(_sfc_main$9, [[\"render\", _sfc_render$9]]);\nconst _sfc_main$8 = {};\nconst _hoisted_1$8 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  class: \"baklava-icon\",\n  width: \"24\",\n  height: \"24\",\n  viewBox: \"0 0 24 24\",\n  \"stroke-width\": \"2\",\n  stroke: \"currentColor\",\n  fill: \"none\",\n  \"stroke-linecap\": \"round\",\n  \"stroke-linejoin\": \"round\"\n};\nconst _hoisted_2$5 = /* @__PURE__ */ createElementVNode(\"path\", {\n  stroke: \"none\",\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n}, null, -1);\nconst _hoisted_3$4 = /* @__PURE__ */ createElementVNode(\"path\", { d: \"M15 13l4 -4l-4 -4m4 4h-11a4 4 0 0 0 0 8h1\" }, null, -1);\nconst _hoisted_4$4 = [\n  _hoisted_2$5,\n  _hoisted_3$4\n];\nfunction _sfc_render$8(_ctx, _cache) {\n  return openBlock(), createElementBlock(\"svg\", _hoisted_1$8, _hoisted_4$4);\n}\nconst ArrowForwardUp = /* @__PURE__ */ _export_sfc(_sfc_main$8, [[\"render\", _sfc_render$8]]);\nconst _sfc_main$7 = {};\nconst _hoisted_1$7 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  class: \"baklava-icon\",\n  width: \"24\",\n  height: \"24\",\n  viewBox: \"0 0 24 24\",\n  \"stroke-width\": \"2\",\n  stroke: \"currentColor\",\n  fill: \"none\",\n  \"stroke-linecap\": \"round\",\n  \"stroke-linejoin\": \"round\"\n};\nconst _hoisted_2$4 = /* @__PURE__ */ createElementVNode(\"path\", {\n  stroke: \"none\",\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n}, null, -1);\nconst _hoisted_3$3 = /* @__PURE__ */ createElementVNode(\"line\", {\n  x1: \"5\",\n  y1: \"12\",\n  x2: \"19\",\n  y2: \"12\"\n}, null, -1);\nconst _hoisted_4$3 = /* @__PURE__ */ createElementVNode(\"line\", {\n  x1: \"5\",\n  y1: \"12\",\n  x2: \"11\",\n  y2: \"18\"\n}, null, -1);\nconst _hoisted_5$3 = /* @__PURE__ */ createElementVNode(\"line\", {\n  x1: \"5\",\n  y1: \"12\",\n  x2: \"11\",\n  y2: \"6\"\n}, null, -1);\nconst _hoisted_6$1 = [\n  _hoisted_2$4,\n  _hoisted_3$3,\n  _hoisted_4$3,\n  _hoisted_5$3\n];\nfunction _sfc_render$7(_ctx, _cache) {\n  return openBlock(), createElementBlock(\"svg\", _hoisted_1$7, _hoisted_6$1);\n}\nconst ArrowLeft = /* @__PURE__ */ _export_sfc(_sfc_main$7, [[\"render\", _sfc_render$7]]);\nconst _sfc_main$6 = {};\nconst _hoisted_1$6 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  class: \"baklava-icon\",\n  width: \"24\",\n  height: \"24\",\n  viewBox: \"0 0 24 24\",\n  \"stroke-width\": \"2\",\n  stroke: \"currentColor\",\n  fill: \"none\",\n  \"stroke-linecap\": \"round\",\n  \"stroke-linejoin\": \"round\"\n};\nconst _hoisted_2$3 = /* @__PURE__ */ createElementVNode(\"path\", {\n  stroke: \"none\",\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n}, null, -1);\nconst _hoisted_3$2 = /* @__PURE__ */ createElementVNode(\"path\", { d: \"M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2\" }, null, -1);\nconst _hoisted_4$2 = /* @__PURE__ */ createElementVNode(\"rect\", {\n  x: \"9\",\n  y: \"3\",\n  width: \"6\",\n  height: \"4\",\n  rx: \"2\"\n}, null, -1);\nconst _hoisted_5$2 = [\n  _hoisted_2$3,\n  _hoisted_3$2,\n  _hoisted_4$2\n];\nfunction _sfc_render$6(_ctx, _cache) {\n  return openBlock(), createElementBlock(\"svg\", _hoisted_1$6, _hoisted_5$2);\n}\nconst Clipboard = /* @__PURE__ */ _export_sfc(_sfc_main$6, [[\"render\", _sfc_render$6]]);\nconst _sfc_main$5 = {};\nconst _hoisted_1$5 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  class: \"baklava-icon\",\n  width: \"24\",\n  height: \"24\",\n  viewBox: \"0 0 24 24\",\n  \"stroke-width\": \"2\",\n  stroke: \"currentColor\",\n  fill: \"none\",\n  \"stroke-linecap\": \"round\",\n  \"stroke-linejoin\": \"round\"\n};\nconst _hoisted_2$2 = /* @__PURE__ */ createElementVNode(\"path\", {\n  stroke: \"none\",\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n}, null, -1);\nconst _hoisted_3$1 = /* @__PURE__ */ createElementVNode(\"rect\", {\n  x: \"8\",\n  y: \"8\",\n  width: \"12\",\n  height: \"12\",\n  rx: \"2\"\n}, null, -1);\nconst _hoisted_4$1 = /* @__PURE__ */ createElementVNode(\"path\", { d: \"M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2\" }, null, -1);\nconst _hoisted_5$1 = [\n  _hoisted_2$2,\n  _hoisted_3$1,\n  _hoisted_4$1\n];\nfunction _sfc_render$5(_ctx, _cache) {\n  return openBlock(), createElementBlock(\"svg\", _hoisted_1$5, _hoisted_5$1);\n}\nconst Copy = /* @__PURE__ */ _export_sfc(_sfc_main$5, [[\"render\", _sfc_render$5]]);\nconst _sfc_main$4 = {};\nconst _hoisted_1$4 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  class: \"baklava-icon\",\n  width: \"24\",\n  height: \"24\",\n  viewBox: \"0 0 24 24\",\n  \"stroke-width\": \"2\",\n  stroke: \"currentColor\",\n  fill: \"none\",\n  \"stroke-linecap\": \"round\",\n  \"stroke-linejoin\": \"round\"\n};\nconst _hoisted_2$1 = /* @__PURE__ */ createElementVNode(\"path\", {\n  stroke: \"none\",\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n}, null, -1);\nconst _hoisted_3 = /* @__PURE__ */ createElementVNode(\"path\", { d: \"M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2\" }, null, -1);\nconst _hoisted_4 = /* @__PURE__ */ createElementVNode(\"circle\", {\n  cx: \"12\",\n  cy: \"14\",\n  r: \"2\"\n}, null, -1);\nconst _hoisted_5 = /* @__PURE__ */ createElementVNode(\"polyline\", { points: \"14 4 14 8 8 8 8 4\" }, null, -1);\nconst _hoisted_6 = [\n  _hoisted_2$1,\n  _hoisted_3,\n  _hoisted_4,\n  _hoisted_5\n];\nfunction _sfc_render$4(_ctx, _cache) {\n  return openBlock(), createElementBlock(\"svg\", _hoisted_1$4, _hoisted_6);\n}\nconst DeviceFloppy = /* @__PURE__ */ _export_sfc(_sfc_main$4, [[\"render\", _sfc_render$4]]);\nconst _sfc_main$3 = {};\nconst _hoisted_1$3 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  class: \"baklava-icon\",\n  width: \"24\",\n  height: \"24\",\n  viewBox: \"0 0 24 24\",\n  \"stroke-width\": \"2\",\n  stroke: \"currentColor\",\n  fill: \"none\",\n  \"stroke-linecap\": \"round\",\n  \"stroke-linejoin\": \"round\"\n};\nconst _hoisted_2 = /* @__PURE__ */ createStaticVNode('<path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"></path><path d=\"M10 3h4v4h-4z\"></path><path d=\"M3 17h4v4h-4z\"></path><path d=\"M17 17h4v4h-4z\"></path><path d=\"M7 17l5 -4l5 4\"></path><line x1=\"12\" y1=\"7\" x2=\"12\" y2=\"13\"></line>', 6);\nconst _hoisted_8 = [\n  _hoisted_2\n];\nfunction _sfc_render$3(_ctx, _cache) {\n  return openBlock(), createElementBlock(\"svg\", _hoisted_1$3, _hoisted_8);\n}\nconst Hierarchy2 = /* @__PURE__ */ _export_sfc(_sfc_main$3, [[\"render\", _sfc_render$3]]);\nconst _sfc_main$2 = defineComponent({\n  props: {\n    command: {\n      type: String,\n      required: true\n    },\n    title: {\n      type: String,\n      required: true\n    },\n    icon: {\n      type: Object,\n      required: false,\n      default: void 0\n    }\n  },\n  setup() {\n    const { viewModel } = useViewModel();\n    return { viewModel };\n  }\n});\nconst _hoisted_1$2 = [\"disabled\", \"title\"];\nfunction _sfc_render$2(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"button\", {\n    class: \"baklava-toolbar-entry baklava-toolbar-button\",\n    disabled: !_ctx.viewModel.commandHandler.canExecuteCommand(_ctx.command),\n    title: _ctx.title,\n    onClick: _cache[0] || (_cache[0] = ($event) => _ctx.viewModel.commandHandler.executeCommand(_ctx.command))\n  }, [\n    _ctx.icon ? (openBlock(), createBlock(resolveDynamicComponent(_ctx.icon), { key: 0 })) : (openBlock(), createElementBlock(Fragment, { key: 1 }, [\n      createTextVNode(toDisplayString(_ctx.title), 1)\n    ], 64))\n  ], 8, _hoisted_1$2);\n}\nconst ToolbarButton = /* @__PURE__ */ _export_sfc(_sfc_main$2, [[\"render\", _sfc_render$2]]);\nconst _sfc_main$1 = defineComponent({\n  components: { ToolbarButton },\n  setup() {\n    const { viewModel } = useViewModel();\n    const isSubgraph = computed(() => viewModel.value.displayedGraph !== viewModel.value.editor.graph);\n    const commands = [\n      { command: COPY_COMMAND, title: \"Copy\", icon: Copy },\n      { command: PASTE_COMMAND, title: \"Paste\", icon: Clipboard },\n      { command: UNDO_COMMAND, title: \"Undo\", icon: ArrowBackUp },\n      { command: REDO_COMMAND, title: \"Redo\", icon: ArrowForwardUp },\n      { command: CREATE_SUBGRAPH_COMMAND, title: \"Create Subgraph\", icon: Hierarchy2 }\n    ];\n    const subgraphCommands = [\n      { command: SAVE_SUBGRAPH_COMMAND, title: \"Save Subgraph\", icon: DeviceFloppy },\n      { command: SWITCH_TO_MAIN_GRAPH_COMMAND, title: \"Back to Main Graph\", icon: ArrowLeft }\n    ];\n    return { isSubgraph, commands, subgraphCommands };\n  }\n});\nconst _hoisted_1$1 = { class: \"baklava-toolbar\" };\nfunction _sfc_render$1(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_toolbar_button = resolveComponent(\"toolbar-button\");\n  return openBlock(), createElementBlock(\"div\", _hoisted_1$1, [\n    (openBlock(true), createElementBlock(Fragment, null, renderList(_ctx.commands, (c) => {\n      return openBlock(), createBlock(_component_toolbar_button, {\n        key: c.command,\n        command: c.command,\n        title: c.title,\n        icon: c.icon\n      }, null, 8, [\"command\", \"title\", \"icon\"]);\n    }), 128)),\n    _ctx.isSubgraph ? (openBlock(true), createElementBlock(Fragment, { key: 0 }, renderList(_ctx.subgraphCommands, (c) => {\n      return openBlock(), createBlock(_component_toolbar_button, {\n        key: c.command,\n        command: c.command,\n        title: c.title,\n        icon: c.icon\n      }, null, 8, [\"command\", \"title\", \"icon\"]);\n    }), 128)) : createCommentVNode(\"\", true)\n  ]);\n}\nconst Toolbar = /* @__PURE__ */ _export_sfc(_sfc_main$1, [[\"render\", _sfc_render$1]]);\nconst _sfc_main = defineComponent({\n  components: { Background, Node: _sfc_main$q, ConnectionWrapper, TemporaryConnection, Sidebar, Minimap, NodePalette, Toolbar },\n  props: {\n    viewModel: {\n      type: Object,\n      required: true\n    }\n  },\n  setup(props) {\n    const token = Symbol(\"EditorToken\");\n    const viewModelRef2 = toRef(props, \"viewModel\");\n    providePlugin(viewModelRef2);\n    const el = ref(null);\n    provide(\"editorEl\", el);\n    const nodes = computed(() => props.viewModel.displayedGraph.nodes);\n    const connections = computed(() => props.viewModel.displayedGraph.connections);\n    const selectedNodes = computed(() => props.viewModel.displayedGraph.selectedNodes);\n    const panZoom = usePanZoom();\n    const temporaryConnection = useTemporaryConnection();\n    const nodeContainerStyle = computed(() => ({\n      ...panZoom.styles.value\n    }));\n    const counter = ref(0);\n    props.viewModel.editor.hooks.load.subscribe(token, (s) => {\n      counter.value++;\n      return s;\n    });\n    const onPointerMove = (ev) => {\n      panZoom.onPointerMove(ev);\n      temporaryConnection.onMouseMove(ev);\n    };\n    const onPointerDown = (ev) => {\n      if (ev.button === 0) {\n        if (ev.target === el.value) {\n          unselectAllNodes();\n          panZoom.onPointerDown(ev);\n        }\n        temporaryConnection.onMouseDown();\n      }\n    };\n    const onPointerUp = (ev) => {\n      panZoom.onPointerUp(ev);\n      temporaryConnection.onMouseUp();\n    };\n    const keyDown = (ev) => {\n      if (ev.key === \"Tab\") {\n        ev.preventDefault();\n      }\n      props.viewModel.commandHandler.handleKeyDown(ev);\n    };\n    const keyUp = (ev) => {\n      props.viewModel.commandHandler.handleKeyUp(ev);\n    };\n    const selectNode = (node) => {\n      if (!props.viewModel.commandHandler.pressedKeys.includes(\"Control\")) {\n        unselectAllNodes();\n      }\n      props.viewModel.displayedGraph.selectedNodes.push(node);\n    };\n    const unselectAllNodes = () => {\n      props.viewModel.displayedGraph.selectedNodes = [];\n    };\n    return {\n      el,\n      counter,\n      nodes,\n      connections,\n      selectedNodes,\n      nodeContainerStyle,\n      onPointerMove,\n      onPointerDown,\n      onPointerUp,\n      keyDown,\n      keyUp,\n      selectNode,\n      temporaryConnection: temporaryConnection.temporaryConnection,\n      mouseWheel: panZoom.onMouseWheel,\n      dragging: panZoom.dragging\n    };\n  }\n});\nconst _hoisted_1 = { class: \"connections-container\" };\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_background = resolveComponent(\"background\");\n  const _component_toolbar = resolveComponent(\"toolbar\");\n  const _component_node_palette = resolveComponent(\"node-palette\");\n  const _component_connection_wrapper = resolveComponent(\"connection-wrapper\");\n  const _component_temporary_connection = resolveComponent(\"temporary-connection\");\n  const _component_node = resolveComponent(\"node\");\n  const _component_sidebar = resolveComponent(\"sidebar\");\n  const _component_minimap = resolveComponent(\"minimap\");\n  return openBlock(), createElementBlock(\"div\", {\n    ref: \"el\",\n    tabindex: \"-1\",\n    class: normalizeClass([\"baklava-editor\", {\n      \"baklava-ignore-mouse\": !!_ctx.temporaryConnection || _ctx.dragging,\n      \"--temporary-connection\": !!_ctx.temporaryConnection\n    }]),\n    onPointermove: _cache[0] || (_cache[0] = withModifiers((...args) => _ctx.onPointerMove && _ctx.onPointerMove(...args), [\"self\"])),\n    onPointerdown: _cache[1] || (_cache[1] = (...args) => _ctx.onPointerDown && _ctx.onPointerDown(...args)),\n    onPointerup: _cache[2] || (_cache[2] = (...args) => _ctx.onPointerUp && _ctx.onPointerUp(...args)),\n    onWheel: _cache[3] || (_cache[3] = withModifiers((...args) => _ctx.mouseWheel && _ctx.mouseWheel(...args), [\"self\"])),\n    onKeydown: _cache[4] || (_cache[4] = (...args) => _ctx.keyDown && _ctx.keyDown(...args)),\n    onKeyup: _cache[5] || (_cache[5] = (...args) => _ctx.keyUp && _ctx.keyUp(...args))\n  }, [\n    renderSlot(_ctx.$slots, \"background\", {}, () => [\n      createVNode(_component_background)\n    ]),\n    renderSlot(_ctx.$slots, \"toolbar\", {}, () => [\n      createVNode(_component_toolbar)\n    ]),\n    renderSlot(_ctx.$slots, \"palette\", {}, () => [\n      createVNode(_component_node_palette)\n    ]),\n    (openBlock(), createElementBlock(\"svg\", _hoisted_1, [\n      (openBlock(true), createElementBlock(Fragment, null, renderList(_ctx.connections, (connection) => {\n        return openBlock(), createElementBlock(\"g\", {\n          key: connection.id + _ctx.counter.toString()\n        }, [\n          renderSlot(_ctx.$slots, \"connection\", { connection }, () => [\n            createVNode(_component_connection_wrapper, { connection }, null, 8, [\"connection\"])\n          ])\n        ]);\n      }), 128)),\n      renderSlot(_ctx.$slots, \"temporaryConnection\", { temporaryConnection: _ctx.temporaryConnection }, () => [\n        _ctx.temporaryConnection ? (openBlock(), createBlock(_component_temporary_connection, {\n          key: 0,\n          connection: _ctx.temporaryConnection\n        }, null, 8, [\"connection\"])) : createCommentVNode(\"\", true)\n      ])\n    ])),\n    createElementVNode(\"div\", {\n      class: \"node-container\",\n      style: normalizeStyle(_ctx.nodeContainerStyle)\n    }, [\n      createVNode(TransitionGroup, { name: \"fade\" }, {\n        default: withCtx(() => [\n          (openBlock(true), createElementBlock(Fragment, null, renderList(_ctx.nodes, (node) => {\n            return renderSlot(_ctx.$slots, \"node\", {\n              node,\n              selected: _ctx.selectedNodes.includes(node),\n              onSelect: ($event) => _ctx.selectNode(node)\n            }, () => [\n              (openBlock(), createBlock(_component_node, {\n                key: node.id + _ctx.counter.toString(),\n                node,\n                selected: _ctx.selectedNodes.includes(node),\n                onSelect: ($event) => _ctx.selectNode(node)\n              }, null, 8, [\"node\", \"selected\", \"onSelect\"]))\n            ]);\n          }), 256))\n        ]),\n        _: 3\n      })\n    ], 4),\n    renderSlot(_ctx.$slots, \"sidebar\", {}, () => [\n      createVNode(_component_sidebar)\n    ]),\n    renderSlot(_ctx.$slots, \"minimap\", {}, () => [\n      _ctx.viewModel.settings.enableMinimap ? (openBlock(), createBlock(_component_minimap, { key: 0 })) : createCommentVNode(\"\", true)\n    ])\n  ], 34);\n}\nconst Editor = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\nfunction useHotkeyHandler(executeCommand) {\n  const pressedKeys = ref([]);\n  const handlers = ref([]);\n  const handleKeyDown = (ev) => {\n    if (!pressedKeys.value.includes(ev.key)) {\n      pressedKeys.value.push(ev.key);\n    }\n    handlers.value.forEach((h) => {\n      if (h.keys.every((k) => pressedKeys.value.includes(k))) {\n        executeCommand(h.commandName);\n      }\n    });\n  };\n  const handleKeyUp = (ev) => {\n    const index = pressedKeys.value.indexOf(ev.key);\n    if (index >= 0) {\n      pressedKeys.value.splice(index, 1);\n    }\n  };\n  const registerHotkey = (keys2, commandName) => {\n    handlers.value.push({ keys: keys2, commandName });\n  };\n  return { pressedKeys, handleKeyDown, handleKeyUp, registerHotkey };\n}\nconst useCommandHandler = () => {\n  const commands = ref(/* @__PURE__ */ new Map());\n  const registerCommand = (name, command) => {\n    if (commands.value.has(name)) {\n      throw new Error(`Command \"${name}\" already exists`);\n    }\n    commands.value.set(name, command);\n  };\n  const executeCommand = (name, throwOnNonexisting = false, ...args) => {\n    if (!commands.value.has(name)) {\n      if (throwOnNonexisting) {\n        throw new Error(`[CommandHandler] Command ${name} not registered`);\n      } else {\n        return;\n      }\n    }\n    return commands.value.get(name).execute(...args);\n  };\n  const canExecuteCommand = (name, throwOnNonexisting = false, ...args) => {\n    if (!commands.value.has(name)) {\n      if (throwOnNonexisting) {\n        throw new Error(`[CommandHandler] Command ${name} not registered`);\n      } else {\n        return false;\n      }\n    }\n    return commands.value.get(name).canExecute(args);\n  };\n  const hotkeyHandler = useHotkeyHandler(executeCommand);\n  return reactive({ registerCommand, executeCommand, canExecuteCommand, ...hotkeyHandler });\n};\nconst isTemplate = (g) => !(g instanceof Graph);\nfunction useSwitchGraph(editor, displayedGraph) {\n  const switchGraph = (newGraph) => {\n    let newGraphInstance;\n    if (!isTemplate(newGraph)) {\n      if (newGraph !== editor.value.graph) {\n        throw new Error(\n          \"Can only switch using 'Graph' instance when it is the root graph. Otherwise a 'GraphTemplate' must be used.\"\n        );\n      }\n      newGraphInstance = newGraph;\n    } else {\n      newGraphInstance = new Graph(editor.value);\n      newGraph.createGraph(newGraphInstance);\n      newGraphInstance.inputs.forEach((input) => {\n        const node = new SubgraphInputNode();\n        node.inputs.name.value = input.name;\n        node.graphInterfaceId = input.id;\n        newGraphInstance.addNode(node);\n        const targetInterface = newGraphInstance.findNodeInterface(input.nodeInterfaceId);\n        if (!targetInterface) {\n          console.warn(`Could not find target interface ${input.nodeInterfaceId} for subgraph input node`);\n          return;\n        }\n        newGraphInstance.addConnection(node.outputs.placeholder, targetInterface);\n      });\n      newGraphInstance.outputs.forEach((output) => {\n        const node = new SubgraphOutputNode();\n        node.inputs.name.value = output.name;\n        node.graphInterfaceId = output.id;\n        newGraphInstance.addNode(node);\n        const targetInterface = newGraphInstance.findNodeInterface(output.nodeInterfaceId);\n        if (!targetInterface) {\n          console.warn(`Could not find target interface ${output.nodeInterfaceId} for subgraph input node`);\n          return;\n        }\n        newGraphInstance.addConnection(targetInterface, node.inputs.placeholder);\n      });\n    }\n    if (displayedGraph.value && displayedGraph.value !== editor.value.graph) {\n      displayedGraph.value.destroy();\n    }\n    newGraphInstance.panning = newGraphInstance.panning ?? newGraph.panning ?? { x: 0, y: 0 };\n    newGraphInstance.scaling = newGraphInstance.scaling ?? newGraph.scaling ?? 1;\n    newGraphInstance.selectedNodes = newGraphInstance.selectedNodes ?? [];\n    newGraphInstance.sidebar = newGraphInstance.sidebar ?? { visible: false, nodeId: \"\", optionName: \"\" };\n    displayedGraph.value = newGraphInstance;\n  };\n  return { switchGraph };\n}\nfunction setViewNodeProperties(node) {\n  node.position = node.position ?? { x: 0, y: 0 };\n  node.disablePointerEvents = false;\n  node.twoColumn = node.twoColumn ?? false;\n  node.width = node.width ?? 200;\n}\nfunction useBaklava(existingEditor) {\n  const editor = ref(existingEditor ?? new Editor$1());\n  const token = Symbol(\"ViewModelToken\");\n  const _displayedGraph = ref(null);\n  const displayedGraph = shallowReadonly(_displayedGraph);\n  const { switchGraph } = useSwitchGraph(editor, _displayedGraph);\n  const isSubgraph = computed(() => displayedGraph.value && displayedGraph.value !== editor.value.graph);\n  const settings = reactive({\n    useStraightConnections: false,\n    enableMinimap: false,\n    background: {\n      gridSize: 100,\n      gridDivision: 5,\n      subGridVisibleThreshold: 0.6\n    }\n  });\n  const commandHandler = useCommandHandler();\n  const history = useHistory(displayedGraph, commandHandler);\n  const clipboard = useClipboard(displayedGraph, editor, commandHandler);\n  const hooks = {\n    renderNode: new SequentialHook(null),\n    renderInterface: new SequentialHook(null)\n  };\n  registerGraphCommands(displayedGraph, commandHandler, switchGraph);\n  registerSidebarCommands(displayedGraph, commandHandler);\n  watch(\n    editor,\n    (newValue, oldValue) => {\n      if (oldValue) {\n        oldValue.events.registerGraph.unsubscribe(token);\n        oldValue.graphEvents.beforeAddNode.unsubscribe(token);\n        newValue.nodeHooks.beforeLoad.unsubscribe(token);\n        newValue.nodeHooks.afterSave.unsubscribe(token);\n        newValue.graphTemplateHooks.beforeLoad.unsubscribe(token);\n        newValue.graphTemplateHooks.afterSave.unsubscribe(token);\n      }\n      if (newValue) {\n        newValue.nodeHooks.beforeLoad.subscribe(token, (state, node) => {\n          node.position = state.position ?? { x: 0, y: 0 };\n          node.width = state.width ?? 200;\n          node.twoColumn = state.twoColumn ?? false;\n          return state;\n        });\n        newValue.nodeHooks.afterSave.subscribe(token, (state, node) => {\n          state.position = node.position;\n          state.width = node.width;\n          state.twoColumn = node.twoColumn;\n          return state;\n        });\n        newValue.graphTemplateHooks.beforeLoad.subscribe(token, (state, template) => {\n          template.panning = state.panning;\n          template.scaling = state.scaling;\n          return state;\n        });\n        newValue.graphTemplateHooks.afterSave.subscribe(token, (state, template) => {\n          state.panning = template.panning;\n          state.scaling = template.scaling;\n          return state;\n        });\n        newValue.graphEvents.beforeAddNode.subscribe(token, (node) => setViewNodeProperties(node));\n        editor.value.registerNodeType(SubgraphInputNode, { category: \"Subgraphs\" });\n        editor.value.registerNodeType(SubgraphOutputNode, { category: \"Subgraphs\" });\n        switchGraph(newValue.graph);\n      }\n    },\n    { immediate: true }\n  );\n  return reactive({\n    editor,\n    displayedGraph,\n    isSubgraph,\n    settings,\n    commandHandler,\n    history,\n    clipboard,\n    hooks,\n    switchGraph\n  });\n}\nconst components = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  Connection: ConnectionView,\n  ConnectionWrapper,\n  TemporaryConnection,\n  Node: _sfc_main$q,\n  NodeInterface,\n  ContextMenu,\n  Minimap,\n  Sidebar\n}, Symbol.toStringTag, { value: \"Module\" }));\nexport {\n  ButtonInterface,\n  ButtonInterfaceComponent,\n  CheckboxInterface,\n  CheckboxInterfaceComponent,\n  commandList as Commands,\n  components as Components,\n  Editor as EditorComponent,\n  IntegerInterface,\n  IntegerInterfaceComponent,\n  NumberInterface,\n  NumberInterfaceComponent,\n  SelectInterface,\n  SelectInterfaceComponent,\n  SliderInterface,\n  SliderInterfaceComponent,\n  TextInputInterface,\n  TextInputInterfaceComponent,\n  TextInterface,\n  providePlugin,\n  useBaklava,\n  useCommandHandler,\n  useDragMove,\n  useGraph,\n  useTransform,\n  useViewModel\n};\n"],"names":["Subscribable","constructor","this","listenerMap","Map","_listeners","proxyMap","proxies","listeners","concat","flatMap","getListeners","subscribe","token","callback","has","console","warn","unsubscribe","set","push","get","delete","i","indexOf","splice","registerProxy","unregisterProxy","BaklavaEvent","entity","super","emit","data","forEach","l","PreventableBaklavaEvent","prevented","prevent","Array","from","values","DynamicSequentialHook","execute","currentValue","SequentialHook","ParallelHook","results","createProxy","Symbol","targets","Set","register","key","subscribable","_a","_b","addTarget","target","add","keys","removeTarget","destroy","t","clear","Proxy","startsWith","addSubscribable","viewModelRef","useViewModel","Error","viewModel","useGraph","graph","value","switchGraph","useDragMove","positionRef","draggingStartPoint","draggingStartPosition","dragging","onPointerDown","ev","x","pageX","y","pageY","onPointerMove","dx","dy","scaling","onPointerUp","useTransform","transform","panning","TemporaryConnectionState","TemporaryConnectionState2","_export_sfc","sfc","props","__vccOpts","val","Background","setup","styles","config","settings","background","positionLeft","positionTop","size","gridSize","subSize","gridDivision","backgroundPosition","backgroundSize","subGridVisibleThreshold","_ctx","_cache","$props","$setup","$data","$options","class","style","isClient","window","noop","navigator","userAgent","test","__defProp$7","Object","defineProperty","__defProps$5","defineProperties","__getOwnPropDescs$5","getOwnPropertyDescriptors","__getOwnPropSymbols$9","getOwnPropertySymbols","__hasOwnProp$9","prototype","hasOwnProperty","__propIsEnum$9","propertyIsEnumerable","__defNormalProp$7","obj","enumerable","configurable","writable","__spreadValues$7","a","b","prop","call","unrefElement","elRef","_a2","plain","r","$el","defaultWindow","useEventListener","args","events","options","isArray","cleanups","cleanup","fn","length","stopWatch","el","event","map","listener","addEventListener","removeEventListener","immediate","flush","stop","onClickOutside","handler","window2","ignore","capture","detectIframe","fallback","shouldListen","shouldIgnore","some","target2","document","querySelectorAll","composedPath","includes","clearTimeout","detail","passive","e","button","path","setTimeout","activeElement","tagName","contains","filter","Boolean","location","_global","globalThis","global","self","globalKey","__defProp$5","__defProps$1","__getOwnPropDescs$1","__getOwnPropSymbols$5","__hasOwnProp$5","__propIsEnum$5","__defNormalProp$5","defaultState","pointerId","pressure","tiltX","tiltY","width","height","twist","pointerType","SwipeDirection","SwipeDirection2","__defProp","__getOwnPropSymbols","__hasOwnProp","__propIsEnum","__defNormalProp","__spreadValues","linear","arg","easeInSine","easeOutSine","easeInOutSine","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInBack","easeOutBack","easeInOutBack","_sfc_main$t","modelValue","type","default","items","required","Number","isNested","isFlipped","flippable","emits","activeMenuResetTimeout","activeMenu","rootIsFlipped","flippedX","flippedY","s","top","left","classes","itemsWithHoverProperty","hover","_c","_d","parentWidth","parentElement","offsetWidth","parentHeight","offsetHeight","onClick","item","submenu","onChildClick","onMouseEnter","index","onMouseLeave","_hoisted_1$p","_hoisted_2$j","_hoisted_3$f","_hoisted_5$7","viewBox","d","stroke","fill","ContextMenu","_component_context_menu","name","ref","isDivider","disabled","onMouseenter","$event","onMouseleave","label","_","_sfc_main$s","_hoisted_1$o","xmlns","_hoisted_6$4","cx","cy","VerticalDots","_sfc_main$r","node","intf","hoveredOver","isConnected","connectionCount","isInput","showComponent","component","port","onRender","hooks","renderInterface","startHover","endHover","openSidebar","sidebar","displayedGraph","nodeId","id","optionName","visible","_hoisted_1$n","_hoisted_2$h","NodeInterface","onPointerover","onPointerout","onOpenSidebar","_hoisted_1$m","_hoisted_2$g","_hoisted_3$d","_hoisted_4$b","_hoisted_5$5","_hoisted_6$3","_hoisted_7$1","_hoisted_8$1","_sfc_main$q","__name","selected","__props","dragMove","renaming","tempName","renameInputEl","showContextMenu","contextMenuItems","twoColumn","position","displayedInputs","inputs","ni","hidden","displayedOutputs","outputs","select","startDrag","stopDrag","openContextMenu","onContextMenuClick","async","action","removeNode","title","focus","template","doneRenaming","renderNode","ref_key","onPointerdown","placeholder","onBlur","onKeydown","output","input","_sfc_main$p","x1","y1","x2","y2","state","NONE","isTemporary","tx1","ty1","tx2","ty2","useStraightConnections","Math","abs","ALLOWED","FORBIDDEN","_hoisted_1$l","ConnectionView","getDomElements","interfaceDOM","getElementById","portDOM","getElementsByClassName","closest","interface","ConnectionWrapper","components","connection","resizeObserver","isInDanger","fromNodePosition","findNodeById","toNodePosition","to","getPortCoordinates2","resolved","offsetLeft","clientWidth","offsetTop","clientHeight","updateCoords","ResizeObserver","observe","disconnect","deep","_component_connection_view","getPortCoordinates","TemporaryConnection","status","start","end","mx","my","_sfc_main$m","nodes","find","displayedInterfaces","displayInSidebar","onMouseMove","maxwidth","getBoundingClientRect","movementX","startResize","once","close","_hoisted_1$k","_hoisted_2$f","Sidebar","onMousedown","tabindex","Minimap","canvas","showViewBounds","ctx","bounds","transformCoordinates","origX","origY","getNodeColor","domElement","content","querySelector","contentColor","getComputedColor","nodeColor","c","getComputedStyle","backgroundColor","getViewBounds","mousemove","thisX","offsetX","thisY","offsetY","viewBounds","mouseup","getContext","imageSmoothingQuality","nodeCoords","nodeDomElements","n","posX","posY","newBounds","MAX_SAFE_INTEGER","MIN_SAFE_INTEGER","nc","clearRect","strokeStyle","connections","origX1","origY1","origX2","origY2","beginPath","moveTo","lineTo","bezierCurveTo","entries","fillStyle","rect","fillRect","updateCanvas","mousedown","mouseenter","mouseleave","onMousemove","onMouseup","_sfc_main$k","String","hasContextMenu","graphTemplateId","substring","graphTemplate","editor","graphTemplates","gt","removeGraphTemplate","_hoisted_1$j","_hoisted_2$e","_hoisted_3$c","_hoisted_4$a","PaletteEntry","_component_vertical_dots","getRandomValues","rnds8","Uint8Array","rng","crypto","bind","byteToHex","toString","slice","native","randomUUID","v4","buf","offset","rnds","random","arr","toLowerCase","unsafeStringify","_sfc_main$j","_hoisted_1$i","ButtonInterfaceComponent","ButtonInterface","setPort","_sfc_main$i","_hoisted_1$h","_hoisted_2$d","_hoisted_3$b","CheckboxInterfaceComponent","CheckboxInterface","arguments","BaseNumericInterface","min","max","validate","v","useBaseNumericInterface","precision","inputEl","editMode","invalid","tempValue","stringRepresentation","toFixed","toExponential","MAX_STRING_LENGTH","isNaN","isValidator","setValue","newValue","enterEditMode","leaveEditMode","parseFloat","_sfc_main$h","_hoisted_1$g","_hoisted_3$a","points","Arrow","_sfc_main$g","baseNumericInterface","increment","decrement","_hoisted_1$f","_hoisted_2$b","_hoisted_3$9","_hoisted_4$9","IntegerInterfaceComponent","_component_i_arrow","IntegerInterface","isInteger","_sfc_main$f","_hoisted_1$e","_hoisted_2$a","_hoisted_3$8","_hoisted_4$8","NumberInterfaceComponent","NumberInterface","_sfc_main$e","open","selectedItem","selectedText","text","setSelected","_hoisted_1$d","_hoisted_2$9","_hoisted_3$7","_hoisted_4$7","_hoisted_5$4","_hoisted_6$2","_hoisted_7","SelectInterfaceComponent","SelectInterface","_sfc_main$d","didSlide","isMouseDown","percentage","_hoisted_1$c","_hoisted_2$8","_hoisted_3$6","_hoisted_4$6","SliderInterfaceComponent","onPointerup","onPointermove","onPointerleave","TextInterfaceComponent","TextInterface","_sfc_main$b","v2","_hoisted_1$b","TextInputInterfaceComponent","TextInputInterface","SUBGRAPH_INPUT_NODE_TYPE","SUBGRAPH_OUTPUT_NODE_TYPE","SubgraphInputNode","onCreate","graphInterfaceId","SubgraphOutputNode","checkRecursion","currentGraph","graphNodeType","_sfc_main$a","mouseX","mouseY","isInside","initialValue","assign","pointerTypes","keys2","omitUndefined","reduce","k","objectPick","__spreadValues$5","objectRef","result","copy","newObject","setPrototypeOf","toRefs","usePointer","editorEl","draggedNode","categories","nodeTypeEntries","nodeTypes","categoryNames","category","categories2","nodeTypesInCategory","nt","fromEntries","sort","draggedNodeStyles","onDragStart","nodeInformation","onDragEnd","instance","addNode","_hoisted_1$a","_hoisted_2$7","NodePalette","_component_PaletteEntry","SAVE_SUBGRAPH_COMMAND","CREATE_SUBGRAPH_COMMAND","IGNORE_NODE_TYPES","DELETE_NODES_COMMAND","SWITCH_TO_MAIN_GRAPH_COMMAND","NodeStep","nodeState","undo","redo","nodeType","load","save","ConnectionStep","connectionId","connectionState","removeConnection","addConnection","fromIntf","findNodeInterface","toIntf","TransactionStep","steps","UNDO_COMMAND","REDO_COMMAND","START_TRANSACTION_COMMAND","COMMIT_TRANSACTION_COMMAND","COPY_COMMAND","PASTE_COMMAND","CLEAR_CLIPBOARD_COMMAND","OPEN_SIDEBAR_COMMAND","toStringTag","_sfc_main$9","_hoisted_1$9","_hoisted_4$5","ArrowBackUp","_sfc_main$8","_hoisted_1$8","_hoisted_4$4","ArrowForwardUp","_sfc_main$7","_hoisted_1$7","_hoisted_6$1","ArrowLeft","_sfc_main$6","_hoisted_1$6","_hoisted_5$2","rx","Clipboard","_sfc_main$5","_hoisted_1$5","_hoisted_5$1","Copy","_sfc_main$4","_hoisted_1$4","_hoisted_6","DeviceFloppy","_sfc_main$3","_hoisted_1$3","_hoisted_8","Hierarchy2","_sfc_main$2","command","icon","_hoisted_1$2","ToolbarButton","commandHandler","canExecuteCommand","executeCommand","_sfc_main$1","isSubgraph","commands","subgraphCommands","_hoisted_1$1","Toolbar","_component_toolbar_button","_sfc_main","Node","viewModelRef2","selectedNodes","panZoom","pointerCache","prevDiff","midpoint","applyZoom","centerX","centerY","newScale","currentPoint","newPoint","diff","getCoordsFromCache","ax","clientX","ay","clientY","bx","by","curDiff","sqrt","p","onMouseWheel","preventDefault","scrollAmount","deltaY","deltaMode","usePanZoom","temporaryConnection","hoveringOver","checkConnectionResult","checkConnection","connectionAllowed","ids","connectionsInDanger","onMouseDown","onMouseUp","useTemporaryConnection","nodeContainerStyle","counter","unselectAllNodes","keyDown","handleKeyDown","keyUp","handleKeyUp","selectNode","pressedKeys","mouseWheel","_hoisted_1","Editor","_component_background","_component_toolbar","_component_node_palette","_component_connection_wrapper","_component_temporary_connection","_component_node","_component_sidebar","_component_minimap","onWheel","onKeyup","$slots","onSelect","enableMinimap","useCommandHandler","throwOnNonexisting","hotkeyHandler","handlers","h","every","commandName","registerHotkey","useHotkeyHandler","registerCommand","canExecute","isTemplate","g","useBaklava","existingEditor","_displayedGraph","newGraph","newGraphInstance","createGraph","targetInterface","nodeInterfaceId","useSwitchGraph","history","maxSteps","changeBySelf","currentIndex","activeTransaction","transactionSteps","addStep","step","shift","canUndo","canRedo","oldGraph","conn","useHistory","clipboard","nodeBuffer","connectionBuffer","isEmpty","findInterface","io","intf2","interfacesOfSelectedNodes","JSON","stringify","idmap","parsedNodeBuffer","parse","parsedConnectionBuffer","newNodes","newConnections","copiedNode","generatedId","tapInterfaces","intfs","intfState","newIntfId","beforeLoad","ns","newConnection","useClipboard","registerDeleteNodesCommand","selectedNodesInputs","selectedNodesOutputs","inputConnections","outputConnections","innerConnections","inputInterfaces","outputInterfaces","interfaceIdMap","graphInputs","newId","graphOutputs","subgraphTemplate","addGraphTemplate","averageX","round","averageY","registerCreateSubgraphCommand","interfaceConnections","inputNodes","outputNodes","update","registerSaveSubgraphCommand","registerSwitchToMainGraphCommand","registerGraphCommands","registerOpenSidebarCommand","registerSidebarCommands","oldValue","registerGraph","graphEvents","beforeAddNode","nodeHooks","afterSave","graphTemplateHooks","disablePointerEvents","setViewNodeProperties","registerNodeType","freeze","__proto__","Connection"],"sourceRoot":""}