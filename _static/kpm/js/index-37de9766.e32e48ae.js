(self.webpackChunkpipeline_manager=self.webpackChunkpipeline_manager||[]).push([[637],{274:(e,n,t)=>{"use strict";t.d(n,{J:()=>l,n:()=>s});var o=t(50953),a=t(20641),i=t(63491);const l={NONE:0,ALLOWED:1,FORBIDDEN:2};function s(){const{graph:e}=(0,i.uU)(),n=(0,o.KR)(null),t=(0,o.KR)(null),s=(0,o.KR)(!1);let r=null;return(0,a.Gt)("hoveredOver",(o=>{if(t.value=o??null,o&&n.value&&s.value){n.value.to=o;const t=e.value.checkConnection(n.value.from,n.value.to);if(n.value.status=t.connectionAllowed?l.ALLOWED:l.FORBIDDEN,t.connectionAllowed){const n=t.connectionsInDanger.map((e=>e.id));e.value.connections.forEach((e=>{n.includes(e.id)&&(e.isInDanger=!0)}))}}else!o&&n.value&&(n.value.to=void 0,n.value.status=l.NONE,e.value.connections.forEach((e=>{e.isInDanger=!1})))})),{temporaryConnection:n,render:s,onMouseMove:t=>{if(n.value){const o=document.elementFromPoint(t.clientX,t.clientY);"touch"===t.pointerType?(r&&r!==o&&(s.value=!0,r.dispatchEvent(new PointerEvent("pointerout")),r=null),o&&o.classList.contains("__port")&&(o.dispatchEvent(new PointerEvent("pointerover")),r=o),n.value.mx=t.clientX/e.value.scaling-e.value.panning.x,n.value.my=t.clientY/e.value.scaling-e.value.panning.y):(s.value|=r&&r!==o,n.value.mx=t.offsetX/e.value.scaling-e.value.panning.x,n.value.my=t.offsetY/e.value.scaling-e.value.panning.y)}},onMouseDown:e=>{r=e.target,t.value&&(n.value={status:l.NONE,from:t.value,to:t.value},n.value.mx=void 0,n.value.my=void 0,s.value=!1)},onMouseUp:()=>{n.value&&t.value&&s.value&&e.value.addConnection(n.value.from,n.value.to),n.value=null}}}},5419:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var o=t(20641),a=t(90033),i=t(50953);const l=(0,o.pM)({setup(){const e=(0,i.KR)(!1),n=(0,i.KR)({x:0,y:0}),t=(0,i.KR)({x:0,y:0}),a=(0,o.EW)((()=>({xBegin:n?.value.x<t?.value.x?n?.value.x:t?.value.x,yBegin:n?.value.y<t?.value.y?n?.value.y:t?.value.y,xEnd:n?.value.x>=t?.value.x?n?.value.x:t?.value.x,yEnd:n?.value.y>=t?.value.y?n?.value.y:t?.value.y})));return{styles:(0,o.EW)((()=>({position:"absolute",visibility:e.value?"visible":"hidden",top:`${a.value.yBegin}px`,left:`${a.value.xBegin}px`,width:`${Math.abs(a.value.xEnd-a.value.xBegin)??0}px`,height:`${Math.abs(a.value.yEnd-a.value.yBegin)??0}px`}))),onPointerDown:o=>{e.value=!0,n.value={x:o.pageX,y:o.pageY},t.value={x:o.pageX,y:o.pageY}},onPointerMove:n=>{e.value&&(t.value={x:n.pageX,y:n.pageY})},onPointerUp:()=>{e.value=!1,n.value={x:0,y:0},t.value={x:0,y:0}},selecting:e,boundingRect:a}}}),s=(0,t(66262).A)(l,[["render",function(e,n,t,i,l,s){return(0,o.uX)(),(0,o.CE)("div",{class:"rectangle-selection-border",style:(0,a.Tr)(e.styles)},n[0]||(n[0]=[(0,o.Lk)("div",{class:"rectangle-selection"},null,-1)]),4)}]])},5828:(e,n,t)=>{"use strict";t.d(n,{A:()=>i});var o=t(63491),a=t(58365);function i(e,n=void 0,t=void 0){const{graph:i}=(0,o.uU)(),l=(0,a.A)(e,t,n),s=l.onPointerMove;return l.onPointerMove=t=>{const o=e.value.x,a=e.value.y;s(t);const l=e.value.x-o,r=e.value.y-a;i.value.selectedNodes.forEach((e=>{e.id!==n&&(e.position.x+=l,e.position.y+=r)}))},l}},13859:(e,n,t)=>{"use strict";t.d(n,{A:()=>ae});var o=t(20641),a=t(90033),i=t(53751);const l={class:"search-bar"},s={class:"__entry_search"},r={class:"nodes"};var u=t(50953),c=t(63491),d=t(97786);const v={key:0},p=["onPointerdown"],g=["src"],y=["innerHTML"],h=["onClick"],f={class:"__icondiv"},m=["onClick"],b=["onClick","onPointerdown"],E=["src"],w=["innerHTML"],k=["onClick"],x={class:"__icondiv"},C=["innerHTML"],M=["onPointerdown"],T=["src"],_=["innerHTML"],N=["onClick"],L={class:"__icondiv"},D={key:1,class:"__title"};var P=t(42838),S=t.n(P),X=t(22007),O=t(42573),A=t(53701),W=t(34580),R=t(1691),I=t(15531),K=t.n(I);const j=e=>{const n={},t={};return e.forEach((e=>{const[n,...o]=e.split("/"),a=n.trim();Object.keys(t).includes(a)||(t[a]=[]),o.length>0&&t[a].push(o.join("/"))})),Object.entries(t).forEach((([e,t])=>{n[e]=j(new Set(t))})),n},F=e=>{const[n,t]=e;t.hitSubstring=n,void 0!==t.categoryNode&&(t.categoryNode.hitSubstring=t.categoryNode.title),void 0!==t.nodes.nodeTypes&&Object.entries(t.nodes.nodeTypes).forEach((([,e])=>{e.hitSubstring=e.title})),Object.entries(t.subcategories).forEach((e=>F(e)))},B=e=>{e.mask=!0,void 0!==e.categoryNode&&(e.categoryNode.mask=!0),void 0!==e.nodes.nodeTypes&&Object.values(e.nodes.nodeTypes).forEach((e=>{e.mask=!0})),Object.values(e.subcategories).forEach((e=>B(e)))},$=(e,n,t="")=>{const o={};return Object.entries(e).forEach((([e,a])=>{var i;let l="";l=""===t?e:`${t}/${e}`;const s=null!==(i=n.find((e=>e.categoryName===l)))&&void 0!==i?i:{};if(0!==Object.keys(s).length){const t=[];Object.entries(s.nodeTypes).forEach((([e,n])=>{n.isCategory&&t.push(e)}));const i=Object.keys(s.nodeTypes),r={categoryName:s.categoryName,nodeTypes:{}};let u;i.forEach((e=>{t.includes(e)?u=s.nodeTypes[e]:r.nodeTypes[e]=s.nodeTypes[e]})),o[e]={subcategories:$(a,n,l),nodes:r,categoryNode:u,hitSubstring:e,mask:!0}}else o[e]={subcategories:$(a,n,l),nodes:{},categoryNode:void 0,hitSubstring:e,mask:!0}})),o},H=(e,n,t)=>Object.entries(e).map((([e,o])=>{var a;let i=!1;const l=K().single(n,e);null!==l&&l.score>-50?(o.hitSubstring=null!==(a=K().highlight(l,"<span>","</span>"))&&void 0!==a?a:"",i=!0):o.hitSubstring=e;let s=!1;return void 0!==o.nodes.nodeTypes&&0!==Object.keys(o.nodes.nodeTypes).length&&(s=Object.values(o.nodes.nodeTypes).map((e=>{var o;const a=K().single(n,e.title);return e.mask=null!==a&&a.score>-50||i||t,e.hitSubstring=null!==a?null!==(o=K().highlight(a,"<span>","</span>"))&&void 0!==o?o:"":e.title,e.mask})).includes(!0)),o.mask=H(o.subcategories,n,i||t)||i||s||t,o.mask})).includes(!0);let U;const Y=[W.Wx,W.dH],Q=(0,o.pM)({components:{Arrow:X.A,LinkMenu:A.A,VerticalEllipsis:O.A,Cross:R.A},props:{nodeTree:{required:!0},onDragStart:{required:!0},depth:{type:Number,default:0},defaultCollapse:{type:Boolean,default:!0},tooltip:{required:!1},nodeSearch:{type:String,required:!0}},data:()=>({DOMPurify:S()}),setup(e){const{viewModel:n}=(0,c.if)(),t=e=>0!==Object.keys(e.nodes.nodeTypes??{}).length||0!==Object.keys(e.subcategories).length,a=(0,u.KR)(Array(Object.keys(e.nodeTree.subcategories??{}).length).fill(!e.defaultCollapse));let i=a.value;(0,o.wB)((()=>e.nodeTree),(()=>{a.value=Array(Object.keys(e.nodeTree.subcategories??{}).length).fill(!e.defaultCollapse)})),(0,o.wB)((()=>e.nodeSearch),((n,t)=>{""!==n&&""===t?(i=a.value,a.value=Array(Object.keys(e.nodeTree.subcategories??{}).length).fill(!0)):""===n&&""!==t&&(a.value=i)}));const l=e=>Y.includes(e),s=(0,o.WQ)("menu"),r=W.Ay.getEditorManagerInstance(),d=(0,o.EW)((()=>r.specificationLoaded.value));return{padding:(e,n=!1)=>n?"padding-left: 0":`padding-left: ${10+30*e}px`,mask:a,onMouseDown:e=>{a.value.splice(e,1,!a.value[e])},getRotation:e=>a.value[e]?"left":"right",sortedEntries:(e,n=!1)=>Object.entries(e).sort((([e,o],[a,i])=>{if(e===W.Wx)return-1;if(a===W.Wx)return 1;if(!l(e)&&l(a))return 1;if(l(e)&&!l(a))return-1;if(n){if(t(o)&&!t(i))return 1;if(!t(o)&&t(i))return-1}return e.toLowerCase().localeCompare(a.toLowerCase())})),getIconPath:e=>n.value.cache[`./${e}`]??e,isCategoryNode:e=>void 0!==e?.categoryNode,notEmptyCategory:t,showMenu:s,showMenuClick:e=>{s.value=s.value.hitSubstring!==e.hitSubstring&&e},closeMenu:()=>{s.value&&(s.value=!1)},specificationLoaded:d,nodeEntryClasses:e=>({__entry:!0,"__node-entry":!0,"__top-level-node-entry":l(e)}),isTopLevelNode:l}}});var z=t(66262);const q=(0,z.A)(Q,[["render",function(e,n,t,l,s,r){const u=(0,o.g2)("Cross"),c=(0,o.g2)("VerticalEllipsis"),d=(0,o.g2)("LinkMenu"),P=(0,o.g2)("Arrow"),S=(0,o.g2)("PaletteCategory",!0),X=(0,o.gN)("click-outside");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bo)((0,o.Lk)("div",null,[e.nodeTree.nodes.nodeTypes?((0,o.uX)(),(0,o.CE)("div",v,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.sortedEntries(e.nodeTree.nodes.nodeTypes),(([t,l])=>(0,o.bo)(((0,o.uX)(),(0,o.CE)("div",{style:(0,a.Tr)([{width:"100%"},e.padding(e.depth)]),class:(0,a.C4)(e.nodeEntryClasses(t)),key:t},[(0,o.Lk)("div",{onPointerdown:n=>e.onDragStart(t,l,l.iconPath),class:(0,a.C4)(e.nodeEntryClasses(t))},[e.isTopLevelNode(t)?((0,o.uX)(),(0,o.Wv)(u,{key:1,color:"white",rotate:45,class:"__title-icon"})):((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[void 0!==l.iconPath?((0,o.uX)(),(0,o.CE)("img",{key:0,class:"__title-icon",src:e.getIconPath(l.iconPath),draggable:"false"},null,8,g)):(0,o.Q3)("",!0)],64)),(0,o.Lk)("div",{class:"__title-label",innerHTML:e.DOMPurify.sanitize(l.hitSubstring)},null,8,y)],42,p),0!==l.URLs.length?((0,o.uX)(),(0,o.CE)("div",{key:0,class:"__vertical_ellipsis",ref_for:!0,ref:"settings",role:"button",onPointerdown:n[0]||(n[0]=(0,i.D$)((()=>{}),["stop"])),onClick:(0,i.D$)((()=>e.showMenuClick(l)),["stop"])},[(0,o.bF)(c,{class:"smaller_svg"})],40,h)):(0,o.Q3)("",!0),(0,o.Lk)("div",f,[!1!==e.showMenu&&e.showMenu.hitSubstring===l.hitSubstring?(0,o.bo)(((0,o.uX)(),(0,o.Wv)(d,{key:0,node:e.showMenu,style:{width:"18em"}},null,8,["node"])),[[X,e.closeMenu]]):(0,o.Q3)("",!0)])],6)),[[i.aG,l.mask]]))),128))])):(0,o.Q3)("",!0)],512),[[i.aG,e.nodeTree.mask]]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.sortedEntries(e.nodeTree.subcategories,!0),(([t,l],s)=>(0,o.bo)(((0,o.uX)(),(0,o.CE)("div",{key:t},[e.notEmptyCategory(l)?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.Lk)("div",{class:"__entry __category",onClick:n=>e.onMouseDown(s),style:(0,a.Tr)(e.padding(e.depth))},[(0,o.bF)(P,{rotate:e.getRotation(s),scale:"small"},null,8,["rotate"]),e.isCategoryNode(l)?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.bo)(((0,o.uX)(),(0,o.CE)("div",{class:"__entry __node-entry",key:l.title,onClick:n=>e.onMouseDown(s),onPointerdown:n=>e.onDragStart(l.title,l.categoryNode,l.iconPath)},[void 0!==l.categoryNode.iconPath?((0,o.uX)(),(0,o.CE)("img",{key:0,class:"__title-icon",src:e.getIconPath(l.categoryNode.iconPath),draggable:"false"},null,8,E)):(0,o.Q3)("",!0),(0,o.Lk)("div",{class:"__title-label",innerHTML:e.DOMPurify.sanitize(l.hitSubstring)},null,8,w),0!==l.categoryNode.URLs.length?((0,o.uX)(),(0,o.CE)("div",{key:1,class:"__vertical_ellipsis",ref_for:!0,ref:"settings",role:"button",onPointerdown:n[1]||(n[1]=(0,i.D$)((()=>{}),["stop"])),onClick:(0,i.D$)((()=>e.showMenuClick(l)),["stop"])},[(0,o.bF)(c,{class:"smaller_svg"})],40,k)):(0,o.Q3)("",!0)],40,b)),[[i.aG,l.mask]]),(0,o.Lk)("div",x,[!1!==e.showMenu&&e.showMenu.hitSubstring===l.hitSubstring?(0,o.bo)(((0,o.uX)(),(0,o.Wv)(d,{key:0,node:e.showMenu.categoryNode,style:{width:"18em"}},null,8,["node"])),[[X,e.closeMenu]]):(0,o.Q3)("",!0)])],64)):((0,o.uX)(),(0,o.CE)("div",{key:1,class:"__title",innerHTML:e.DOMPurify.sanitize(l.hitSubstring)},null,8,C))],12,m),(0,o.bo)((0,o.Lk)("div",null,[(0,o.bF)(S,{nodeTree:l,onDragStart:e.onDragStart,depth:e.depth+1,defaultCollapse:e.defaultCollapse,tooltip:e.tooltip,nodeSearch:e.nodeSearch},null,8,["nodeTree","onDragStart","depth","defaultCollapse","tooltip","nodeSearch"])],512),[[i.aG,e.mask[s]]])],64)):((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[e.isCategoryNode(l)?(0,o.bo)(((0,o.uX)(),(0,o.CE)("div",{class:(0,a.C4)(e.nodeEntryClasses(l.title)),style:(0,a.Tr)(e.padding(e.depth)),key:l.title,onPointerdown:n=>e.onDragStart(l.title,l.categoryNode,l.iconPath)},[void 0!==l.categoryNode.iconPath?((0,o.uX)(),(0,o.CE)("img",{key:0,class:"__title-icon",src:e.getIconPath(l.categoryNode.iconPath),draggable:"false"},null,8,T)):(0,o.Q3)("",!0),(0,o.Lk)("div",{class:"__title-label",innerHTML:e.DOMPurify.sanitize(l.hitSubstring)},null,8,_),0!==l.categoryNode.URLs.length?((0,o.uX)(),(0,o.CE)("div",{key:1,class:"__vertical_ellipsis",ref_for:!0,ref:"settings",role:"button",onPointerdown:n[2]||(n[2]=(0,i.D$)((()=>{}),["stop"])),onClick:(0,i.D$)((()=>e.showMenuClick(l)),["stop"])},[(0,o.bF)(c,{class:"smaller_svg"})],40,N)):(0,o.Q3)("",!0),(0,o.Lk)("div",L,[!1!==e.showMenu&&e.showMenu.hitSubstring===l.hitSubstring?(0,o.bo)(((0,o.uX)(),(0,o.Wv)(d,{key:0,node:e.showMenu.categoryNode,style:{width:"18em"}},null,8,["node"])),[[X,e.closeMenu]]):(0,o.Q3)("",!0)])],46,M)),[[i.aG,l.mask]]):((0,o.uX)(),(0,o.CE)("div",D,(0,a.v_)(l.hitSubstring),1))],64))])),[[i.aG,l.mask]]))),128))],64)}]]),G=["src"],V=["innerHTML"],J=(0,o.pM)({props:{title:{type:String,required:!0},iconPath:{type:String,required:!1},depth:{type:Number,required:!0}},setup(e){const{viewModel:n}=(0,c.if)(),t=e=>n.value.cache[`./${e}`]??e;return{nodeIcon:(0,o.EW)((()=>t(e.iconPath))),padding:(0,o.EW)((()=>`padding-left: ${10+20*e.depth}px`)),getIconPath:t}},computed:{titleSanitized(){return S().sanitize(this.title)}}}),Z=(0,z.A)(J,[["render",function(e,n,t,i,l,s){return(0,o.uX)(),(0,o.CE)("div",{class:"__entry __node-entry __dragged",style:(0,a.Tr)(e.padding)},[void 0!==e.nodeIcon?((0,o.uX)(),(0,o.CE)("img",{key:0,class:"__title-icon",src:e.nodeIcon,draggable:"false"},null,8,G)):(0,o.Q3)("",!0),(0,o.Lk)("div",{class:"__title-label",innerHTML:e.titleSanitized},null,8,V)],4)}],["__scopeId","data-v-3395bfa5"]]);var ee=t(3972),ne=t(62264),te=t(8328);const oe=(0,o.pM)({components:{PaletteCategory:q,PaletteEntry:Z,Tooltip:ee.A,Magnifier:ne.A},setup(){const{viewModel:e}=(0,c.if)(),{editor:n}=e.value,{x:t,y:a}=(0,d.RcE)(),{transform:i}=(0,c.Gy)(),l=(0,u.KR)(null),s=(0,o.WQ)("editorEl"),r=(0,u.KR)(null),v=(0,u.KR)(null),p=(0,u.KR)(null),g=(0,u.KR)(null);v.value={top:0,left:0,visible:!1,text:""};const y=(0,o.EW)((()=>{if(!r.value||!s?.value)return{};const{left:e,top:n}=s.value.getBoundingClientRect();return{top:a.value-n+"px",left:t.value-e+"px"}}));function h(n){e.value.displayedGraph.addNode(n),n.position.x=p.value,n.position.y=g.value}(0,o.wB)((()=>te.x.configurationMenu.visible),(async(e,t)=>{if(!0===t&&!1===e&&te.x.configurationMenu.placeNode){const e=te.c.nodeData.name,t=new(n.nodeTypes.get(e).type);te.x.configurationMenu.addNode&&te.c.success&&h(t)}}));const f=e=>{if(!document.elementsFromPoint(e.clientX,e.clientY).includes(l.value)){const e=s.value.getBoundingClientRect();[p.value,g.value]=i(t.value-e.left,a.value-e.top),r.value.type===W.Wx?(te.x.configurationMenu.visible=!te.x.configurationMenu.visible,te.x.configurationMenu.addNode=!0,te.x.configurationMenu.placeNode=!0):h(new r.value.nodeInformation.type),r.value=null,document.removeEventListener("pointerup",f),document.removeEventListener("keydown",m)}},m=e=>{"Escape"===e.key&&(r.value=null,document.removeEventListener("pointerup",f),document.removeEventListener("keydown",m))},b=(0,u.KR)(""),E=(0,u.KR)(0),w=(0,u.KR)(!1);(0,o.Gt)("menu",w);const k=(0,o.EW)((()=>function(e){const{viewModel:n}=(0,c.if)(),{editor:t}=n.value,a=W.Ay.getEditorManagerInstance(),i=Array.from(t.nodeTypes.entries()),l=new Set(i.map((([,e])=>e.category))),s={categoryName:"TopLevel",nodeTypes:{}},r=[];l.forEach((e=>{if(""===e)return void i.filter((([,e])=>""===e.category)).forEach((([e,n])=>{s.nodeTypes[e]=Object.assign(Object.assign({},n),{isCategory:n.isCategory,mask:!0,hitSubstring:n.title,iconPath:t.getNodeIconPath(e),URLs:t.getNodeURLs(e)})}));let n=i.filter((([,n])=>n.category===e));const o=Object.fromEntries(n.map((e=>{const[n]=e;return[n,t.getNodeURLs(n)]}))),l=Object.fromEntries(n.map((e=>{const[n]=e;return[n,t.getNodeIconPath(n)]})));let u=n.filter((([e,n])=>Y.includes(e)));if(n=n.filter((([e,n])=>!Y.includes(e))),a.baklavaView.settings.editableNodeTypes||(u=u.filter((([e,n])=>e!==W.Wx))),a.baklavaView.settings.newGraphNode||(u=u.filter((([e,n])=>e!==W.dH))),n.length>0){const t=n.map((([e,n])=>[e,Object.assign(Object.assign({},n),{isCategory:n.isCategory,mask:!0,hitSubstring:n.title,iconPath:l[e],URLs:o[e]})]));r.push({categoryName:e,nodeTypes:Object.fromEntries(t)})}u.forEach((([e,n])=>{s.nodeTypes[e]=Object.assign(Object.assign({},n),{isCategory:n.isCategory,mask:!0,hitSubstring:n.title,iconPath:l[e],URLs:o[e]})}))}));const u=new Set(r.map((e=>e.categoryName))),d=j(u),v=$(d,r);U&&U();const p={subcategories:v,nodes:s,categoryNode:void 0,hitSubstring:"TopLevel",mask:!0},g={All:p};return U=(0,o.wB)(e,(e=>{""===e?(Object.entries(g).forEach((e=>F(e))),Object.values(g).forEach((e=>B(e)))):H(g,e.toLowerCase(),!1)})),p}(b))),x=(0,o.EW)((()=>e.value.collapseSidebar));return(0,o.sV)((()=>{(0,o.EW)((()=>document.querySelector(".nodes"))).value.addEventListener("scroll",(e=>{E.value=e.target.scrollTop;const n=document.getElementsByClassName("__icondiv");for(let e=0;e<n.length;e+=1)n[e].style.translate=`0px -${E.value.toString()}px`}))})),{draggedNodeStyles:y,draggedNode:r,onDragStart:(e,n,t)=>{r.value={type:e,nodeInformation:n,iconPath:t},document.addEventListener("pointerup",f),document.addEventListener("keydown",m)},nodeTree:k,collapse:x,tooltip:v,nodeSearch:b,paletteRef:l,scroll:E}}}),ae=(0,z.A)(oe,[["render",function(e,n,t,u,c,d){const v=(0,o.g2)("Magnifier"),p=(0,o.g2)("PaletteCategory"),g=(0,o.g2)("Tooltip"),y=(0,o.g2)("PaletteEntry");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",{ref:"paletteRef",class:(0,a.C4)(["baklava-node-palette export-hidden",{"hidden-navbar":e.$isMobile}])},[(0,o.Lk)("div",l,[n[1]||(n[1]=(0,o.Lk)("div",{class:"palette-title"},[(0,o.Lk)("span",null,"Nodes browser")],-1)),(0,o.Lk)("div",s,[(0,o.bF)(v,{color:"gray"}),(0,o.bo)((0,o.Lk)("input",{class:"node-search","onUpdate:modelValue":n[0]||(n[0]=n=>e.nodeSearch=n),placeholder:"Search"},null,512),[[i.Jo,e.nodeSearch]])])]),(0,o.Lk)("div",r,[(0,o.bF)(p,{nodeTree:e.nodeTree,onDragStart:e.onDragStart,defaultCollapse:e.collapse,tooltip:e.tooltip,nodeSearch:e.nodeSearch},null,8,["nodeTree","onDragStart","defaultCollapse","tooltip","nodeSearch"])]),(0,o.bo)((0,o.bF)(g,{text:e.tooltip.text,left:e.tooltip.left,top:e.tooltip.top-60},null,8,["text","left","top"]),[[i.aG,e.tooltip.visible]])],2),(0,o.bF)(i.eB,{name:"fade"},{default:(0,o.k6)((()=>[e.draggedNode?((0,o.uX)(),(0,o.CE)("div",{key:0,class:"baklava-dragged-node",style:(0,a.Tr)(e.draggedNodeStyles)},[(0,o.bF)(y,{title:e.draggedNode.nodeInformation.title,iconPath:e.draggedNode.iconPath,isDragged:!0,depth:0},null,8,["title","iconPath"])],4)):(0,o.Q3)("",!0)])),_:1})],64)}]])},35334:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var o=t(20641),a=t(63491),i=t(49690);const l={extends:a.XF.TemporaryConnection,components:{ConnectionView:i.A},setup(e){const{d:n,status:t}=a.XF.TemporaryConnection.setup(e),i=(0,o.EW)((()=>{let{input:t,output:o}=n.value;return e.connection.from.isInput&&([t,o]=[o,t]),{input:t,output:o}}));return{d:n,swappedD:i,status:t}}},s=(0,t(66262).A)(l,[["render",function(e,n,t,a,i,l){const s=(0,o.g2)("ConnectionView");return(0,o.uX)(),(0,o.Wv)(s,{x1:a.swappedD.input[0],y1:a.swappedD.input[1],x2:a.swappedD.output[0],y2:a.swappedD.output[1],state:a.status,connection:e.connection,"is-temporary":""},null,8,["x1","y1","x2","y2","state","connection"])}]])},49690:(e,n,t)=>{"use strict";t.d(n,{A:()=>b});var o=t(20641),a=t(53751),i=t(90033);const l={key:0},s=["d"],r=["onPointerdown"],u=["d"],c=["d"],d=["d"],v=["d"];var p=t(50953),g=t(63491),y=t(41426),h=t(60524),f=t(34580);const m=(0,o.pM)({extends:g.XF.Connection,props:{isHighlighted:{default:!1},connection:{required:!0},hover:{default:!1}},components:{Anchor:h.A},setup(e){const{classes:n}=g.XF.Connection.setup(e),{graph:t}=(0,g.uU)(),{viewModel:a}=(0,g.if)(),{interfaceTypes:i}=a.value,l=f.Ay.getEditorManagerInstance(),s=(0,p.lW)(e,"hover"),r=i.getConnectionStyle(e.connection.from,e.connection.to),u=(0,o.EW)((()=>({...n.value,"--hover":e.isHighlighted||s.value,"--dashed":"dashed"===r.interfaceConnectionPattern,"--dotted":"dotted"===r.interfaceConnectionPattern}))),c=(0,o.EW)((()=>({"--color":r.interfaceConnectionColor}))),d=(0,y.A)(700,(n=>{a.value.editor.readonly||(n.preventDefault(),t.value.removeConnection(e.connection))})),v=(e,n)=>[(e+t.value.panning.x)*t.value.scaling,(n+t.value.panning.y)*t.value.scaling],h=(0,o.EW)((()=>{const[n,t]=v(e.x1,e.y1),[o,i]=v(e.x2,e.y2);return a.value.connectionRenderer.render(n,t,o,i,e.connection)}));return{cssClasses:u,parsedNewD:(0,o.EW)((()=>{const e=h.value;if(Array.isArray(e)&&e.length){const n=[];for(let t=0;t<e.length-1;t+=1)n.push(`M ${e[t].x} ${e[t].y} L ${e[t+1].x} ${e[t+1].y}`);return n}return e})),onMouseDown:d,onMouseCtrlDown:(n,o)=>{if(a.value.editor.readonly||!a.value.connectionRenderer.supportsAnchors())return;n.preventDefault();const i={x:n.offsetX/t.value.scaling-t.value.panning.x,y:n.offsetY/t.value.scaling-t.value.panning.y,id:Date.now()};t.value.addAnchor(i,e.connection,Math.trunc((o-1)/3))},style:c,hasAnchors:(0,o.EW)((()=>void 0!==e.connection.anchors&&e.connection.anchors.length&&a.value.connectionRenderer.supportsAnchors())),removeAnchor:n=>{a.value.editor.readonly||(t.value.events.removeAnchor.emit([e.connection,n]),e.connection.anchors.splice(n,1))},editorManager:l}}}),b=(0,t(66262).A)(m,[["render",function(e,n,t,p,g,y){const h=(0,o.g2)("Anchor");return e.hasAnchors?((0,o.uX)(),(0,o.CE)("g",l,[(0,o.Lk)("path",{d:e.parsedNewD,class:"connection-wrapper baklava-connection"},null,8,s),e.hasAnchors?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.parsedNewD,((t,l)=>((0,o.uX)(),(0,o.CE)("g",{onPointerdown:[n[0]||(n[0]=(0,a.D$)(((...n)=>e.onMouseDown&&e.onMouseDown(...n)),["left","exact"])),n[1]||(n[1]=n=>{"touch"===n.pointerType&&e.onMouseDown(n)}),(0,a.D$)((n=>e.onMouseCtrlDown(n,l)),["left","ctrl","exact"])]},[(0,o.Lk)("path",{d:t,class:"connection-wrapper baklava-connection"},null,8,u),(0,o.Lk)("path",{d:t,class:(0,i.C4)(["baklava-connection",e.cssClasses]),style:(0,i.Tr)(e.style)},null,14,c)],40,r)))),256)),e.hover||!e.editorManager.baklavaView.settings.hideAnchors?((0,o.uX)(!0),(0,o.CE)(o.FK,{key:0},(0,o.pI)(e.connection.anchors,((n,t)=>((0,o.uX)(),(0,o.Wv)(h,{key:n.id,position:n,rightclickCallback:()=>e.removeAnchor(t)},null,8,["position","rightclickCallback"])))),128)):(0,o.Q3)("",!0)],64)):(0,o.Q3)("",!0)])):((0,o.uX)(),(0,o.CE)("g",{key:1,onPointerdown:[n[2]||(n[2]=(0,a.D$)(((...n)=>e.onMouseDown&&e.onMouseDown(...n)),["left","exact"])),n[3]||(n[3]=n=>{"touch"===n.pointerType&&e.onMouseDown(n)}),n[4]||(n[4]=(0,a.D$)((n=>e.onMouseCtrlDown(n,0)),["left","ctrl","exact"]))]},[(0,o.Lk)("path",{d:e.parsedNewD,class:"connection-wrapper baklava-connection"},null,8,d),(0,o.Lk)("path",{d:e.parsedNewD,class:(0,i.C4)(["baklava-connection",e.cssClasses]),style:(0,i.Tr)(e.style)},null,14,v)],32))}]])},55825:e=>{function n(e){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}n.keys=()=>[],n.resolve=n,n.id=55825,e.exports=n},57759:(e,n,t)=>{"use strict";t.d(n,{L:()=>l,i:()=>i});const o={},a=(e,n)=>({beforeMount:(t,a)=>{const i={timeout:null,newEvent:null,longPress:!1,moveEvents:0};o[t]={pointerdown:n=>{"touch"===n.pointerType&&null===i.timeout&&(i.moveEvents=0,i.longPress=!1,e(t,a,n,i),i.timeout=setTimeout((()=>{i.longPress=!0}),a.arg??500))},pointermove:()=>{i.moveEvents+=1},pointerup:e=>{"touch"===e.pointerType&&(i.longPress&&i.moveEvents<10&&n(t,a,e,i),i.timeout&&(clearTimeout(i.timeout),i.timeout=null))}},t.addEventListener("pointerdown",o[t].pointerdown),t.addEventListener("pointermove",o[t].pointermove),t.addEventListener("pointerup",o[t].pointerup)},unmounted:e=>{e.removeEventListener("pointerdown",o[e].pointerdown),e.removeEventListener("pointermove",o[e].pointermove),e.removeEventListener("pointerup",o[e].pointerup)}}),i=a(((e,n,t,o)=>{o.newEvent=t}),((e,n,t,o)=>{setTimeout((()=>n.value(o.newEvent)),50)})),l=a(((e,n,t,o)=>{o.newEvent=new PointerEvent("pointerdown",{button:2,clientX:t.clientX,clientY:t.clientY,screenX:t.screenX,screenY:t.screenY,pointerType:"mouse",relatedTarget:t.relatedTarget})}),((e,n,t,o)=>{setTimeout((()=>{e.dispatchEvent(o.newEvent)}),50)}))},58365:(e,n,t)=>{"use strict";t.d(n,{A:()=>s});var o=t(50953),a=t(20641),i=t(63491),l=t(45825);function s(e,n=void 0,t=void 0){const{graph:s}=(0,i.uU)(),{viewModel:r}=(0,i.if)(),u=null!=n?n:(0,l.i)((0,o.KR)(1)),c=(0,a.EW)((()=>r.value.settings.background.gridSize)),d=(0,l.i)(c),v={x:(0,l.Q)("x"),y:(0,l.Q)("y")},p=(0,o.KR)(null),g=(0,o.KR)(null),y=(0,o.KR)(!0),h=(0,a.EW)((()=>!(!p.value||!g.value||g.value.x===e.value.x&&g.value.y===e.value.y))),f=(e,n,o=!1,a=!1)=>{if(o&&void 0!==t){const o=v[n](e,t,s.value.selectedNodes.map((e=>e.id)));if(void 0!==o)return o}return a?d(e):y.value?u(e):e};return e.value&&(e.value.x=f(e.value.x,"x"),e.value.y=f(e.value.y,"y")),{dragging:h,onPointerDown:n=>{y.value=!n.shiftKey,p.value={x:n.pageX,y:n.pageY},g.value={x:e.value.x,y:e.value.y}},onPointerMove:n=>{y.value=!n.shiftKey;const t=n.ctrlKey,o=n.shiftKey;if(p.value&&g.value){const a=n.pageX-p.value.x,i=n.pageY-p.value.y;e.value.x=f(g.value.x+a/s.value.scaling,"x",t,o),e.value.y=f(g.value.y+i/s.value.scaling,"y",t,o)}},onPointerUp:()=>{p.value=null,g.value=null,y.value=!0}}}},62789:(e,n,t)=>{"use strict";t.d(n,{A:()=>c});var o=t(20641),a=t(50953),i=t(63491),l=t(49690);function s(e){const n=document.getElementById(e.id),t=n?.getElementsByClassName("__port");return{node:n?.closest(".baklava-node")??null,interface:n,port:t&&t.length>0?t[0]:null}}var r=t(274);const u=(0,o.pM)({extends:i.XF.ConnectionWrapper,props:{connection:{required:!0},isHighlighted:{default:!1}},components:{ConnectionView:l.A},setup(e){const n=(0,a.KR)(null),{graph:t}=(0,i.uU)();let l;const u=(0,a.KR)({x1:0,y1:0,x2:0,y2:0}),c=(0,o.EW)((()=>e.connection.isInDanger?r.J.FORBIDDEN:r.J.NONE)),d=(0,a.KR)(!1),v=(0,o.EW)((()=>t.value.findNodeById(e.connection.from.nodeId)?.position)),p=(0,o.EW)((()=>t.value.findNodeById(e.connection.to.nodeId)?.position)),g=(0,o.EW)((()=>t.value.findNodeById(e.connection.from.nodeId))),y=(0,o.EW)((()=>t.value.findNodeById(e.connection.to.nodeId))),h=(0,o.EW)((()=>[...Object.values(g.value?.inputs??{}),...Object.values(g.value?.outputs??{})].map((e=>[e.side,e.sidePosition])))),f=(0,o.EW)((()=>[...Object.values(y.value?.inputs??{}),...Object.values(y.value?.outputs??{})].map((e=>[e.side,e.sidePosition])))),m=e=>e.node&&e.interface&&e.port?[e.node.offsetLeft+e.interface.offsetLeft+e.port.offsetLeft+e.port.clientWidth/2,e.node.offsetTop+e.interface.offsetTop+e.port.offsetTop+e.port.clientHeight/2]:[0,0],b=()=>{const n=s(e.connection.from),t=s(e.connection.to);n.node&&t.node&&(l||(l=new ResizeObserver((()=>{b()})),l.observe(n.node),l.observe(t.node)));const[o,a]=m(n),[i,r]=m(t);u.value={x1:o,y1:a,x2:i,y2:r}};return(0,o.wB)([h,f],(async()=>{await(0,o.dY)(),b()})),(0,o.wB)([v,p],(async()=>{await(0,o.dY)(),b()}),{deep:!0}),(0,o.sV)((async()=>{await(0,o.dY)(),b()})),(0,o.xo)((()=>{l&&l.disconnect()})),{d:u,state:c,containsPoint:e=>e.includes(n.value.$el.firstChild),conn:n,hover:d}}}),c=(0,t(66262).A)(u,[["render",function(e,n,t,a,i,l){const s=(0,o.g2)("ConnectionView");return(0,o.uX)(),(0,o.Wv)(s,{ref:"conn",x1:e.d.x1,y1:e.d.y1,x2:e.d.x2,y2:e.d.y2,state:e.state,connection:e.connection,isHighlighted:e.isHighlighted,hover:e.hover,onMouseover:n[0]||(n[0]=n=>e.hover=!0),onMouseleave:n[1]||(n[1]=n=>e.hover=!1)},null,8,["x1","y1","x2","y2","state","connection","isHighlighted","hover"])}]])},63359:e=>{function n(e){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}n.keys=()=>[],n.resolve=n,n.id=63359,e.exports=n},80768:(e,n,t)=>{"use strict";function o(e,n,t){const o=document.getElementById(n.id),a=t,i=e.panning.x,l=e.panning.y,{scaling:s}=e,r=s*(i+n.position.x),u=s*(l+n.position.y+60),c=o.offsetWidth,d=o.offsetHeight;return r+.09999999999999998*r>a.xBegin&&r+c*s-.09999999999999998*r<a.xEnd&&u+.09999999999999998*u>a.yBegin&&u+d*s-.09999999999999998*u<a.yEnd}t.d(n,{A:()=>o})},92125:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var o=t(20641),a=t(63491),i=t(58365);function l(){const{graph:e}=(0,a.uU)();let n=[],t=-1,l={x:0,y:0};const s=()=>e.value.size().graphWidth<=500||e.value.size().graphHeight<=500;let r=4;const u=(0,o.EW)((()=>e.value.panning)),c=(0,i.A)(u),d=(n,t,o)=>{if(o<=0)return;s()&&(r=8);const a=[n/e.value.scaling-e.value.panning.x,t/e.value.scaling-e.value.panning.y],i=[n/o-e.value.panning.x,t/o-e.value.panning.y],l=[i[0]-a[0],i[1]-a[1]],u=window.innerHeight,c=window.innerWidth;(r*e.value.size().graphWidth>c/o||r*e.value.size().graphHeight>u/o||o>e.value.scaling&&e.value.size().graphHeight!==-1/0)&&(e.value.scaling=o,e.value.panning.x+=l[0],e.value.panning.y+=l[1])},v=()=>({ax:n[0].clientX,ay:n[0].clientY,bx:n[1].clientX,by:n[1].clientY});return{...c,onPointerDown:e=>{if(c.onPointerDown(e),n.length<=1&&n.push(e),2===n.length){const{ax:e,ay:n,bx:o,by:a}=v(),i=e-o,s=n-a;t=Math.sqrt(i*i+s*s),l={x:e+(o-e)/2,y:n+(a-n)/2}}},onPointerMove:o=>{if(2===n.length){for(let e=0;e<n.length;e+=1)if(o.pointerId===n[e].pointerId){n[e]=o;break}const{ax:a,ay:i,bx:s,by:r}=v(),u=a-s,c=i-r,p=Math.sqrt(u*u+c*c);if(t>0){const n=e.value.scaling*(1+(p-t)/500);d(l.x,l.y,n)}t=p}else c.onPointerMove(o)},onPointerUp:e=>{c.onPointerUp(),n=n.filter((n=>n.pointerId!==e.pointerId)),t=-1},onMouseWheel:n=>{if("textarea"===n.target.type&&"baklava-input"===n.target.className)return;n.preventDefault();let t=n.deltaY;1===n.deltaMode&&(t*=32);const o=(n=>{const t=s()?2:1.5,o=e.value.scaling*(1-n/3e3);return Math.min(o,t)})(t);d(n.clientX,n.clientY,o)},onZoomIn:()=>{const n=Math.min(1.2*e.value.scaling,1.5);d(window.innerWidth/2,window.innerHeight/2,n)},onZoomOut:()=>{d(window.innerWidth/2,window.innerHeight/2,.8*e.value.scaling)}}}}}]);
//# sourceMappingURL=index-37de9766.e32e48ae.js.map