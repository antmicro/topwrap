"use strict";(self.webpackChunkpipeline_manager=self.webpackChunkpipeline_manager||[]).push([[997],{3972:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(20641),o=n(90033);const i=(0,a.pM)({props:{top:{type:Number,default:0},left:{type:Number,default:0},text:{type:String,required:!0}},setup:e=>({styles:(0,a.EW)((()=>{const t={};return t.top=`${e.top}px`,t.left=`${e.left}px`,t}))})}),r=(0,n(66262).A)(i,[["render",function(e,t,n,i,r,s){return(0,a.uX)(),(0,a.CE)("div",{class:"__tooltip",style:(0,o.Tr)(e.styles)},(0,o.v_)(e.text),5)}]])},19071:(e,t,n)=>{n.d(t,{Ht:()=>l,N6:()=>d,yV:()=>u});var a=n(88781),o=n(34580),i=n(93617),r=n(49641);const s=(e,t)=>{const n=document.createElement("a");n.href=window.URL.createObjectURL(e),n.download=t,n.click()},l={graph:!1,minify:!1,saveName:"specification",getSave(){var e,t;const n=o.Ay.getEditorManagerInstance(),a=n.saveSpecification(),i=n.saveDataflow();if(null!==(e=a.graphs)&&void 0!==e||(a.graphs=[]),i.graphs.forEach((e=>{i.graphs.forEach((t=>{var n;const o=e.id,i=t.nodes.find((e=>e.subgraph===o));if(void 0!==i){const t=null===(n=a.nodes)||void 0===n?void 0:n.find((e=>e.name===i.name));t&&(e.id=t.subgraphId,i.subgraph=t.subgraphId)}const r=t.nodes.find((e=>{var t;return null===(t=e.relatedGraphs)||void 0===t?void 0:t.some((e=>e.id===o))})),s=t.nodes.find((e=>{var t;return null===(t=e.properties)||void 0===t?void 0:t.some((e=>"button-graph"===e.type&&e.default===o))}));if(i||r||s)if(Array.isArray(e.nodes)&&e.nodes.length)a.graphs=a.graphs.filter((t=>t.id!==e.id)),a.graphs.push(e);else{if(i){const e=a.nodes.map((e=>e.name)).indexOf(i.name),n=t.nodes.map((e=>e.name)).indexOf(i.name);delete a.nodes[e].subgraphId,delete t.nodes[n].subgraph}if(r){const e=a.nodes.map((e=>e.name)).indexOf(r.name),n=t.nodes.map((e=>e.name)).indexOf(r.name);r.relatedGraphs.length>1?(a.nodes[e].relatedGraphs=r.relatedGraphs.filter((e=>e.id!==o)),t.nodes[n].relatedGraphs=r.relatedGraphs.filter((e=>e.id!==o))):(delete a.nodes[e].relatedGraphs,delete t.nodes[n].relatedGraphs)}if(s){const e=a.nodes.map((e=>e.name)).indexOf(s.name),n=t.nodes.map((e=>e.name)).indexOf(s.name);a.nodes[e].properties=s.properties.filter((e=>!("button-graph"===e.type&&e.default===o))),t.nodes[n].properties=s.properties.filter((e=>!("button-graph"===e.type&&e.default===o)))}}}))})),Object.entries(i.metadata).forEach((([e,t])=>{void 0!==t&&(a.metadata[e]=t)})),this.graph&&(a.entryGraph=null!==(t=i.entryGraph)&&void 0!==t?t:i.graphs[0].id,i.graphs.forEach((e=>{const t=a.graphs.map((e=>e.id)).indexOf(e.id),[n,o]=-1!==t?[t,1]:[a.graphs.length,0];a.graphs.splice(n,o,e)})),a.graphs=a.graphs.filter((e=>Array.isArray(e.nodes)&&e.nodes.length))),this.minify&&a.nodes){const e=o.Ay.getUsedNames([...i.graphs,...a.graphs]);a.nodes=o.Ay.minifySpecificationNodes(a.nodes,e),a.nodes.length||delete a.nodes}return a},saveCallback(){const e=this.getSave(),t=new Blob([JSON.stringify(e,null,this.minify?0:4)],{type:"application/json"});s(t,this.saveName),i.A.showToast("info","Specification saved")},reset(){this.graph=!1,this.minify=!1,this.saveName="specification"}},u={readonly:!1,hideHud:!1,position:!1,graphName:null,saveName:"save",getSave(){return o.Ay.getEditorManagerInstance().saveDataflow({readonly:!!this.readonly,hideHud:!!this.hideHud,position:!!this.position,graphName:this.graphName})},saveCallback(){const e=this.getSave(),t=new Blob([JSON.stringify(e,null,4)],{type:"application/json"});s(t,this.saveName),i.A.showToast("info","Dataflow saved")},saveCallbackCustomFormat(e){const t=document.createElement("a");let n;"string"==typeof e?(n="application/octet-stream",t.href=`data:${n};base64,${e}`):(n="application/json",t.href=window.URL.createObjectURL(new Blob([JSON.stringify(e)],{type:n}))),t.download=this.saveName,t.click(),i.A.showToast("info",`File saved successfully: ${this.saveName}`)},reset(){var e,t,n;const a=o.Ay.getEditorManagerInstance().saveDataflow(),i=null!==(n=a.entryGraph?null===(e=a.graphs.find((e=>e.id===a.entryGraph)))||void 0===e?void 0:e.name:null===(t=a.graphs[0])||void 0===t?void 0:t.name)&&void 0!==n?n:null;this.readonly=!1,this.hideHud=!1,this.position=!1,this.graphName=i,this.saveName="save"}},d={width:1920,height:1080,maxWidth:16384,maxHeight:16384,saveName:"dataflow",exportCallback(){const e=document.querySelector(".inner-editor");this.width<0?i.A.showToast("error","Negative width. The image could not be saved."):this.height<0?i.A.showToast("error","Negative height. The image could not be saved."):(this.width>this.maxWidth&&(i.A.showToast("warning",`Invalid width. The maximum value ${this.maxWidth} was used instead.`),this.width=this.maxWidth),this.height>this.maxHeight&&(i.A.showToast("warning",`Invalid height. The maximum value ${this.maxHeight} was used instead.`),this.height=this.maxHeight),(0,a.$E)(e,{filter:e=>{var t;return!(null===(t=e.classList)||void 0===t?void 0:t.contains("baklava-node-palette"))},imagePlaceholder:r.L,canvasWidth:this.width,canvasHeight:this.height}).then((e=>{const t=document.createElement("a");t.download=this.saveName,t.href=e,t.dataset.downloadurl=[e,t.download,t.href].join(":"),document.body.appendChild(t),t.click(),document.body.removeChild(t)})).catch((e=>{i.A.showToast("error",`Export to PNG failed: ${e}`)})))},reset(){this.width=1920,this.height=1080,this.saveName="save"}}},21370:(e,t,n)=>{n.d(t,{A:()=>d});var a=n(20641);const o={class:"blur-panel"};var i=n(53751);const r=(0,a.pM)({props:{blur:{type:Boolean,default:!0}},setup:e=>({backgroundColor:(0,a.EW)((()=>e.blur?"#{$gray-600}80":null)),backdropFilter:(0,a.EW)((()=>e.blur?"blur(10px)":null)),position:(0,a.EW)((()=>e.blur?"absolute":null))})}),s=()=>{(0,i.$9)((e=>({"09ab25c4":e.backgroundColor,"416482c2":e.backdropFilter,"5e37c91a":e.position})))},l=r.setup;r.setup=l?(e,t)=>(s(),l(e,t)):s;const u=r,d=(0,n(66262).A)(u,[["render",function(e,t,n,i,r,s){return(0,a.uX)(),(0,a.CE)("div",o,[(0,a.RG)(e.$slots,"default")])}]])},24239:(e,t,n)=>{n.d(t,{A:()=>Ne});var a=n(20641),o=n(53751),i=n(90033);const r={class:"wrapper"},s={class:"container"},l={class:"dropdown-wrapper"},u={key:0},d={key:1},c=["id","onClick","onPointerover","onPointerleave"],p={key:0},v={key:1},h={key:0},m={key:1},f={key:0},g={key:1},b={key:0},y={key:1},w={class:"external-app-status"},k={key:0,class:"connected"},C={key:1,class:"disconnected"};var A=n(50953),E=n(88781),M=n(9459),x=n.n(M),N=n(63491),S=n(12206),I=n(62258),L=n(22007),V=n(59604),P=n(35831),_=n(82304),W=n(59004),O=n(72309),F=n(17504),X=n(13633),T=n(5765),H=n(40784),G=n(51828),R=n(62264),D=n(53847),$=n(34580),B=n(93617),K=n(35127),Q=n(881),U=n(323),q=n(8239);const j={class:"notifications",tabindex:"-1"},z={class:"info"},J={class:"panel"};var Y=n(1691),Z=n(42231);const ee={components:{Cross:Y.A,Notification:Z.A},computed:{notifications:()=>K.xv.notifications,notificationsLength:()=>K.xv.notifications.length},data:()=>({notificationStore:K.xv}),methods:{removeAll(){K.xv.remove()}}};var te=n(66262);const ne=(0,te.A)(ee,[["render",function(e,t,n,o,r,s){const l=(0,a.g2)("Cross"),u=(0,a.g2)("Notification");return(0,a.uX)(),(0,a.CE)("div",j,[(0,a.Lk)("div",z,[(0,a.Lk)("span",null,"Notifications ("+(0,i.v_)(r.notificationStore.notifications.length)+")",1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>this.removeAll&&this.removeAll(...e)),tabindex:"-1"},[(0,a.bF)(l),t[1]||(t[1]=(0,a.eW)(" Clear all "))])]),(0,a.Lk)("div",J,[(0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.notificationsLength,(e=>((0,a.uX)(),(0,a.CE)("li",{key:e},[(0,a.bF)(u,{type:s.notifications[s.notificationsLength-e].type,message:`${s.notifications[s.notificationsLength-e].message}`,index:s.notificationsLength-e,border:"border"},null,8,["type","message","index"])])))),128))])])])}],["__scopeId","data-v-69eabdd8"]]),ae={class:"settings-panel"},oe={class:"panel"},ie={class:"option-label"},re={class:"__properties"};var se=n(96422),le=n(76433),ue=n(878),de=n(21585),ce=n(31897);const pe={props:{viewModel:{required:!0}},setup(e){const t=(0,U.A)(),n=(e,n)=>{t.notifyAboutChange("metadata_on_change",{metadata:{[e]:n}})},o=(0,a.EW)((()=>{const t=new le.A("Connection style",e.viewModel.connectionRenderer.style,[{text:"Curved",value:"curved"},{text:"Orthogonal",value:"orthogonal"},{text:"Alternative orthogonal",value:"alternativeOrthogonal"},{text:"Straight",value:"straight"}]);return t.events.setValue.subscribe(this,(t=>{e.viewModel.connectionRenderer.style=t,n("connectionStyle",t)})),t})),i=(0,a.EW)((()=>{const t=new ue.A("Randomized offset",e.viewModel.connectionRenderer.randomizedOffset);return t.events.setValue.subscribe(this,(t=>{e.viewModel.connectionRenderer.randomizedOffset=t,n("randomizedOffset",t)})),t})),r=(0,a.EW)((()=>{const t=new ue.A("Modify node types",e.viewModel.settings.editableNodeTypes).setPort(!1);return t.events.setValue.subscribe(this,(t=>{e.viewModel.settings.editableNodeTypes=t,n("editableTypes",t)})),t.componentName="CheckboxInterface",t})),s=(0,a.EW)((()=>{const t=new ue.A("Hide anchors",e.viewModel.settings.hideAnchors).setPort(!1);return t.events.setValue.subscribe(this,(t=>{e.viewModel.settings.hideAnchors=t,n("hideAnchors",t)})),t.componentName="CheckboxInterface",t})),l=(0,a.EW)((()=>{const t=new ue.A("Show IDs",e.viewModel.settings.showIds).setPort(!1);return t.events.setValue.subscribe(this,(t=>{e.viewModel.settings.showIds=t,n("showIds",t)})),t.componentName="CheckboxInterface",t})),u=(0,a.EW)((()=>{const t=new ue.A("Show hidden properties",e.viewModel.settings.showHiddenProperties).setPort(!1);return t.events.setValue.subscribe(this,(t=>{e.viewModel.settings.showHiddenProperties=t,n("showHiddenProperties",t)})),t.componentName="CheckboxInterface",t})),d=(0,a.EW)((()=>{const t=new de.A("Background grid size",e.viewModel.settings.background.gridSize);return t.events.setValue.subscribe(this,(t=>{e.viewModel.settings.background.gridSize=t,n("backgroundSize",t)})),t})),c=(0,a.EW)((()=>{const t=new de.A("Node movement step",e.viewModel.movementStep);return t.events.setValue.subscribe(this,(t=>{e.viewModel.movementStep=t,n("movementStep",t)})),t})),p=(0,a.EW)((()=>{const{layoutManager:t}=e.viewModel.editor,a=t.getAvailableAlgorithms().map((e=>({text:e,value:e}))),o=new le.A("Autolayout algorithm",t.usedAlgorithm,a);return o.events.setValue.subscribe(this,(e=>{t.useAlgorithm(e),n("layout",e)})),o})),v=(0,a.EW)((()=>new ce.A("Apply autolayout",(()=>{e.viewModel.editor.applyAutolayout()})))),h=(0,a.EW)((()=>new ce.A("Clean editor",(()=>{e.viewModel.editor.deepCleanEditor()})))),m=(0,a.EW)((()=>{const t=(0,A.KR)([]);return e.viewModel.layers.forEach((n=>{const a=new ue.A(n.name,!1);a.events.setValue.subscribe(this,(()=>{e.viewModel.ignoredLayers.has(n.name)?e.viewModel.ignoredLayers.delete(n.name):e.viewModel.ignoredLayers.add(n.name)})),t.value.push(a)})),t.value})),f=(0,a.EW)((()=>{const t=new le.A("Verbosity of notifications",e.viewModel.logLevel,Object.keys(B.E).map((e=>e.toUpperCase())));return t.events.setValue.subscribe(this,(t=>{e.viewModel.logLevel=t})),t})),g=(0,a.EW)((()=>{if(e.viewModel.editor.readonly)return[];const t=[f.value,o.value,p.value,v.value,d.value,h.value,c.value,i.value,s.value,l.value,u.value];return e.viewModel.settings.toggleableEditableTypes&&t.push(r.value),t}));return{getOptionName:se.BW,settingOptions:g,disableLayersOptions:m}}},ve=(0,te.A)(pe,[["render",function(e,t,n,r,s,l){return(0,a.uX)(),(0,a.CE)("div",ae,[t[1]||(t[1]=(0,a.Lk)("div",{class:"setting-header"},[(0,a.Lk)("span",null,"Settings")],-1)),(0,a.Lk)("div",oe,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.settingOptions,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id},[(0,a.Lk)("div",ie,(0,i.v_)(r.getOptionName(e.componentName)?`${e.name}:`:""),1),((0,a.uX)(),(0,a.Wv)((0,a.$y)(e.component),{intf:e,tabindex:"-1"},null,8,["intf"]))])))),128)),(0,a.bo)((0,a.Lk)("div",re,[t[0]||(t[0]=(0,a.Lk)("div",{class:"option-label"},"Hide Layers:",-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.disableLayersOptions,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id},[((0,a.uX)(),(0,a.Wv)((0,a.$y)(e.component),{intf:e,tabindex:"-1"},null,8,["intf"]))])))),128))],512),[[o.aG,0!==r.disableLayersOptions.length]])])])}]]);var he=n(26278),me=n(8328),fe=n(39021),ge=n(21370),be=n(54570),ye=n(24292),we=n(19071),ke=n(49617),Ce=n(3455),Ae=n(49641),Ee=n(41857),Me=n(34076);const xe={components:{Logo:I.A,Arrow:L.A,Run:_.A,CassetteStop:T.A,Validate:W.A,Backend:O.A,Bell:F.A,DropdownItem:H.A,Expand:V.A,Collapse:P.A,Notifications:ne,Magnifier:R.A,Cogwheel:G.A,Sidebar:D.A,Settings:ve,Cube:X.A,ParentMenu:he.IM,SaveMenu:he.Tq,ExportMenu:he.w5,NodeConfigurationMenu:he.Am,PropertyConfigurationMenu:he.nh,InterfaceConfigurationMenu:he.tQ,Panel:ge.A,CustomSidebar:be.A,LayerConfigurationMenu:he.XC,ListMenu:he.Kv,GraphDetails:ye.A},computed:{dataflowGraphName(){return this.editorManager.editor.graphName},graphId(){return this.editorManager.baklavaView.displayedGraph.id},editorTitle(){if(void 0===this.graphName)return this.appName;const e=this.graphName.trim();return""===e?this.appName:e},preview(){const e=new URLSearchParams(window.location.search);return!!e.has("preview")&&"true"===e.get("preview")},hideHud(){return this.editorManager.editor.hideHud},readonly(){return this.editorManager.editor.readonly},settingsOpen(){return this.panels.settings.isOpen},notificationsOpen(){return this.panels.notifications.isOpen},paletteOpen(){return this.panels.palette.isOpen},externalAppStatus(){return this.panels.externalAppStatus.isOpen},leftButtonsQuantity(){return this.$refs.leftButtons.children.length},rightButtonsQuantity(){return this.$refs.rightButtons.children.length},isNavBarCompressed(){return this.isMounted&&this.windowWidth<(this.leftButtonsQuantity+this.rightButtonsQuantity)*this.buttonWidth+this.searchbarWidthMultiplcity*this.buttonWidth+.5*this.buttonWidth},mobileClasses(){return{"compressed-mobile":this.isNavBarCompressed}},nodesearchInputStyles(){return{width:this.searchbarWidthMultiplcity*this.buttonWidth+"px"}},leftContainerStyles(){return this.isNavBarCompressed?{"flex-grow":this.leftButtonsQuantity}:{}},rightContainerStyles(){return this.isNavBarCompressed?{"flex-grow":this.rightButtonsQuantity,"justify-content":"right"}:{"justify-content":"right"}},activeNavbarItems(){return this.activeNavbarItemsNames},parentGraph(){return this.editorManager.getParentGraph()}},watch:{dataflowGraphName(e){this.graphName=e,we.Ht.reset(),we.yV.reset()},graphName(e){this.editorManager.updateSubgraphName(e),we.Ht.reset(),we.yV.reset()},searchEditorNodesQuery(e){const{viewModel:t}=(0,N.if)();t.value.editor.searchQuery=""!==e?e.toLowerCase():void 0},navbarItems(e){e.forEach((e=>{void 0===ke.A[e.iconName]?(e.icon=(0,A.IG)(ke.A.Placeholder),e.iconName=this.editorManager.baklavaView.cache[`./${e.iconName}`]):e.icon=(0,A.IG)(ke.A[e.iconName])})),this.activeNavbarItemsNames=e.map((e=>e.procedureName))}},data(){const e=$.Ay.getEditorManagerInstance(),t=e.baklavaView.editor.graphName??"",n={NODE_ENV:"production",VUE_APP_STATIC:"true",VUE_APP_VERBOSE:"false",VUE_APP_GRAPH_DEVELOPMENT_MODE:"false",BASE_URL:""}.VUE_APP_EDITOR_TITLE??"Pipeline Manager",o=(0,U.A)(),i=(0,a.EW)((()=>[...e.baklavaView.navbarItems,...o.appCapabilities.value])),r=new Ce.A("Graph name","");r.setDefaultComponent();const s=(0,A.KR)("");return Q.A.setHook(this.updateActiveNavbarItems),(0,a.Gt)("hoveredOver",(()=>{})),{appName:n,graphName:t,editorManager:e,editorTitleInterface:r,menuState:me.x,configurationState:me.c,removeInterfaces:fe.Fo,removeProperties:fe.GI,externalApplicationManager:o,externalApp:{available:!1,connected:!1,backend:!1},navbarItems:i,activeNavbarItemsNames:[],saveConfiguration:we.yV,saveGraphConfiguration:we.yV,saveSpecificationConfiguration:we.Ht,exportGraph:we.N6,saveMenuShow:!1,exportMenuShow:!1,editTitle:!1,notificationStore:K.xv,showSearch:!1,crossIcon:(0,A.IG)(ke.A.Cross),searchEditorNodesQuery:s,navbarGuard:!1,isMounted:!1,windowWidth:0,buttonWidth:0,searchbarWidthMultiplcity:4,hoverInfo:{isHovered:!1,hoveredPanel:void 0},panels:{notifications:{isOpen:!1,class:".notifications",iconRef:"notifications",showTransform:"-495px, 0px",hideTransform:"0px, 0px"},palette:{isOpen:!this.$isMobile,class:".baklava-node-palette",iconRef:"palette",showTransform:"0px, 0px",hideTransform:"-450px, 0px"},externalAppStatus:{isOpen:!1,class:".external-app-status",iconRef:"backend",showTransform:"-89%, 0px",hideTransform:"-89%, -180px"},settings:{isOpen:!1,class:".settings-panel",iconRef:"settings",showTransform:"-495px, 0px",hideTransform:"0px, 0px"},nodesearch:{isOpen:!1},fullscreen:{isOpen:S.api.isFullscreen},graphDetails:{isOpen:!1,class:".details-panel",iconRef:"graphDetails",showTransform:"-495px, 0px",hideTransform:"0px, 0px"}}}},methods:{async loadSpecification(e){const t=$.Ay.validateSpecification(e);if(Array.isArray(t)&&t.length){let n;B.A.terminalLog("error","Specification is invalid",t);try{n=JSON.parse(e).version}catch{return Promise.resolve()}return this.editorManager.specificationVersion!==n&&B.A.terminalLog("error","Mismatched specification version",`Specification version (${n}) differs from the current version (${this.editorManager.specificationVersion}). It may result in unexpected behaviour. Please refer to https://antmicro.github.io/kenning-pipeline-manager/changelogs.html to see if that is the case.`),Promise.resolve()}return this.editorManager.updateEditorSpecification(e).then((({errors:e,warnings:t,info:n})=>{Array.isArray(t)&&t.length&&B.A.terminalLog("warning","Issue when loading specification",t),Array.isArray(e)&&e.length?(B.A.terminalLog("error","Specification is invalid",e),Array.isArray(n)&&n.length&&B.A.terminalLog("error","Mismatched specification version",`${n} Please refer to https://antmicro.github.io/kenning-pipeline-manager/changelogs.html to see if that is the case.`)):Array.isArray(n)&&n.length&&B.A.terminalLog("info","Specification loaded",n)}))},createNewGraphCallback(){(0,Ee.nb)(),this.editorManager.editor.deepCleanEditor(!1),(0,Ee.wH)()},async loadSpecificationCallback(){const e=document.getElementById("load-spec-button").files[0];e&&(await(0,Me.NV)((async()=>{const t=await e.text();return this.loadSpecification(t)}),this.editorManager.baklavaView.editor.events.setLoad),document.getElementById("load-spec-button").value="")},togglePanel(e,t=!1){const n=document.querySelector(e.class),a=this.$refs[e.iconRef];e.isOpen=!t&&!e.isOpen;const o=e.isOpen;n&&(n.style.transition=`transform ${o?"0.4":"0.2"}s`,n.style.transform=`translate(${o?e.showTransform:e.hideTransform})`,a.classList.toggle("open",o))},toggleFullscreen(){S.api.isEnabled?S.api.toggle():B.A.showToast("error","Fullscreen is not supported")},clickOutside(e,t){const n=this.$refs[t.iconRef];if(!n)return;const a=e.target;a instanceof Node&&(n.contains(a)||n===a)||this.togglePanel(t,!0)},setEditTitle(){this.readonly||(this.editTitle=!0,this.$nextTick((()=>this.$refs.editorTitleInput._.refs.el.focus())))},async loadDataflow(e){return this.editorManager.loadDataflow(e).then((({errors:e,warnings:t,info:n})=>{if(Array.isArray(t)&&t.length&&B.A.terminalLog("warning","Issue when loading dataflow",t),Array.isArray(e)&&e.length){const t="Dataflow is invalid";B.A.terminalLog("error",t,e),Array.isArray(n)&&n.length&&B.A.terminalLog("error","Mismatched dataflow version",`${n} Please refer to https://antmicro.github.io/kenning-pipeline-manager/changelogs.html to see if that is the case.`)}else Array.isArray(n)&&n.length&&B.A.terminalLog("info","Dataflow loaded",n)}))},async loadDataflowCallback(){const e=document.getElementById("load-dataflow-button").files[0];e&&(await(0,Me.NV)((async()=>{let t=null;try{t=x().parse(await e.text())}catch(e){return void(e instanceof SyntaxError?B.A.terminalLog("error","Not a proper JSON file",e.toString()):B.A.terminalLog("error","Unknown error",e.toString()))}await this.externalApplicationManager.notifyAboutChange("graph_on_change",{dataflow:t}),await this.loadDataflow(t)}),this.editorManager.baklavaView.editor.events.setLoad),document.getElementById("load-dataflow-button").value="")},async requestDataflowAction(e){if(!this.externalApp.available)return;if(this.isInProgress(e.procedureName)&&this.isStoppable(e.procedureName))return void await this.externalApplicationManager.requestDataflowStop(e.procedureName);const t=this.activeNavbarItemsNames.includes(e.procedureName);t&&!this.isInProgress(e.procedureName)?await this.externalApplicationManager.requestDataflowAction(e.procedureName,e.requireResponse):t&&B.A.terminalLog("warning",`${e.name} cannot be stopped`)},async requestDataflowExport(e=!0){if(!this.externalApp.available)return;const t=await this.externalApplicationManager.requestDataflowExport();!1!==t&&(this.saveConfiguration={...we.yV},this.saveConfiguration.saveName=t.filename??we.yV.saveName,e?(this.saveConfiguration.readonly=void 0,this.saveConfiguration.hideHud=void 0,this.saveConfiguration.position=void 0,this.saveConfiguration.saveCallback=()=>{this.saveConfiguration.saveCallbackCustomFormat(t.content),this.saveConfiguration=we.yV},this.saveMenuShow=!0):this.saveConfiguration.saveCallbackCustomFormat(t.content))},importDataflow(){if(!this.externalApp.available)return;const e=document.getElementById("request-dataflow-button").files[0];if(!e)return;const t=new FileReader;t.onload=async()=>{await this.externalApplicationManager.importDataflow(t.result)},t.readAsText(e)},exportToSvg(){const e=document.querySelector(".inner-editor");(0,E.YI)(e,{filter:e=>!e.classList?.contains("export-hidden"),imagePlaceholder:Ae.L}).then((e=>{const t=document.createElement("a");t.download="dataflow.svg",t.href=e,t.dataset.downloadurl=[e,t.download,t.href].join(":"),document.body.appendChild(t),t.click(),document.body.removeChild(t)})).catch((e=>{B.A.showToast("error",`Export to SVG failed: ${e}`)}))},createGraphNodeTypeFromCurrentGraph(){me.x.configurationMenu.visible=!me.x.configurationMenu.visible,me.x.configurationMenu.addNode=!0,me.x.configurationMenu.placeNode=!1;const e=(0,a.wB)((()=>me.x.configurationMenu.visible),(async(t,n)=>{if(!0===n&&!1===t){const e=me.c.nodeData.name;let t=this.editorManager.baklavaView.editor.nodeTypes.get(e),n=new t.type;if(me.c.success){const a=this.editorManager.baklavaView.displayedGraph.save(),o=this.editorManager.addSubgraphToNode(n,a.nodes,a.connections);Array.isArray(o)&&o.length&&B.A.terminalLog("error","Creating subgraph failed",o);const i=(0,q.$o)([],[],this.appName,this.editorManager.baklavaView.editor);this.editorManager.baklavaView.editor.switchToGraph(i),t=this.editorManager.baklavaView.editor.nodeTypes.get(e),n=new t.type,this.editorManager.baklavaView.displayedGraph.addNode(n),n.position.x=window.innerWidth/2,n.position.y=window.innerHeight/2,this.editorManager.baklavaView.editor.changeTopLevelGraph(this.editorManager.baklavaView.displayedGraph.id)}}e()}))},onClickNodeSearch(){this.togglePanel(this.panels.nodesearch),this.panels.nodesearch.isOpen&&this.$nextTick((()=>this.$refs.searchbarInput.focus()))},openNavbar(){this.navbarGuard=!0,this.$refs.navbar.classList.add("isHovered")},handleMouseLeave(e){this.$refs.navbar.classList.contains("isHovered")&&(!this.hideHud&&!this.$isMobile||this.editorManager.baklavaView.displayedGraph.sidebar.visible||e.target.closest(".baklava-node-palette")||(this.navbarGuard?this.navbarGuard=!1:(this.togglePanel(this.panels.palette,!0),this.$refs.navbar.classList.remove("isHovered"))))},updateHoverInfo(e,t=!1){(!t||this.activeNavbarItemsNames.includes(e)||this.isInProgress(e))&&(this.hoverInfo.hoveredPanel=e,this.hoverInfo.isHovered=!0)},resetHoverInfo(e){this.hoverInfo.hoveredPanel===e&&(this.hoverInfo.hoveredPanel=void 0,this.hoverInfo.isHovered=!1)},isHovered(e){return this.hoverInfo.hoveredPanel===e&&this.hoverInfo.isHovered},isInProgress:e=>Q.A.get(e).inProgress,isStoppable(e){return this.externalApplicationManager.appCapabilities.stoppable_methods?.includes(e)??!0},getNavbarActionTooltip(e){return this.isStoppable(e.procedureName)&&this.isInProgress(e.procedureName)?void 0!==e.stopName?e.stopName:`Stop ${e.name}`:e.name},updateActiveNavbarItems(){const{navbarItems:e}=this;let t=new Set(e.map((e=>e.procedureName)));e.filter((e=>this.isInProgress(e.procedureName))).forEach((e=>{t=new Set((e.allowToRunInParallelWith??[]).filter((e=>t.has(e)))).add(e.procedureName)})),this.activeNavbarItemsNames=Array.from(t)},returnFromSubgraph(){this.editorManager.returnFromSubgraph(),this.resetHoverInfo("subgraphReturn"),this.togglePanel(this.panels.graphDetails,!0)},goToParentGraph(e){this.editorManager.switchToGraph(e),this.resetHoverInfo("parentGraph")}},async mounted(){this.isMounted=!0,this.buttonWidth=this.$refs.palette.offsetWidth,this.windowWidth=window.innerWidth,window.addEventListener("resize",(()=>{this.windowWidth=window.innerWidth,this.$refs.palette&&(this.buttonWidth=this.$refs.palette.offsetWidth)})),document.addEventListener("fullscreenchange",(()=>{this.panels.fullscreen.isOpen=!S.api.isFullscreen})),this.externalApplicationManager.registerConnectionHook((()=>{this.externalApp.available=this.externalApplicationManager.isExternalAppAvailable(),this.externalApp.connected=this.externalApplicationManager.isConnected(),this.externalApp.backend=!0===this.externalApplicationManager.backend}))}},Ne=(0,te.A)(xe,[["render",function(e,t,n,A,E,M){const x=(0,a.g2)("SaveMenu"),N=(0,a.g2)("ParentMenu"),S=(0,a.g2)("Panel"),I=(0,a.g2)("ExportMenu"),L=(0,a.g2)("BlurPanel"),V=(0,a.g2)("NodeConfigurationMenu"),P=(0,a.g2)("PropertyConfigurationMenu"),_=(0,a.g2)("InterfaceConfigurationMenu"),W=(0,a.g2)("ListMenu"),O=(0,a.g2)("LayerConfigurationMenu"),F=(0,a.g2)("Logo"),X=(0,a.g2)("DropdownItem"),T=(0,a.g2)("Cube"),H=(0,a.g2)("CassetteStop"),G=(0,a.g2)("Arrow"),R=(0,a.g2)("Magnifier"),D=(0,a.g2)("Expand"),$=(0,a.g2)("Collapse"),B=(0,a.g2)("Sidebar"),K=(0,a.g2)("Cogwheel"),Q=(0,a.g2)("Backend"),U=(0,a.g2)("Bell"),q=(0,a.g2)("Notifications"),j=(0,a.g2)("Settings"),z=(0,a.g2)("CustomSidebar"),J=(0,a.g2)("GraphDetails"),Y=(0,a.gN)("click-outside");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(o.eB,{name:"fade",onMousedown:t[2]||(t[2]=(0,o.D$)((e=>E.saveMenuShow=!1),["self"]))},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(S,null,{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(N,{modelValue:E.saveMenuShow,"onUpdate:modelValue":t[1]||(t[1]=e=>E.saveMenuShow=e),title:"Save configuration"},{default:(0,a.k6)((()=>[(0,a.bF)(x,{saveConfiguration:E.saveConfiguration,modelValue:E.saveMenuShow,"onUpdate:modelValue":t[0]||(t[0]=e=>E.saveMenuShow=e)},null,8,["saveConfiguration","modelValue"])])),_:1},8,["modelValue"]),[[o.aG,E.saveMenuShow]])])),_:1},512),[[o.aG,E.saveMenuShow]])])),_:1}),(0,a.bF)(o.eB,{name:"fade",onMousedown:t[5]||(t[5]=(0,o.D$)((e=>E.exportMenuShow=!1),["self"]))},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(L,null,{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(N,{modelValue:E.exportMenuShow,"onUpdate:modelValue":t[4]||(t[4]=e=>E.exportMenuShow=e),title:"Export graph"},{default:(0,a.k6)((()=>[(0,a.bF)(I,{exportGraph:E.exportGraph,modelValue:E.exportMenuShow,"onUpdate:modelValue":t[3]||(t[3]=e=>E.exportMenuShow=e)},null,8,["exportGraph","modelValue"])])),_:1},8,["modelValue"]),[[o.aG,E.exportMenuShow]])])),_:1},512),[[o.aG,E.exportMenuShow]])])),_:1}),(0,a.bF)(o.eB,{name:"fade",onMousedown:t[7]||(t[7]=(0,o.D$)((e=>E.menuState.configurationMenu.visible=!1),["self"]))},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(S,null,{default:(0,a.k6)((()=>[E.menuState.configurationMenu.visible?((0,a.uX)(),(0,a.Wv)(N,{key:0,modelValue:E.menuState.configurationMenu.visible,"onUpdate:modelValue":t[6]||(t[6]=e=>E.menuState.configurationMenu.visible=e),title:"Node configuration"},{default:(0,a.k6)((()=>[(0,a.bF)(V)])),_:1},8,["modelValue"])):(0,a.Q3)("",!0)])),_:1},512),[[o.aG,E.menuState.configurationMenu.visible]])])),_:1}),(0,a.bF)(o.eB,{name:"fade",onMousedown:t[9]||(t[9]=(0,o.D$)((e=>E.menuState.propertyMenu=!1),["self"]))},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(S,null,{default:(0,a.k6)((()=>[E.menuState.propertyMenu?((0,a.uX)(),(0,a.Wv)(N,{key:0,modelValue:E.menuState.propertyMenu,"onUpdate:modelValue":t[8]||(t[8]=e=>E.menuState.propertyMenu=e),title:"Add property"},{default:(0,a.k6)((()=>[(0,a.bF)(P)])),_:1},8,["modelValue"])):(0,a.Q3)("",!0)])),_:1},512),[[o.aG,E.menuState.propertyMenu]])])),_:1}),(0,a.bF)(o.eB,{name:"fade",onMousedown:t[11]||(t[11]=(0,o.D$)((e=>E.menuState.interfaceMenu=!1),["self"]))},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(S,null,{default:(0,a.k6)((()=>[E.menuState.interfaceMenu?((0,a.uX)(),(0,a.Wv)(N,{key:0,modelValue:E.menuState.interfaceMenu,"onUpdate:modelValue":t[10]||(t[10]=e=>E.menuState.interfaceMenu=e),title:"Add interface"},{default:(0,a.k6)((()=>[(0,a.bF)(_)])),_:1},8,["modelValue"])):(0,a.Q3)("",!0)])),_:1},512),[[o.aG,E.menuState.interfaceMenu]])])),_:1}),(0,a.bF)(o.eB,{name:"fade",onMousedown:t[13]||(t[13]=(0,o.D$)((e=>E.menuState.propertyListMenu=!1),["self"]))},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(S,null,{default:(0,a.k6)((()=>[E.menuState.propertyListMenu?((0,a.uX)(),(0,a.Wv)(N,{key:0,modelValue:E.menuState.propertyListMenu,"onUpdate:modelValue":t[12]||(t[12]=e=>E.menuState.propertyListMenu=e),title:"Remove properties"},{default:(0,a.k6)((()=>[(0,a.bF)(W,{componentName:"propertyListMenu",items:E.configurationState.properties,confirmAction:E.removeProperties,confirmText:"Remove properties"},null,8,["items","confirmAction"])])),_:1},8,["modelValue"])):(0,a.Q3)("",!0)])),_:1},512),[[o.aG,E.menuState.propertyListMenu]])])),_:1}),(0,a.bF)(o.eB,{name:"fade",onMousedown:t[15]||(t[15]=(0,o.D$)((e=>E.menuState.interfaceListMenu=!1),["self"]))},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(S,null,{default:(0,a.k6)((()=>[E.menuState.interfaceListMenu?((0,a.uX)(),(0,a.Wv)(N,{key:0,modelValue:E.menuState.interfaceListMenu,"onUpdate:modelValue":t[14]||(t[14]=e=>E.menuState.interfaceListMenu=e),title:"Remove interfaces"},{default:(0,a.k6)((()=>[(0,a.bF)(W,{componentName:"interfaceListMenu",items:E.configurationState.interfaces,confirmAction:E.removeInterfaces,confirmText:"Remove interfaces"},null,8,["items","confirmAction"])])),_:1},8,["modelValue"])):(0,a.Q3)("",!0)])),_:1},512),[[o.aG,E.menuState.interfaceListMenu]])])),_:1}),(0,a.bF)(o.eB,{name:"fade",onMousedown:t[17]||(t[17]=(0,o.D$)((e=>E.menuState.layerMenu=!1),["self"]))},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(S,null,{default:(0,a.k6)((()=>[E.menuState.layerMenu?((0,a.uX)(),(0,a.Wv)(N,{key:0,modelValue:E.menuState.layerMenu,"onUpdate:modelValue":t[16]||(t[16]=e=>E.menuState.layerMenu=e),title:"Set node layer"},{default:(0,a.k6)((()=>[(0,a.bF)(O)])),_:1},8,["modelValue"])):(0,a.Q3)("",!0)])),_:1},512),[[o.aG,E.menuState.layerMenu]])])),_:1}),(0,a.bo)(((0,a.uX)(),(0,a.CE)("div",r,[(0,a.bo)((0,a.Lk)("div",{ref:"navbar",class:(0,i.C4)(["wrapper prevent-select",M.hideHud||e.$isMobile?"wrapper-hidden":"wrapper-hud"]),onPointerenter:t[51]||(t[51]=e=>e.target.classList.add("isHovered"))},[(0,a.Lk)("div",s,[(0,a.Lk)("div",{style:(0,i.Tr)(M.leftContainerStyles)},[(0,a.Lk)("div",{ref:"leftButtons",class:(0,i.C4)(["logo",M.mobileClasses]),onPointerover:t[18]||(t[18]=()=>M.updateHoverInfo("logo")),onPointerleave:t[19]||(t[19]=()=>M.resetHoverInfo("logo"))},[(0,a.bF)(F,{hover:M.isHovered("logo")},null,8,["hover"]),(0,a.Lk)("div",l,[this.editorManager.specificationLoaded?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[M.readonly?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(X,{key:0,id:"create-new-graph-button",text:"Create new graph",type:"'button'",eventFunction:M.createNewGraphCallback},null,8,["eventFunction"])),E.externalApp.backend&&E.externalApp.connected?((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[t[52]||(t[52]=(0,a.Lk)("hr",null,null,-1)),(0,a.bF)(X,{text:"Load file",id:"request-dataflow-button",eventFunction:M.importDataflow},null,8,["eventFunction"]),(0,a.bF)(X,{text:"Save file",type:"button",eventFunction:async()=>M.requestDataflowExport(!1)},null,8,["eventFunction"]),(0,a.bF)(X,{text:"Save file as...",type:"button",eventFunction:async()=>M.requestDataflowExport(!0)},null,8,["eventFunction"])],64)):(0,a.Q3)("",!0),t[53]||(t[53]=(0,a.Lk)("hr",null,null,-1))],64)):(0,a.Q3)("",!0),E.externalApp.backend||M.hideHud?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[(0,a.bF)(X,{text:"Load specification",id:"load-spec-button",eventFunction:M.loadSpecificationCallback},null,8,["eventFunction"]),this.editorManager.specificationLoaded?((0,a.uX)(),(0,a.Wv)(X,{key:0,text:"Save specification as...",type:"'button'",eventFunction:()=>{E.saveMenuShow=!E.saveMenuShow,E.saveConfiguration=E.saveSpecificationConfiguration}},null,8,["eventFunction"])):(0,a.Q3)("",!0),t[54]||(t[54]=(0,a.Lk)("hr",null,null,-1))],64)),this.editorManager.specificationLoaded?((0,a.uX)(),(0,a.CE)(a.FK,{key:2},[(0,a.bF)(X,{type:"'button'",text:"Set graph name",eventFunction:M.setEditTitle},null,8,["eventFunction"]),M.hideHud?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(X,{key:0,id:"load-dataflow-button",text:"Load graph file",eventFunction:M.loadDataflowCallback},null,8,["eventFunction"])),(0,a.bF)(X,{type:"'button'",text:"Save graph file",eventFunction:()=>E.saveGraphConfiguration.saveCallback()},null,8,["eventFunction"]),(0,a.bF)(X,{type:"'button'",text:"Save graph as file as...",eventFunction:()=>{E.saveMenuShow=!E.saveMenuShow,E.saveConfiguration=E.saveGraphConfiguration}},null,8,["eventFunction"]),t[55]||(t[55]=(0,a.Lk)("hr",null,null,-1))],64)):(0,a.Q3)("",!0),(0,a.bF)(X,{type:"'button'",text:"Export graph to PNG",eventFunction:()=>{E.exportMenuShow=!E.exportMenuShow,E.exportGraph=E.exportGraph}},null,8,["eventFunction"]),(0,a.bF)(X,{type:"'button'",text:"Export graph to HTML-based SVG",eventFunction:M.exportToSvg},null,8,["eventFunction"]),this.editorManager.baklavaView.settings.editableNodeTypes?((0,a.uX)(),(0,a.Wv)(X,{key:3,type:"'button'",text:"Create node type from graph",eventFunction:M.createGraphNodeTypeFromCurrentGraph},null,8,["eventFunction"])):(0,a.Q3)("",!0)])],34),M.hideHud||M.readonly?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",{key:0,ref:"palette",class:(0,i.C4)(["hoverbox",M.mobileClasses]),role:"button",onClick:t[20]||(t[20]=()=>M.togglePanel(E.panels.palette)),onPointerover:t[21]||(t[21]=()=>M.updateHoverInfo("palette")),onPointerleave:t[22]||(t[22]=()=>M.resetHoverInfo("palette"))},[(0,a.bF)(T,{hover:M.isHovered("palette"),class:"small_svg"},null,8,["hover"]),(0,a.Lk)("div",{class:(0,i.C4)(["tooltip",M.mobileClasses])},[M.paletteOpen?((0,a.uX)(),(0,a.CE)("span",u,"Hide node browser")):((0,a.uX)(),(0,a.CE)("span",d,"Show node browser"))],2)],34)),this.externalApp.available?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:1},(0,a.pI)(E.navbarItems,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.name,id:`navbar-button-${e.procedureName}`,class:(0,i.C4)([M.activeNavbarItems.includes(e.procedureName)||M.isInProgress(e.procedureName)?"hoverbox":"box",M.mobileClasses,{"button-in-progress":M.isInProgress(e.procedureName)}]),role:"button",onClick:async()=>M.requestDataflowAction(e),onPointerover:()=>M.updateHoverInfo(e.procedureName,!0),onPointerleave:()=>M.resetHoverInfo(e.procedureName)},[M.isStoppable(e.procedureName)&&M.isInProgress(e.procedureName)?((0,a.uX)(),(0,a.Wv)(H,{key:0,class:"small_svg",hover:M.isHovered(e.procedureName)},null,8,["hover"])):((0,a.uX)(),(0,a.Wv)((0,a.$y)(e.icon),{key:1,class:"small_svg",hover:M.isHovered(e.procedureName),imgURI:e.iconName},null,8,["hover","imgURI"])),t[56]||(t[56]=(0,a.Lk)("div",{class:"progress-bar"},null,-1)),(0,a.Lk)("div",{class:(0,i.C4)(["tooltip",M.mobileClasses])},[(0,a.Lk)("span",null,(0,i.v_)(M.getNavbarActionTooltip(e)),1)],2)],42,c)))),128)):(0,a.Q3)("",!0),this.editorManager.editor.isInSubgraph()?((0,a.uX)(),(0,a.CE)("div",{key:2,class:(0,i.C4)(["hoverbox",M.mobileClasses]),role:"button",onClick:t[23]||(t[23]=(...e)=>M.returnFromSubgraph&&M.returnFromSubgraph(...e)),onPointerover:t[24]||(t[24]=()=>M.updateHoverInfo("subgraphReturn")),onPointerleave:t[25]||(t[25]=()=>M.resetHoverInfo("subgraphReturn"))},[(0,a.bF)(G,{rotate:"down",hover:M.isHovered("subgraphReturn"),color:"white",class:"small_svg"},null,8,["hover"]),(0,a.Lk)("div",{class:(0,i.C4)(["tooltip",M.mobileClasses])},t[57]||(t[57]=[(0,a.Lk)("span",null,"Return from subgraph editor",-1)]),2)],34)):(0,a.Q3)("",!0),M.parentGraph&&!this.editorManager.editor.isInSubgraph()?((0,a.uX)(),(0,a.CE)("div",{key:3,class:(0,i.C4)(["hoverbox",M.mobileClasses]),role:"button",onClick:t[26]||(t[26]=e=>M.goToParentGraph(M.parentGraph)),onPointerover:t[27]||(t[27]=()=>M.updateHoverInfo("parentGraph")),onPointerleave:t[28]||(t[28]=()=>M.resetHoverInfo("parentGraph"))},[(0,a.bF)(G,{rotate:"up",hover:M.isHovered("parentGraph"),color:"white",class:"small_svg"},null,8,["hover"]),(0,a.Lk)("div",{class:(0,i.C4)(["tooltip",M.mobileClasses])},t[58]||(t[58]=[(0,a.Lk)("span",null,"Go to parent graph",-1)]),2)],34)):(0,a.Q3)("",!0)],4),E.editTitle&&!E.panels.nodesearch.isOpen?(0,a.bo)(((0,a.uX)(),(0,a.Wv)((0,a.$y)(E.editorTitleInterface.component),{key:0,ref:"editorTitleInput",intf:E.editorTitleInterface,class:(0,i.C4)(["editorTitleInput",M.mobileClasses]),modelValue:E.graphName,"onUpdate:modelValue":t[29]||(t[29]=e=>E.graphName=e),onKeyup:t[30]||(t[30]=(0,o.jR)((()=>{E.editTitle=!1}),["enter"]))},null,40,["intf","class","modelValue"])),[[Y,()=>{E.editTitle=!1}]]):(0,a.Q3)("",!0),E.editTitle||E.panels.nodesearch.isOpen?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("span",{key:1,class:(0,i.C4)(["editorTitle",M.mobileClasses]),onDblclick:t[31]||(t[31]=(...e)=>M.setEditTitle&&M.setEditTitle(...e))},(0,i.v_)(M.editorTitle),35)),this.editorManager.baklavaView.settings.showIds&&!E.panels.nodesearch.isOpen?((0,a.uX)(),(0,a.CE)("span",{key:2,class:(0,i.C4)(["editorTitle","graphId",M.mobileClasses])}," Graph ID: "+(0,i.v_)(M.graphId),3)):(0,a.Q3)("",!0),(0,a.Lk)("div",{style:(0,i.Tr)(M.rightContainerStyles),ref:"rightButtons"},[(0,a.bo)(((0,a.uX)(),(0,a.CE)("div",{ref:"searchbar",class:(0,i.C4)(["hoverbox",M.mobileClasses]),role:"button",onPointerover:t[32]||(t[32]=()=>M.updateHoverInfo("search")),onPointerleave:t[33]||(t[33]=()=>{M.resetHoverInfo("search")}),onClick:t[34]||(t[34]=(...e)=>M.onClickNodeSearch&&M.onClickNodeSearch(...e))},[(0,a.bF)(R,{hover:M.isHovered("search"),class:"small_svg"},null,8,["hover"]),(0,a.Lk)("div",{class:(0,i.C4)(["tooltip",M.mobileClasses])},[E.panels.nodesearch.isOpen?((0,a.uX)(),(0,a.CE)("span",v,"Hide node search bar")):((0,a.uX)(),(0,a.CE)("span",p,"Show node search bar"))],2)],34)),[[Y,()=>E.panels.nodesearch.isOpen=""!=E.searchEditorNodesQuery]]),(0,a.bo)((0,a.Lk)("div",{style:(0,i.Tr)(M.nodesearchInputStyles),class:(0,i.C4)(["search-editor-nodes",M.mobileClasses])},[(0,a.bo)((0,a.Lk)("input",{ref:"searchbarInput","onUpdate:modelValue":t[35]||(t[35]=e=>E.searchEditorNodesQuery=e),placeholder:"Search for nodes"},null,512),[[o.Jo,E.searchEditorNodesQuery]])],6),[[o.aG,E.panels.nodesearch.isOpen]]),(0,a.Lk)("div",{ref:"fullscreen",class:(0,i.C4)(["hoverbox",M.mobileClasses]),role:"button",onClick:t[36]||(t[36]=(...e)=>M.toggleFullscreen&&M.toggleFullscreen(...e)),onPointerover:t[37]||(t[37]=()=>M.updateHoverInfo("Fullscreen")),onPointerleave:t[38]||(t[38]=()=>M.resetHoverInfo("Fullscreen"))},[E.panels.fullscreen.isOpen?((0,a.uX)(),(0,a.Wv)($,{key:1,hover:M.isHovered("Fullscreen"),class:"small_svg"},null,8,["hover"])):((0,a.uX)(),(0,a.Wv)(D,{key:0,hover:M.isHovered("Fullscreen"),class:"small_svg"},null,8,["hover"])),(0,a.Lk)("div",{class:(0,i.C4)(["tooltip",M.mobileClasses])},[E.panels.fullscreen.isOpen?((0,a.uX)(),(0,a.CE)("span",m,"Disable fullscreen")):((0,a.uX)(),(0,a.CE)("span",h,"Enable fullscreen"))],2)],34),this.editorManager.editor.getExposedProperties().length>0||this.editorManager.editor.isInSubgraph()?((0,a.uX)(),(0,a.CE)("div",{key:0,ref:"graphDetails",class:(0,i.C4)(["hoverbox",M.mobileClasses]),role:"button",onClick:t[39]||(t[39]=e=>M.togglePanel(E.panels.graphDetails)),onPointerover:t[40]||(t[40]=()=>M.updateHoverInfo("graphDetails")),onPointerleave:t[41]||(t[41]=()=>M.resetHoverInfo("graphDetails"))},[(0,a.bF)(B,{hover:M.isHovered("graphDetails"),class:"small_svg"},null,8,["hover"]),(0,a.Lk)("div",{class:(0,i.C4)(["tooltip",M.mobileClasses])},[E.panels.graphDetails.isOpen?((0,a.uX)(),(0,a.CE)("span",g,"Hide graph details")):((0,a.uX)(),(0,a.CE)("span",f,"Show graph details"))],2)],34)):(0,a.Q3)("",!0),(0,a.bo)(((0,a.uX)(),(0,a.CE)("div",{ref:"settings",class:(0,i.C4)(["hoverbox",M.mobileClasses]),role:"button",onClick:t[42]||(t[42]=()=>M.togglePanel(E.panels.settings)),onPointerover:t[43]||(t[43]=()=>M.updateHoverInfo("settings")),onPointerleave:t[44]||(t[44]=()=>M.resetHoverInfo("settings"))},[(0,a.bF)(K,{hover:M.isHovered("settings"),class:"small_svg"},null,8,["hover"]),(0,a.Lk)("div",{class:(0,i.C4)(["tooltip",M.mobileClasses])},[E.panels.settings.isOpen?((0,a.uX)(),(0,a.CE)("span",y,"Hide settings")):((0,a.uX)(),(0,a.CE)("span",b,"Show settings"))],2)],34)),[[Y,()=>E.panels.settings.isOpen=!1]]),E.externalApp.available&&E.externalApp.backend?((0,a.uX)(),(0,a.CE)("div",{key:1,ref:"backend",class:(0,i.C4)(["hoverbox",M.mobileClasses]),onClick:t[45]||(t[45]=()=>M.togglePanel(E.panels.externalAppStatus)),onPointerover:t[46]||(t[46]=()=>M.updateHoverInfo("externalAppStatus")),onPointerleave:t[47]||(t[47]=()=>M.resetHoverInfo("externalAppStatus"))},[E.externalApp.connected?((0,a.uX)(),(0,a.Wv)(Q,{key:0,color:"connected",class:"small_svg",active:M.externalAppStatus,hover:M.isHovered("externalAppStatus")},null,8,["active","hover"])):((0,a.uX)(),(0,a.Wv)(Q,{key:1,color:"disconnected",class:"small_svg",active:M.externalAppStatus,hover:M.isHovered("externalAppStatus")},null,8,["active","hover"])),(0,a.Lk)("div",{class:(0,i.C4)(["tooltip",M.mobileClasses])},t[59]||(t[59]=[(0,a.Lk)("span",null,"External App status",-1)]),2),(0,a.bo)(((0,a.uX)(),(0,a.CE)("div",w,[(0,a.Lk)("div",null,[t[60]||(t[60]=(0,a.Lk)("span",null,"Client status:",-1)),E.externalApp.connected?((0,a.uX)(),(0,a.CE)("span",k,"Connected")):((0,a.uX)(),(0,a.CE)("span",C,"Disconnected"))])])),[[Y,e=>M.clickOutside(e,E.panels.externalAppStatus)]])],34)):(0,a.Q3)("",!0),M.hideHud?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",{key:2,ref:"notifications",class:(0,i.C4)(["hoverbox",M.mobileClasses]),role:"button",onClick:t[48]||(t[48]=()=>M.togglePanel(E.panels.notifications)),onPointerover:t[49]||(t[49]=()=>M.updateHoverInfo("notifications")),onPointerleave:t[50]||(t[50]=()=>M.resetHoverInfo("notifications"))},[(0,a.bF)(U,{id:"navbar-bell",color:this.notificationStore.notifications.length>0?"green":"gray",hover:M.isHovered("notifications"),class:"small_svg"},null,8,["color","hover"]),M.notificationsOpen?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,i.C4)(["tooltip",M.mobileClasses])},t[61]||(t[61]=[(0,a.Lk)("span",null,"Hide notifications",-1)]),2)):((0,a.uX)(),(0,a.CE)("div",{key:1,class:(0,i.C4)(["tooltip",M.mobileClasses])},t[62]||(t[62]=[(0,a.Lk)("span",null,"Show notifications",-1)]),2))],34))],4)]),t[63]||(t[63]=(0,a.Lk)("div",{class:"progress-bar"},null,-1))],34),[[o.aG,!M.preview]]),(0,a.bo)((0,a.bF)(q,null,null,512),[[Y,e=>M.clickOutside(e,E.panels.notifications)]]),(0,a.bo)((0,a.bF)(j,{tabindex:"-1",viewModel:E.editorManager.baklavaView},null,8,["viewModel"]),[[Y,e=>M.clickOutside(e,E.panels.settings)]]),(0,a.bF)(z,{onSidebarOpen:M.openNavbar},null,8,["onSidebarOpen"]),(0,a.bo)((0,a.bF)(J,{tabindex:"-1"},null,512),[[Y,e=>M.clickOutside(e,E.panels.graphDetails)]])])),[[Y,e=>M.handleMouseLeave(e)]])],64)}],["__scopeId","data-v-2f1c5908"]])},26278:(e,t,n)=>{n.d(t,{w5:()=>N,tQ:()=>O,XC:()=>j,Kv:()=>ee,Am:()=>R,IM:()=>C,nh:()=>K,Tq:()=>m,s$:()=>ve});var a=n(20641),o=n(90033);const i={class:"create-menu"},r={key:0,class:"option-label"};var s=n(50953),l=n(3455),u=n(93149),d=n(31897),c=n(878),p=n(96422);const v=(0,a.pM)({props:{modelValue:{type:Boolean,default:!1},saveConfiguration:{required:!0,type:Object}},setup(e,{emit:t}){const n=(t,n)=>[(0,a.EW)((()=>{if(void 0===e.saveConfiguration[n])return;const a=new c.A(t,e.saveConfiguration[n]);return a.events.setValue.subscribe(this,(t=>{e.saveConfiguration[n]=t})),a.setDefaultComponent(),a})),n],o=(0,s.lW)(e,"saveConfiguration"),i=(e,t)=>{const n=()=>{const t=new l.A(e);return t.componentName="InputInterface",t.setComponent((0,s.IG)(u.default)),t},i=(0,a.EW)((()=>void 0!==o.value[t])),r=(0,s.KR)(i.value?n():void 0);return(0,a.wB)(i,((e,t)=>{t!==e&&(r.value=e?n():void 0)})),[r,t]},r=n("Make graph read only","readonly"),v=n("Disable HUD","hideHud"),h=n("Preserve current view location","position"),m=n("Save graph","graph"),f=n("Minify","minify"),g=i("Graph name","graphName"),b=i("File name","saveName"),y=[(0,a.EW)((()=>new d.A("Save",(()=>{e.saveConfiguration.saveCallback(),e.modelValue&&t("update:modelValue",!1)})))),void 0];return{options:(0,a.EW)((()=>[r,v,h,m,f,g,b,y].filter((([e,t])=>void 0!==e.value)).map((([e,t])=>[e.value,t])))),getOptionName:p.BW}}});var h=n(66262);const m=(0,h.A)(v,[["render",function(e,t,n,s,l,u){return(0,a.uX)(),(0,a.CE)("div",i,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.options,(([t,n])=>((0,a.uX)(),(0,a.CE)("div",{key:t.id,class:"option"},[e.getOptionName(t.componentName)?((0,a.uX)(),(0,a.CE)("div",r,(0,o.v_)(t.name),1)):(0,a.Q3)("",!0),((0,a.uX)(),(0,a.Wv)((0,a.$y)(t.component),{intf:t,modelValue:e.saveConfiguration[n],"onUpdate:modelValue":t=>e.saveConfiguration[n]=t,class:(0,o.C4)({"__name-option":e.getOptionName(t.componentName)})},null,8,["intf","modelValue","onUpdate:modelValue","class"]))])))),128))])}]]);var f=n(53751);const g={class:"popup-menu"},b={class:"__header"},y={class:"__header-title"};var w=n(1691);const k=(0,a.pM)({props:{modelValue:{type:Boolean,default:!1},title:{type:String}},components:{Cross:w.A},setup:(e,{emit:t})=>({close:()=>{e.modelValue&&t("update:modelValue",!1)}})}),C=(0,h.A)(k,[["render",function(e,t,n,i,r,s){const l=(0,a.g2)("Cross");return(0,a.uX)(),(0,a.CE)("div",g,[(0,a.bo)((0,a.Lk)("div",b,[(0,a.Lk)("div",y,(0,o.v_)(e.title),1),(0,a.bF)(l,{tabindex:"-1",class:"__close",onClick:e.close},null,8,["onClick"])],512),[[f.aG,e.title]]),(0,a.RG)(e.$slots,"default")])}]]),A={class:"create-menu"},E={key:0,class:"option-label"};var M=n(21585);const x=(0,a.pM)({props:{modelValue:{type:Boolean,default:!1},exportGraph:{required:!0,type:Object}},setup(e,{emit:t}){const n=(t,n)=>[(0,a.EW)((()=>{if(void 0===e.exportGraph[n])return;const a=new M.A(t,e.exportGraph[n]);return a.events.setValue.subscribe(this,(t=>{e.exportGraph[n]=t})),a.setDefaultComponent(),a})),n],o=n("Width","width"),i=n("Height","height"),r=[(0,a.EW)((()=>{const e=new l.A("File name");return e.componentName="InputInterface",e.setComponent((0,s.IG)(u.default)),e})),"saveName"],c=[(0,a.EW)((()=>new d.A("Export",(()=>{e.exportGraph.exportCallback(),e.modelValue&&t("update:modelValue",!1)})))),void 0];return{options:(0,a.EW)((()=>[o,i,r,c].filter((([e,t])=>void 0!==e.value)).map((([e,t])=>[e.value,t])))),getOptionName:p.BW}}}),N=(0,h.A)(x,[["render",function(e,t,n,i,r,s){return(0,a.uX)(),(0,a.CE)("div",A,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.options,(([t,n])=>((0,a.uX)(),(0,a.CE)("div",{key:t.id,class:"option"},[e.getOptionName(t.componentName)?((0,a.uX)(),(0,a.CE)("div",E,(0,o.v_)(t.name),1)):(0,a.Q3)("",!0),((0,a.uX)(),(0,a.Wv)((0,a.$y)(t.component),{intf:t,modelValue:e.exportGraph[n],"onUpdate:modelValue":t=>e.exportGraph[n]=t,class:(0,o.C4)({"__name-option":e.getOptionName(t.componentName)})},null,8,["intf","modelValue","onUpdate:modelValue","class"]))])))),128))])}]]),S={class:"create-menu"},I={class:"option-label"};var L=n(63491),V=n(39021),P=n(8328);const _=function(e,t,n){return(0,a.EW)((()=>{const a=new l.A(e,t).setPort(!1);return a.componentName="InputInterface",a.configurationVModel=n,a.setComponent((0,s.IG)(u.default)),a}))},W=(0,a.pM)({setup(){const e={name:"New interface",type:"",direction:(0,s.KR)("inout"),maxConnectionsCount:(0,s.KR)(0)},t=_("Interface name",e.name,"name"),n=_("Interface type",e.type,"type"),o=(0,a.EW)((()=>{const t=new L.mk("Interface direction",e.direction.value,["input","output","inout"]).setPort(!1);return t.events.setValue.subscribe(this,(t=>{e.direction.value=t})),t.componentName="SelectInterface",t})),i=(0,a.EW)((()=>{const t=new M.A("Max connection count",e.maxConnectionsCount.value,-1,100).setPort(!1);return t.events.setValue.subscribe(this,(t=>{e.maxConnectionsCount.value=t})),t.componentName="IntegerInterface",t})),r=(0,a.EW)((()=>{const t=new L.aw("Add interface",(()=>{if(""===e.type){const t={name:e.name,direction:e.direction.value,maxConnectionsCount:e.maxConnectionsCount.value};(0,V.J7)(t)}else{const t=e.type.split(","),n={name:e.name,type:1===t.length?e.type:t,direction:e.direction.value,maxConnectionsCount:e.maxConnectionsCount.value};(0,V.J7)(n)}P.x.interfaceMenu=!1}));return t.componentName="ButtonInterface",t}));return{configurationOptions:(0,a.EW)((()=>[t.value,n.value,o.value,i.value])),addInterfaceMenu:r,getOptionName:p.BW,newInterface:e}}}),O=(0,h.A)(W,[["render",function(e,t,n,i,r,s){return(0,a.uX)(),(0,a.CE)("div",S,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.configurationOptions,(t=>((0,a.uX)(),(0,a.CE)("div",{key:t.id},[(0,a.Lk)("div",I,(0,o.v_)(e.getOptionName(t.componentName)?`${t.name}:`:""),1),"InputInterface"===t.componentName?((0,a.uX)(),(0,a.Wv)((0,a.$y)(t.component),{key:0,intf:t,modelValue:e.newInterface[t.configurationVModel],"onUpdate:modelValue":n=>e.newInterface[t.configurationVModel]=n,class:"__name-option"},null,8,["intf","modelValue","onUpdate:modelValue"])):((0,a.uX)(),(0,a.Wv)((0,a.$y)(t.component),{key:1,intf:t,class:"__name-option"},null,8,["intf"]))])))),128)),((0,a.uX)(),(0,a.Wv)((0,a.$y)(e.addInterfaceMenu.component),{intf:e.addInterfaceMenu},null,8,["intf"]))])}]]),F={class:"create-menu"},X={class:"option-label"};var T=n(46363),H=n(49098);const G=(0,a.pM)({setup(){P.x.configurationMenu.addNode&&(P.c.nodeData={name:"Custom Node",category:"Default category",layer:"",description:""},P.c.properties=[],P.c.interfaces=[],P.c.editedType=void 0,P.c.success=!1);const e=P.c.nodeData,t=()=>{P.x.configurationMenu.visible=!1},n=_("Node name","Custom Node","name"),o=_("Node category","Default","category");P.c.nodeData.description||(P.c.nodeData.description="");const i=(0,a.EW)((()=>{const e=new T.A("Node description","Description").setPort(!1);return e.componentName="TextAreaInterface",e.configurationVModel="description",e.setComponent((0,s.IG)(H.default)),e})),r=(0,a.EW)((()=>{let e;return e=!0===P.x.configurationMenu.addNode?new L.aw("Create",(()=>{const e=(0,V.RM)();P.c.success=0===e.length,t()})):new L.aw("Configure",(()=>{const e=(0,V.$k)();P.c.success=0===e.length,t()})),e.componentName="ButtonInterface",e}));return{configurationOptions:(0,a.EW)((()=>[n.value,o.value,i.value])),create:r,getOptionName:p.BW,newNode:e}}}),R=(0,h.A)(G,[["render",function(e,t,n,i,r,s){return(0,a.uX)(),(0,a.CE)("div",F,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.configurationOptions,(t=>((0,a.uX)(),(0,a.CE)("div",{key:t.id},[(0,a.Lk)("div",X,(0,o.v_)(e.getOptionName(t.componentName)?`${t.name}:`:""),1),((0,a.uX)(),(0,a.Wv)((0,a.$y)(t.component),{intf:t,modelValue:e.newNode[t.configurationVModel],"onUpdate:modelValue":n=>e.newNode[t.configurationVModel]=n,class:"__name-option"},null,8,["intf","modelValue","onUpdate:modelValue"]))])))),128)),((0,a.uX)(),(0,a.Wv)((0,a.$y)(e.create.component),{intf:e.create},null,8,["intf"]))])}]]),D={class:"create-menu"},$={class:"option-label"},B=(0,a.pM)({setup(){const e={name:"New property",type:(0,s.KR)("text"),default:"Default",min:(0,s.KR)(0),max:(0,s.KR)(0)},t=(0,s.KR)(!1),n=_("Property name",e.name,"name"),o=(0,a.EW)((()=>{const n=new L.mk("Property type",e.type.value,["text","number","integer","bool","slider","constant","hex","multiline"]).setPort(!1);return n.events.setValue.subscribe(this,(n=>{n!==e.type.value&&(["text","constant"].includes(n)?e.default=n:["number","integer","slider","hex"].includes(n)?(e.default=(0,s.KR)(0),["slider"].includes(n)?t.value=!0:t.value=!1):["bool"].includes(n)&&(e.default=(0,s.KR)(!0)),e.type.value=n)})),n.componentName="SelectInterface",n})),i=(0,a.EW)((()=>{if(["text","constant"].includes(e.type.value)){const t=new l.A("Default value",e.default).setPort(!1);return t.componentName="InputInterface",t.configurationVModel="default",t.setComponent((0,s.IG)(u.default)),t}if(["number","integer","slider","hex"].includes(e.type.value)){const t=new L.qO("Default value",e.default.value).setPort(!1);return t.events.setValue.subscribe(this,(t=>{e.default.value=t})),t.componentName="IntegerInterface",t}const t=new L.b("Default value",e.default.value).setPort(!1);return t.events.setValue.subscribe(this,(t=>{e.default.value=t})),t.componentName="CheckboxInterface",t})),r=(0,a.EW)((()=>{const n=new L.aw("Add property",(()=>{const n={name:e.name,type:e.type.value,default:"string"==typeof e.default?e.default:e.default.value,min:t.value?e.min.value:void 0,max:t.value?e.max.value:void 0};(0,V.hm)(n),P.x.propertyMenu=!1}));return n.componentName="ButtonInterface",n})),d=(0,a.EW)((()=>{const e=new L.b("Use min / max",t.value).setPort(!1);return e.events.setValue.subscribe(this,(e=>{t.value=e})),e.componentName="CheckboxInterface",e})),c=(0,a.EW)((()=>{var t;const n=new L.qO("Min",null!==(t=e.min.value)&&void 0!==t?t:0).setPort(!1);return n.events.setValue.subscribe(this,(t=>{e.min.value=t})),n.componentName="IntegerInterface",n})),v=(0,a.EW)((()=>{var t;const n=new L.qO("Max",null!==(t=e.max.value)&&void 0!==t?t:1).setPort(!1);return n.events.setValue.subscribe(this,(t=>{e.max.value=t})),n.componentName="IntegerInterface",n}));return{configurationOptions:(0,a.EW)((()=>{let a=[n.value,o.value,i.value];return["number","integer","slider","hex"].includes(e.type.value)&&(["slider"].includes(e.type.value)||a.push(d.value),t.value&&(a=a.concat([c.value,v.value]))),a})),addPropertyMenu:r,getOptionName:p.BW,newProperty:e}}}),K=(0,h.A)(B,[["render",function(e,t,n,i,r,s){return(0,a.uX)(),(0,a.CE)("div",D,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.configurationOptions,(t=>((0,a.uX)(),(0,a.CE)("div",{key:t.id},[(0,a.Lk)("div",$,(0,o.v_)(e.getOptionName(t.componentName)?`${t.name}:`:""),1),"InputInterface"===t.componentName?((0,a.uX)(),(0,a.Wv)((0,a.$y)(t.component),{key:0,intf:t,modelValue:e.newProperty[t.configurationVModel],"onUpdate:modelValue":n=>e.newProperty[t.configurationVModel]=n,class:"__name-option"},null,8,["intf","modelValue","onUpdate:modelValue"])):((0,a.uX)(),(0,a.Wv)((0,a.$y)(t.component),{key:1,intf:t,class:"__name-option"},null,8,["intf"]))])))),128)),((0,a.uX)(),(0,a.Wv)((0,a.$y)(e.addPropertyMenu.component),{intf:e.addPropertyMenu},null,8,["intf"]))])}]]),Q={class:"create-menu"},U={class:"option-label"},q=(0,a.pM)({setup(){const e=P.c.nodeData,t=_("Node layer","Default layer","layer"),n=(0,a.EW)((()=>{const e=new L.aw("Set layer",(()=>{(0,V.$k)(),P.x.layerMenu=!1}));return e.componentName="ButtonInterface",e}));return{configurationOptions:(0,a.EW)((()=>[t.value])),getOptionName:p.BW,newNodeData:e,setLayer:n}}}),j=(0,h.A)(q,[["render",function(e,t,n,i,r,s){return(0,a.uX)(),(0,a.CE)("div",Q,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.configurationOptions,(t=>((0,a.uX)(),(0,a.CE)("div",{key:t.id},[(0,a.Lk)("div",U,(0,o.v_)(e.getOptionName(t.componentName)?`${t.name}:`:""),1),((0,a.uX)(),(0,a.Wv)((0,a.$y)(t.component),{intf:t,modelValue:e.newNodeData[t.configurationVModel],"onUpdate:modelValue":n=>e.newNodeData[t.configurationVModel]=n,class:"__name-option"},null,8,["intf","modelValue","onUpdate:modelValue"]))])))),128)),((0,a.uX)(),(0,a.Wv)((0,a.$y)(e.setLayer.component),{intf:e.setLayer},null,8,["intf"]))])}]]),z={class:"create-menu"},J={class:"list"},Y={class:"confirm"},Z=(0,a.pM)({props:{componentName:{type:String,required:!0},items:{type:Array,required:!0},confirmAction:{type:Function,required:!0},confirmText:{type:String,required:!0}},setup(e){const t=(0,s.KR)([]),n=(0,a.EW)((()=>{const n=(0,s.KR)([]);return e.items.forEach((e=>{const a=new c.A(e.name,!1);a.events.setValue.subscribe(this,(()=>function(e){const n=t.value.indexOf(e);n>=0?t.value.splice(n,1):t.value.push(e)}(e))),n.value.push(a)})),n.value})),o=(0,a.EW)((()=>{const n=new L.aw(e.confirmText,(()=>{e.confirmAction(t.value),P.x[e.componentName]=!1}));return n.componentName="ButtonInterface",n}));return{selectedItems:t,listedOptions:n,confirmButton:o}}}),ee=(0,h.A)(Z,[["render",function(e,t,n,o,i,r){return(0,a.uX)(),(0,a.CE)("div",z,[(0,a.Lk)("div",J,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.listedOptions,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id},[((0,a.uX)(),(0,a.Wv)((0,a.$y)(e.component),{intf:e,tabindex:"-1"},null,8,["intf"]))])))),128))]),(0,a.Lk)("div",Y,[((0,a.uX)(),(0,a.Wv)((0,a.$y)(e.confirmButton.component),{intf:e.confirmButton},null,8,["intf"]))])])}]]),te={class:"welcome-container"},ne={class:"subtitle"},ae={key:0},oe={class:"drop-text"},ie={class:"footer-links"},re=["href"],se={width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},le=["d"],ue=["points"];var de=n(34580);const ce=[{text:"Documentation",url:"https://antmicro.github.io/kenning-pipeline-manager/introduction.html",icon:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z",polyline:"14,2 14,8 20,8"}],pe=(0,a.pM)({props:{loadFiles:{type:Function,required:!0}},setup(e){const t=(0,s.KR)(!1),n=(0,a.EW)((()=>de.Ay.getEditorManagerInstance().specificationLoaded.value)),o=(0,a.EW)((()=>({NODE_ENV:"production",VUE_APP_STATIC:"true",VUE_APP_VERBOSE:"false",VUE_APP_GRAPH_DEVELOPMENT_MODE:"false",BASE_URL:""}.VUE_APP_WELCOME_MESSAGE)));return{isDragging:t,specificationLoaded:n,welcomeMessage:o,links:ce,handleDrop:({dataTransfer:{files:n}})=>{t.value=!1,n.length&&e.loadFiles(n)}}}}),ve=(0,h.A)(pe,[["render",function(e,t,n,i,r,s){return(0,a.uX)(),(0,a.CE)("div",te,[(0,a.Lk)("p",ne,[e.welcomeMessage?((0,a.uX)(),(0,a.CE)("span",ae,[(0,a.eW)((0,o.v_)(e.welcomeMessage)+" ",1),t[5]||(t[5]=(0,a.Lk)("br",null,null,-1)),t[6]||(t[6]=(0,a.Lk)("br",null,null,-1))])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",{class:(0,o.C4)(["drop-zone",{dragging:e.isDragging}]),onDragover:t[1]||(t[1]=(0,f.D$)((t=>e.isDragging=!0),["prevent"])),onDragleave:t[2]||(t[2]=t=>e.isDragging=!1),onDrop:t[3]||(t[3]=(0,f.D$)(((...t)=>e.handleDrop&&e.handleDrop(...t)),["prevent"]))},[t[9]||(t[9]=(0,a.Lk)("svg",{class:"drop-icon",width:"40",height:"40",viewBox:"0 0 24 24",fill:"none"},[(0,a.Lk)("path",{d:"M12 15V3m0 0l-4 4m4-4l4 4M2 17l.621 2.485A2 2 0 0 0 4.561 21h14.878a2 2 0 0 0\n                        1.94-1.515L22 17",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),(0,a.Lk)("h3",null,(0,o.v_)(e.specificationLoaded?"Drag & drop graph file or nodes":"Drag & drop specification of nodes"),1),(0,a.Lk)("p",oe,(0,o.v_)(e.specificationLoaded?"Either upload an existing graph in JSON format or start a new graph by drag and dropping nodes specified in the left sidebar":"Load a specification file in JSON format to provide available node types. Optionally upload both specification and graph"),1),t[10]||(t[10]=(0,a.Lk)("div",{class:"or-divider"},[(0,a.Lk)("span",null,"OR")],-1)),(0,a.Lk)("button",{class:"browse-button",onClick:t[0]||(t[0]=t=>e.$refs.fileInput.click())},[((0,a.uX)(),(0,a.Wv)((0,a.$y)("svg"),{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},{default:(0,a.k6)((()=>t[7]||(t[7]=[(0,a.Lk)("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),(0,a.Lk)("polyline",{points:"14,2 14,8 20,8",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))),_:1,__:[7]})),t[8]||(t[8]=(0,a.eW)(" Browse files "))])],34),(0,a.Lk)("nav",ie,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.links,(({text:e,url:t,icon:n,polyline:i})=>((0,a.uX)(),(0,a.CE)("a",{key:e,href:t,target:"_blank",class:"footer-link"},[((0,a.uX)(),(0,a.CE)("svg",se,[(0,a.Lk)("path",{d:n,stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,8,le),i?((0,a.uX)(),(0,a.CE)("polyline",{key:0,points:i,stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,8,ue)):(0,a.Q3)("",!0)])),(0,a.eW)(" "+(0,o.v_)(e),1)],8,re)))),128))]),(0,a.Lk)("input",{ref:"fileInput",type:"file",onChange:t[4]||(t[4]=t=>e.loadFiles(t.target.files)),multiple:"",accept:".json"},null,544)])}],["__scopeId","data-v-ad09295c"]])},29567:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(20641);const o={components:{Arrow:n(22007).A},emits:["click"],data:()=>({isHovered:!1})},i=(0,n(66262).A)(o,[["render",function(e,t,n,o,i,r){const s=(0,a.g2)("Arrow");return(0,a.uX)(),(0,a.CE)("div",{role:"button",class:"return-control export-hidden",onPointerover:t[0]||(t[0]=e=>i.isHovered=!0),onPointerleave:t[1]||(t[1]=e=>i.isHovered=!1),onClick:t[2]||(t[2]=t=>e.$emit("click"))},[(0,a.bF)(s,{rotate:"down",hover:i.isHovered,color:"white",class:"small_svg"},null,8,["hover"])],32)}],["__scopeId","data-v-31c81a72"]])},30001:(e,t,n)=>{n.d(t,{A:()=>y});var a=n(20641),o=n(53751),i=n(90033);const r={key:0,ref:"root",class:"__spec-editor-section"},s={class:"__spec-editor"},l=["disabled"],u={class:"__validation_errors"},d={key:1,style:{color:"var(--baklava-control-color-primary)"}};var c=n(46670),p=n.n(c),v=n(50953),h=n(34580),m=n(93617),f=n(8328),g=n(39021);const b=(0,a.pM)({props:{node:{required:!0,type:Object},scrollHandle:{required:!1,type:HTMLElement}},setup(e){const t=h.Ay.getEditorManagerInstance(),n=(0,v.lW)(e,"node"),o=(0,v.KR)(null),i=(0,v.KR)(null);let r;const s=e=>void 0!==e?p().stringify(e):"",l=e=>{const t=e.isCategory??!1,a=n.value?.type;return a===(t?e.category?.split("/").slice(-1)[0]:e.name)},u=(0,v.KR)(null);(0,a.wB)(t.specification.unresolvedSpecification,(()=>{const e=t.specification.unresolvedSpecification,n=t.specification.includedSpecification,a=JSON.parse(JSON.stringify(e));h.Ay.mergeObjects(a,n),u.value=a}),{immediate:!0});const d=(0,a.EW)((()=>u.value?.nodes?.find(l))),c=(0,v.KR)(s(d.value)),b=(e,t)=>{const n=new Map;return e.forEach((e=>{let a=1;n.has(e[t])&&(a=n.get(e[t])+1),n.set(e[t],a)})),Array.from(n.entries()).filter((([e,t])=>t>1)).map((([e])=>e))},y=e=>{if(!e?.interfaces)return;const t=b(e.interfaces,"name");if(t.length>0)throw new Error(`Conflicting interface names: ${t.join(", ")}`)},w=e=>{const n=t.validateNode(e);if(n.length)throw new Error(n)},k=e=>{if(!e?.properties)return;const t=b(e.properties,"name");if(t.length>0)throw new Error(`Conflicting property names: ${t.join(", ")}`)},C=e=>{const n=t.validateNodeStyle(e);if(n.length)throw new Error(n)},A=()=>{const e=[];try{const t=p().parse(c.value.replaceAll("\t","  "));if(JSON.stringify(d.value)===JSON.stringify(t))return[];try{w(t)}catch(t){e.push(t)}try{k(t)}catch(t){e.push(t)}try{y(t)}catch(t){e.push(t)}try{C(t)}catch(t){e.push(t)}}catch(t){e.push(t)}return e},E=(0,v.KR)([]),M=()=>{E.value=A()},x=(0,a.EW)((()=>!t.baklavaView.editor.readonly&&d.value&&t.baklavaView.settings.editableNodeTypes)),N=(0,a.EW)((()=>{try{const e=p().parse(c.value.replaceAll("\t","  "));if(JSON.stringify(d.value)===JSON.stringify(e))return!1;const t=p().parse(c.value.replaceAll("\t","  "));return w(t),k(t),y(t),!0}catch(e){return!1}})),S=()=>{if(!x.value)return;const{scrollHandle:a}=e;let o;e.scrollHandle&&(o=a.scrollTop),i.value.style.height="auto",i.value.style.height=`${i.value.scrollHeight}px`,void 0!==a&&a.scrollTop<o&&(a.scrollTop=o),t.modifiedNodeSpecificationRegistry[n.value.id]=c.value,i.value&&(i.value.removeEventListener("keyup",i.value.liveValidateListener),i.value.liveValidateListener=()=>{clearTimeout(r),r=setTimeout(M,500)},i.value.addEventListener("keyup",i.value.liveValidateListener))},I=()=>(0,a.dY)().then(S);(0,a.wB)(c,I),(0,a.wB)(x,I),I(),(0,a.wB)(d,(async()=>{c.value=t.modifiedNodeSpecificationRegistry[n.value.id]??s(d.value)}));const L=()=>{if(f.x.configurationMenu.addNode)return;if(n.value.type!==f.c.nodeData.name)return;const e=t.specification.unresolvedSpecification?.nodes?.find(l);d.value=e,c.value=s(e),t.modifiedNodeSpecificationRegistry[n.value.id]=c.value};return(0,a.wB)(f.x,(()=>(0,a.dY)().then(L))),(0,a.sV)((()=>{(0,a.dY)((()=>{S(),setTimeout((()=>{S()}),10)}))})),{el:i,root:o,handleInput:S,currentSpecification:c,specification:d,validate:A,updateSpecification:async()=>{try{const e=A();if(e.length>0)throw new Error(e);const a=p().parse(c.value.replaceAll("\t","  ")),{style:o}=a;Array.isArray(o)&&o.includes(h.L6)||(a.style=h.Ay.mergeStyles(o,h.L6));const i=n.value.type,r=(0,g.zM)(i);r.forEach((e=>{e.type===e.title?e.title=h.Ay.getNodeName(a):e.highlightedType=h.Ay.getNodeName(a),e.type=h.Ay.getNodeName(a),Object.entries(a).forEach((([t,n])=>{void 0!==n&&"name"!==t&&(e[t]=n)}))}));let s=t.specification.currentSpecification.nodes?.find((e=>h.Ay.getNodeName(e)===i));void 0===s&&(s=t.specification.currentSpecification.nodes?.find(l)),void 0===s&&(s=t.specification.unresolvedSpecification.nodes?.find(l)),void 0===s&&(s=t.specification.unresolvedSpecification.nodes?.find((e=>h.Ay.getNodeName(e)===i)));let u=s.properties??[],d=s.interfaces??[],v=[],f=[];a?.extends?.forEach((e=>{const n=t.baklavaView.editor.parentNodes.get(e);v=[...v,...n?.properties??[]],f=[...f,...n?.interfaces??[]]})),u=u.filter((e=>!v.some((t=>t.name===e.name)))),d=d.filter((e=>!f.some((t=>t.name===e.name))));const b=structuredClone(a.properties??[]),E=structuredClone(a.interfaces??[]),M=u.filter((e=>!b.some((t=>t.name===e.name))))??[],x=d.filter((e=>!E.some((t=>t.name===e.name&&t.array===e.array))))??[],N=b.filter((e=>!u.some((t=>t.name===e.name))))??[],S=E.filter((e=>!d.some((t=>t.name===e.name))))??[],I=(0,g.zM)(i,!0)??[];(0,g.iv)([...r,...I],M,!0),(0,g.Rj)([...r,...I],x,!0),(0,g.iv)([...r,...I],b),(0,g.Rj)([...r,...I],E),(t.specification.currentSpecification.nodes.filter((e=>e.extends?.includes(i)))??[]).forEach((e=>{e.interfaces=e.interfaces?.filter((e=>!x.some((t=>t.name===e.name))))??[],e.properties=e.properties?.filter((e=>!M.some((t=>t.name===e.name))))??[],e.interfaces=[...e.interfaces,...S],e.properties=[...e.properties,...N]}));const L=t._unregisterNodeType(i);if(L.length)return void m.A.terminalLog("error","Error when registering the node",L);const V=t.addNodeToEditorSpecification(a,i);if(void 0!==V.errors&&V.errors.length)throw new Error(V.errors);C(a),y(a),k(a),w(a);const P=h.Ay.validateSpecification(t.specification.unresolvedSpecification);if(P.length)throw new Error(P);c.value=p().stringify(a),t.modifiedNodeSpecificationRegistry[n.value.id]=c.value,m.A.showToast("info","Node validated")}catch(e){const t=Array.isArray(e)?e:[e];m.A.terminalLog("error","Validation failed",t)}},canApplyChanges:N,visible:x,handleTab:async e=>{e.preventDefault(),document.execCommand("insertText",!1,"\t")},formatError:e=>{let t=e&&e.message?e.message:String(e);t=t.replace(/^\s*unresolved_specification\//,"");try{const e=t.match(/\[.*\]/);if(e){const n=JSON.parse(e[0]);Array.isArray(n)&&(t=t.replace(e[0],n.join(", ")))}}catch(e){}return t},cachedValidationResult:E}}}),y=(0,n(66262).A)(b,[["render",function(e,t,n,c,p,v){return e.visible?((0,a.uX)(),(0,a.CE)("div",r,[t[6]||(t[6]=(0,a.Lk)("div",{class:"__title"},"Specification",-1)),(0,a.Lk)("div",s,[(0,a.Lk)("button",{class:"baklava-button __validate-button",disabled:!e.canApplyChanges,onClick:t[0]||(t[0]=(...t)=>e.updateSpecification&&e.updateSpecification(...t))}," Apply ",8,l),(0,a.bo)((0,a.Lk)("textarea",{ref:"el","onUpdate:modelValue":t[1]||(t[1]=t=>e.currentSpecification=t),class:"baklava-input __editor",spellcheck:"false",onInput:t[2]||(t[2]=(...t)=>e.handleInput&&e.handleInput(...t)),onKeydown:t[3]||(t[3]=(0,o.jR)(((...t)=>e.handleTab&&e.handleTab(...t)),["tab"]))},null,544),[[o.Jo,e.currentSpecification]]),(0,a.Lk)("p",u,[e.cachedValidationResult.length>0?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[t[4]||(t[4]=(0,a.eW)(" Problems:")),t[5]||(t[5]=(0,a.Lk)("br",null,null,-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.cachedValidationResult,((t,n)=>((0,a.uX)(),(0,a.CE)("span",{key:n,style:{color:"var(--baklava-control-color-error)"}},(0,i.v_)(e.formatError(t)),1)))),128))],64)):((0,a.uX)(),(0,a.CE)("span",d," The specification is valid. "))])])],512)):(0,a.Q3)("",!0)}],["__scopeId","data-v-3d7e1cf0"]])},42231:(e,t,n)=>{n.d(t,{A:()=>h});var a=n(20641),o=n(90033);const i={class:"notification-badge"},r={class:"notification-message"},s={class:"message"};var l=n(1691);const u={components:{ExclamationMark:n(4138).A,Cross:l.A},props:{type:{type:String,required:!0}}};var d=n(66262);const c=(0,d.A)(u,[["render",function(e,t,n,i,r,s){const l=(0,a.g2)("ExclamationMark"),u=(0,a.g2)("Cross");return(0,a.uX)(),(0,a.CE)("div",{class:(0,o.C4)(n.type)},["info"===n.type?((0,a.uX)(),(0,a.Wv)(l,{key:0})):(0,a.Q3)("",!0),"warning"===n.type?((0,a.uX)(),(0,a.Wv)(l,{key:1,rotate:"flip"})):(0,a.Q3)("",!0),"error"===n.type?((0,a.uX)(),(0,a.Wv)(u,{key:2,color:"white"})):(0,a.Q3)("",!0)],2)}],["__scopeId","data-v-9ef0f814"]]);var p=n(35127);const v={components:{Cross:l.A,NotificationBadge:c},props:{message:{type:String,required:!0},type:{type:String,required:!0},border:{type:String,default:"none"},index:{type:Number,default:0}},data:()=>({notificationStore:p.xv}),methods:{remove(){p.xv.removeOne(this.index)}}},h=(0,d.A)(v,[["render",function(e,t,n,l,u,d){const c=(0,a.g2)("NotificationBadge"),p=(0,a.g2)("Cross");return(0,a.uX)(),(0,a.CE)("div",{class:(0,o.C4)([n.border,"notification-container"])},[(0,a.Lk)("div",i,[(0,a.bF)(c,{type:n.type},null,8,["type"])]),(0,a.Lk)("div",r,["info"===n.type?((0,a.uX)(),(0,a.CE)("span",{key:0,class:(0,o.C4)(n.type)},"Info",2)):(0,a.Q3)("",!0),"warning"===n.type?((0,a.uX)(),(0,a.CE)("span",{key:1,class:(0,o.C4)(n.type)},"Warning",2)):(0,a.Q3)("",!0),"error"===n.type?((0,a.uX)(),(0,a.CE)("span",{key:2,class:(0,o.C4)(n.type)},"Error",2)):(0,a.Q3)("",!0),(0,a.Lk)("span",s,(0,o.v_)(n.message),1)]),(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>d.remove&&d.remove(...e)),tabindex:"-1"},[(0,a.bF)(p,{color:"white",tabindex:"-1"})])],2)}],["__scopeId","data-v-0512bfcb"]])},86585:(e,t,n)=>{n.d(t,{A:()=>d});var a=n(20641),o=n(90033);const i={class:"zoom-control-wrapper"};var r=n(57428),s=n(36560),l=n(89725);const u={components:{Minus:r.A,Plus:s.A,Crosshair:l.A},props:{floating:{type:Boolean,default:!1}},setup:e=>({floatingStatus:(0,a.EW)((()=>({floating:e.floating,normal:!e.floating})))}),emits:["zoomIn","zoomOut","center"],data:()=>({hoverInfo:{isHovered:!1,hoveredPanel:void 0}}),methods:{isHovered(e){return this.hoverInfo.hoveredPanel===e&&this.hoverInfo.isHovered},updateHoverInfo(e){this.hoverInfo.hoveredPanel=e,this.hoverInfo.isHovered=!0},resetHoverInfo(e){this.hoverInfo.hoveredPanel===e&&(this.hoverInfo.hoveredPanel=void 0,this.hoverInfo.isHovered=!1)}}},d=(0,n(66262).A)(u,[["render",function(e,t,n,r,s,l){const u=(0,a.g2)("Crosshair"),d=(0,a.g2)("Plus"),c=(0,a.g2)("Minus");return(0,a.uX)(),(0,a.CE)("div",{class:(0,o.C4)(["zoom-container export-hidden",r.floatingStatus])},[(0,a.Lk)("div",{role:"button",class:"zoom-center",onPointerover:t[0]||(t[0]=()=>l.updateHoverInfo("center")),onPointerleave:t[1]||(t[1]=()=>l.resetHoverInfo("center")),onClick:t[2]||(t[2]=t=>e.$emit("center"))},[(0,a.bF)(u,{hover:l.isHovered("center")},null,8,["hover"])],32),(0,a.Lk)("div",i,[(0,a.Lk)("div",{role:"button",class:"zoom-control",onPointerover:t[3]||(t[3]=()=>l.updateHoverInfo("plus")),onPointerleave:t[4]||(t[4]=()=>l.resetHoverInfo("plus")),onClick:t[5]||(t[5]=t=>e.$emit("zoomIn"))},[(0,a.bF)(d,{hover:l.isHovered("plus")},null,8,["hover"])],32),(0,a.Lk)("div",{role:"button",class:"zoom-control",onPointerover:t[6]||(t[6]=()=>l.updateHoverInfo("minus")),onPointerleave:t[7]||(t[7]=()=>l.resetHoverInfo("minus")),onClick:t[8]||(t[8]=t=>e.$emit("zoomOut"))},[(0,a.bF)(c,{hover:l.isHovered("minus")},null,8,["hover"])],32)])],2)}],["__scopeId","data-v-14fd0c95"]])},94595:(e,t,n)=>{n.d(t,{A:()=>E});var a=n(20641),o=n(90033),i=n(53751);const r={class:"container"},s={class:"tab"},l=["onClick"],u={class:"indicator-wrapper"},d={class:"button-wrapper"};var c=n(50953);const p={id:"hterm-terminal"};var v=n(35127),h=n(25672),m=n(323);const f=(0,a.pM)({props:{terminalInstance:{type:String}},setup(e){let t;const n={"background-color":"#1d1d1d","cursor-color":"white","mouse-right-click-paste":!1,"pass-meta-v":!1,"mouse-paste-button":"no-button","pass-on-drop":!1,"shift-insert-paste":!1},o=(0,a.EW)((()=>v.iP.logs[e.terminalInstance])),i=(0,a.EW)((()=>void 0===o.value?0:o.value.length)),r=[],s=n=>{if(void 0===t)return;const a=v.iP.readOnly[e.terminalInstance]?n.replace(/\n/g,"\r\n"):n;t.io.print(a),r.push(a)};let l=0;const u=()=>{l=0,void 0!==t&&(s("[0m"),t.scrollHome(),t.wipeContents())},d=(0,m.A)();(0,a.sV)((async()=>{await h.c.init(),Object.keys(n).forEach((e=>{localStorage.setItem(`/hterm/profiles/default/${e}`,n[e])})),t=new h.D.Terminal,t.scrollPort_.contenteditable=!1,t.onTerminalReady=function(){this.io.sendString=t=>{v.iP.isReadOnly(e.terminalInstance)||d.requestTerminalRead(e.terminalInstance,t)},this.onVTKeystroke=t=>{v.iP.isReadOnly(e.terminalInstance)||d.requestTerminalRead(e.terminalInstance,t)},this.io.onTerminalResize=()=>{u(),r.forEach((e=>{t.io.print(e)}))},this.installKeyboard()},t.decorate(document.querySelector("#hterm-terminal")),(0,a.wB)([()=>e.terminalInstance,i],(async([n,o],[i,d])=>{void 0!==n&&v.iP.exists(n)&&(v.iP.readOnly[e.terminalInstance]?(t.scrollPort_.contenteditable=!1,t.setCursorVisible(!1)):(t.scrollPort_.contenteditable=!0,t.setCursorVisible(!0)),await(0,a.dY)(),i===n&&0!==o||(u(),r.length=0),d!==o||i!==n)&&v.iP.logs[n].slice(l).forEach(((e,t)=>{l>0&&n===v.d&&s("\n\n"),s(e),l+=1}))}))}))}});var g=n(66262);const b=(0,g.A)(f,[["render",function(e,t,n,o,i,r){return(0,a.uX)(),(0,a.CE)("div",p)}],["__scopeId","data-v-246a4a0f"]]);var y=n(22007),w=n(95426),k=n(33007),C=n(5292);const A=(0,a.pM)({components:{Arrow:y.A,Indicator:w.A,Bin:k.A,Terminal:b},setup(){const e=(0,c.KR)(null),t=(0,c.KR)(null),n=(0,c.KR)(void 0),o=(0,c.KR)(!1),i=(0,c.KR)(!0),r=(0,c.KR)(0),s=(0,c.KR)(!1),l=(0,a.EW)((()=>o.value?{height:`${Math.max(r.value,395)}px`}:{height:"unset"})),u=(0,a.EW)((()=>({"pointer-events":o.value?"all":"none"}))),d=(0,c.KR)([]),p=e=>t=>t.name===e,h=(0,c.KR)([]),m=(0,a.EW)((()=>h.value.map((e=>d.value.find(p(e)))))),f=(0,a.EW)((()=>{const e=Object.values(v.iP.logs).map((e=>e.length)),t=Object.keys(v.iP.logs),n=[];for(let a=0;a<t.length;a+=1)n.push({name:t[a],length:e[a]});return n}));(0,a.wB)(f,((e,t)=>{const a=null==t?void 0:t.map((e=>e.name));e.forEach((e=>{if(null==a?void 0:a.includes(e.name)){const a=t.find((t=>t.name===e.name));(null==a?void 0:a.length)!==e.length&&e.name!==n.value&&(d.value.find((t=>t.name===e.name)).hasNewMessage=!0)}else d.value.push({name:e.name,hasNewMessage:0!==e.length}),h.value.push(e.name)})),null==t||t.filter((t=>!e.some(p(t.name)))).forEach((e=>{const t=d.value.findIndex(p(e.name));d.value.splice(t,1);const a=h.value.indexOf(e.name,1);h.value.splice(a,1),n.value===e.name&&b(e.name)}))}),{immediate:!0});const g=e=>{d.value.forEach((t=>{t.name===e&&(t.hasNewMessage=!1)}))},b=(e,i=!0)=>{var r,s;if(void 0!==e||o.value)if(e===n.value||void 0===e)n.value=void 0,o.value=!1;else{const a=null!==(s=null===(r=t.value)||void 0===r?void 0:r.style.height)&&void 0!==s?s:"unset";n.value=e,o.value=!0,g(e),"unset"!==a&&(l.value.height=a)}else n.value=v.d,o.value=!0,g(v.d);void 0===n.value||i&&v.iP.isReadOnly(n.value)||(0,a.dY)().then((()=>{var e;return null===(e=document.getElementById("hterm-terminal"))||void 0===e?void 0:e.focus()}))},y={hide(){v.iP.show=!1,o.value&&b(n.value)},show(e){const t=null!=e?e:v.d;v.iP.show=!0;const a=!o.value,i=n.value&&t!==n.value;(a||i)&&b(null!=t?t:n.value,!1)},view(e){e.names&&(h.value=e.names),void 0!==e.clearButton&&(i.value=e.clearButton)}};return(0,a.sV)((()=>{v.iP.manager=y,e.value.addEventListener("mousedown",(0,C.q)((e=>{r.value=e})))})),{toggleTerminalPanel:b,clearTerminalOutput:e=>{v.iP.clear(e)},showClearButton:i,displayedTerminals:m,activeTerminal:n,isTerminalPanelOpened:o,resizer:e,terminalWrapper:t,pipelineSpanClasses:e=>({active:o.value&&e===n.value}),terminalWrapperStyles:l,resizerStyles:u,arrowHovered:s,terminalIndicatorColor:e=>e?"green":"gray"}}}),E=(0,g.A)(A,[["render",function(e,t,n,c,p,v){const h=(0,a.g2)("Indicator"),m=(0,a.g2)("Bin"),f=(0,a.g2)("Arrow"),g=(0,a.g2)("Terminal");return(0,a.uX)(),(0,a.CE)("div",{ref:"terminalWrapper",class:"terminal-wrapper",style:(0,o.Tr)(e.terminalWrapperStyles)},[(0,a.Lk)("div",r,[(0,a.Lk)("div",{ref:"resizer",class:"resizer",style:(0,o.Tr)(e.resizerStyles)},null,4),(0,a.Lk)("div",s,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.displayedTerminals,(t=>((0,a.uX)(),(0,a.CE)("button",{key:t.name,class:(0,o.C4)(["tab-item",e.pipelineSpanClasses(t.name)]),onClick:n=>e.toggleTerminalPanel(t.name)},[(0,a.Lk)("span",{class:(0,o.C4)(e.pipelineSpanClasses(t.name))},(0,o.v_)(t.name),3),(0,a.Lk)("div",u,[t.hasNewMessage?((0,a.uX)(),(0,a.Wv)(h,{key:0,color:e.terminalIndicatorColor(t.hasNewMessage)},null,8,["color"])):(0,a.Q3)("",!0)])],10,l)))),128))]),(0,a.Lk)("div",d,[e.isTerminalPanelOpened&&e.showClearButton?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[0]||(t[0]=t=>e.clearTerminalOutput(e.activeTerminal))},[(0,a.bF)(m),t[4]||(t[4]=(0,a.Lk)("span",null,"Clear terminal",-1))])):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[1]||(t[1]=()=>{e.arrowHovered=!1,e.toggleTerminalPanel(void 0)}),onMouseenter:t[2]||(t[2]=t=>e.arrowHovered=!0),onMouseleave:t[3]||(t[3]=t=>e.arrowHovered=!1)},[e.isTerminalPanelOpened?((0,a.uX)(),(0,a.Wv)(f,{key:1,color:"white",scale:"small",rotate:"left",hover:e.arrowHovered},null,8,["hover"])):((0,a.uX)(),(0,a.Wv)(f,{key:0,color:"white",scale:"small",rotate:"up",hover:e.arrowHovered},null,8,["hover"]))],32)])]),(0,a.bo)((0,a.bF)(g,{terminalInstance:e.activeTerminal},null,8,["terminalInstance"]),[[i.aG,e.isTerminalPanelOpened]])],4)}],["__scopeId","data-v-6404167b"]])},95012:(e,t,n)=>{n.d(t,{A:()=>f});var a=n(20641),o=n(90033),i=n(53751);const r={class:"search-bar"},s={class:"palette-title"},l=["onClick"],u={class:"__entry_search"};var d=n(50953),c=n(3972),p=n(62264),v=n(67185),h=n(11899);const m=(0,a.pM)({components:{GraphListPalette:h.A,Magnifier:p.A,NodePalette:v.A,Tooltip:c.A},setup(){const e=(0,d.KR)(null),t=(0,d.KR)(null);t.value={top:0,left:0,visible:!1,text:""};const n=(0,d.KR)(""),a=(0,d.KR)("Nodes");return{tooltip:t,paletteSearch:n,paletteRef:e,tabs:{Nodes:(0,d.IG)(v.A),Graphs:(0,d.IG)(h.A)},tabValue:a}}}),f=(0,n(66262).A)(m,[["render",function(e,t,n,d,c,p){const v=(0,a.g2)("Magnifier"),h=(0,a.g2)("Tooltip");return(0,a.uX)(),(0,a.CE)("div",{ref:"paletteRef",class:(0,o.C4)(["baklava-node-palette export-hidden",{"hidden-navbar":e.$isMobile}])},[(0,a.Lk)("div",r,[(0,a.Lk)("div",s,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(Object.keys(e.tabs),(t=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:(0,o.C4)(["tab",{"--active":t===e.tabValue}]),onClick:()=>{e.tabValue=t}},[(0,a.Lk)("span",null,(0,o.v_)(t),1)],10,l)))),128))]),(0,a.Lk)("div",u,[(0,a.bF)(v,{color:"gray"}),(0,a.bo)((0,a.Lk)("input",{class:"palette-search","onUpdate:modelValue":t[0]||(t[0]=t=>e.paletteSearch=t),placeholder:"Search"},null,512),[[i.Jo,e.paletteSearch]])])]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(Object.entries(e.tabs),(([t,n])=>(0,a.bo)(((0,a.uX)(),(0,a.Wv)((0,a.$y)(n),{key:t,paletteRef:e.paletteRef,paletteSearch:e.paletteSearch},null,8,["paletteRef","paletteSearch"])),[[i.aG,t===e.tabValue]]))),128)),(0,a.bo)((0,a.bF)(h,{text:e.tooltip.text,left:e.tooltip.left,top:e.tooltip.top-60},null,8,["text","left","top"]),[[i.aG,e.tooltip.visible]])],2)}]])}}]);
//# sourceMappingURL=index-3acb5f41.5ff943e7.js.map